"use strict";(self.webpackChunkidle_dashboard_new=self.webpackChunkidle_dashboard_new||[]).push([[6624],{66624:function(e,t,l){l.r(t),l.d(t,{DynamicActionFields:function(){return Z}});var i=l(93433),n=l(1413),o=l(45987),a=l(5128),r=l(7276),u=l(87099),s=l(12056),d=l(86059),m=l(60062),c=l(43098),v=l(15542),f=l(1669),g=l(3498),p=l(20910),y=l(45263),x=["assetId","field","amount","amountUsd","stakingPower"],A=function(e){var t,l,i=e.assetId,u=e.field,s=e.amount,A=e.amountUsd,Z=e.stakingPower,k=(0,o.Z)(e,x),S=(0,f.w)(),w=S.stakingData,b=S.helpers.vaultFunctionsHelper,h=S.selectors,j=h.selectAssetById,M=h.selectVaultById,B=h.selectVaultGauge,I=(0,r.useMemo)((function(){return i&&j&&j(i)}),[i,j]),P=(0,r.useMemo)((function(){return I&&j&&j(I.underlyingId)}),[I,j]),F=(0,r.useMemo)((function(){return i&&M&&M(i)}),[i,M]),D=(0,r.useMemo)((function(){return i&&B&&B(i)}),[i,B]),U=(0,r.useMemo)((function(){return D&&j&&j(D.id)}),[D,j]),C=(0,r.useMemo)((function(){return(0,p.gA)(I.tvl).plus((0,p.d5)(s))}),[I,s]),L=(0,r.useMemo)((function(){return null===b||void 0===b?void 0:b.getVaultNewApr(I,F,(0,p.gA)(s))}),[I,F,s,b]),T=(0,r.useMemo)((function(){if((0,p.d5)(L).gt(0)){var e=(0,p.Bs)((0,p.d5)(L).div(100)).times(100),t=I.apyBreakdown?Object.keys(I.apyBreakdown||{}).filter((function(e){return"base"!==e})).reduce((function(e,t){switch(t){case"gauge":var l=null===U||void 0===U?void 0:U.gaugeData;if(l){var i=(0,p.d5)(null===l||void 0===l?void 0:l.totalSupply).plus((0,p.d5)(s)),n=(0,p.d5)(null===l||void 0===l?void 0:l.totalSupply).div(i),o=I.apyBreakdown[t].times(n);return e.plus(o)}return e.plus(I.apyBreakdown[t]);case"harvest":var a=(0,p.gA)(I.tvl).div(C),r=I.aprBreakdown[t].times(a);return e.plus((0,p.Bs)((0,p.gA)(r).div(100)).times(100));case"rewards":var u=(0,p.gA)(I.tvl).div(C),d=I.aprBreakdown[t].times(u);return e.plus((0,p.Bs)((0,p.gA)(d).div(100)).times(100));default:return e.plus(I.apyBreakdown[t])}}),(0,p.gA)(0)):(0,p.gA)(0);return(0,p.gA)(e).plus(t)}return(0,p.d5)(null===I||void 0===I?void 0:I.apy)}),[I,s,C,U,L]),_=(0,r.useMemo)((function(){return(0,p.d5)(A).gt(0)}),[A]),E=(0,r.useMemo)((function(){var e;return(0,p.d5)(null===I||void 0===I||null===(e=I.vaultPosition)||void 0===e?void 0:e.underlying.redeemable)}),[I]),G=(0,r.useMemo)((function(){var e;return(0,p.d5)(null===I||void 0===I||null===(e=I.vaultPosition)||void 0===e?void 0:e.usd.redeemable)}),[I]),V=(0,r.useMemo)((function(){var e,t;return"flags"in F&&(0,p.d5)(null===(e=F.flags)||void 0===e?void 0:e.withdrawFee).gt(0)?G.times(null===(t=F.flags)||void 0===t?void 0:t.withdrawFee):(0,p.gA)(0)}),[F,G]),q=(0,r.useMemo)((function(){var e;return a.Z.maximum(0,(0,p.d5)(null===I||void 0===I||null===(e=I.vaultPosition)||void 0===e?void 0:e.usd.earnings).minus(V))}),[V,I]),z=(0,r.useMemo)((function(){return a.Z.minimum(1,(0,p.d5)(A).div(G))}),[A,G]),H=(0,r.useMemo)((function(){return a.Z.minimum(q,z.times(q))}),[q,z]),N=(0,r.useMemo)((function(){var e;return a.Z.maximum(0,(0,p.d5)(null===I||void 0===I||null===(e=I.vaultPosition)||void 0===e?void 0:e.usd.earnings).times(null===I||void 0===I?void 0:I.fee))}),[I]),O=(0,r.useMemo)((function(){return a.Z.minimum(N,(0,p.d5)(H).times(null===I||void 0===I?void 0:I.fee))}),[N,H,I]);F instanceof m.C&&(q=q.plus(O),H=H.plus(O));var J=_&&(0,p.d5)(s).lte(E),K="cta",Q=null;switch(u){case"boost":var R=T&&null!==I&&void 0!==I&&null!==(t=I.baseApr)&&void 0!==t&&t.gt(0)?T.div(null===I||void 0===I?void 0:I.baseApr):(0,p.gA)(0);Q=(0,y.jsxs)(g.xv,(0,n.Z)((0,n.Z)({},k),{},{textStyle:"titleSmall",color:"primary",children:[R.gt(9999)?">9999":R.toFixed(2),"x"]}));break;case"overperformance":var W=(0,p.d5)(A).times((0,p.gA)(null===I||void 0===I?void 0:I.baseApr).div(100)),X=(0,p.d5)(A).times((0,p.gA)(null===I||void 0===I?void 0:I.apy).div(100)),Y=_?X.minus(W):null;Q=(0,y.jsx)(d.Amount.Usd,(0,n.Z)((0,n.Z)({textStyle:"titleSmall",color:"primary"},k),{},{value:Y,suffix:"/year"}));break;case"newApy":Q=(0,y.jsx)(d.Amount.Percentage,(0,n.Z)((0,n.Z)({textStyle:"titleSmall",color:"primary"},k),{},{value:T}));break;case"totalGain":Q=(0,y.jsx)(d.Amount.Usd,(0,n.Z)((0,n.Z)({decimals:H.lt(1)?4:2,textStyle:"titleSmall",color:"primary"},k),{},{value:J?H:null}));break;case"fee":Q=(0,y.jsx)(d.Amount.Usd,(0,n.Z)((0,n.Z)({decimals:O.lt(1)?4:2,textStyle:"titleSmall",color:"primary"},k),{},{value:J?-O:null}));break;case"withdrawFee":(0,p.d5)(null===(l=F.flags)||void 0===l?void 0:l.withdrawFee).gt(0)&&(K="orange",Q=(0,y.jsx)(d.Amount.Usd,(0,n.Z)((0,n.Z)({decimals:V.lt(1)?4:2,textStyle:"titleSmall",color:"orange"},k),{},{value:J?-V:null})));break;case"depositLimit":K="orange";var $=a.Z.maximum(0,(0,p.d5)(I.limit).minus(I.totalTvl).minus((0,p.d5)(s)));Q=(0,y.jsx)(d.Amount,(0,n.Z)((0,n.Z)({suffix:" ".concat(P.token),decimals:2,textStyle:"titleSmall",color:K},k),{},{value:$}));break;case"netGain":var ee=a.Z.minimum(q.minus(O),(0,p.d5)(H).minus(O));Q=(0,y.jsx)(d.Amount.Usd,(0,n.Z)((0,n.Z)({decimals:ee.lt(1)?4:2,textStyle:"titleSmall",color:"primary"},k),{},{value:J?ee:null}));break;case"coverage":var te=j(null===F||void 0===F?void 0:F.vaultConfig.Tranches.BB.address),le=te.tvl&&C?te.tvl.div(C).times(100):0;Q=(0,y.jsx)(d.Amount.Percentage,(0,n.Z)((0,n.Z)({textStyle:"titleSmall",color:"primary"},k),{},{value:le}));break;case"stakingPoolShare":if(w){var ie=(0,p.d5)(s).div(w.stkIDLE.totalSupply.plus((0,p.d5)(s))).times(100);Q=(0,y.jsx)(d.Amount.Percentage,(0,n.Z)((0,n.Z)({textStyle:"titleSmall",color:"primary"},k),{},{value:ie}))}break;case"stkIDLE":case"stkIDLEAfterIncrease":Q=(0,y.jsx)(d.Amount,(0,n.Z)((0,n.Z)({textStyle:"titleSmall",color:"primary",suffix:" stkIDLE"},k),{},{value:s}));break;case"feeDiscount":var ne=(0,p.SL)(s),oe=ne.lte(0)?"orange":"brightGreen";Q=(0,y.jsx)(d.Amount.Percentage,(0,n.Z)((0,n.Z)({color:oe,textStyle:"titleSmall"},k),{},{value:ne}));break;case"feeDiscountTier":Q=(0,y.jsx)(d.Amount,(0,n.Z)((0,n.Z)({textStyle:"titleSmall",color:"primary"},k),{},{value:1}));break;case"stakingApy":if(w){var ae=(0,p.d5)(Z).times(w.maxApr);Q=(0,y.jsx)(d.Amount.Percentage,(0,n.Z)((0,n.Z)({textStyle:"titleSmall",color:"primary"},k),{},{value:ae}))}break;default:return null}return Q?(0,y.jsxs)(g.Ug,{pb:2,px:4,width:"100%",alignItems:"center",borderBottom:"1px solid",borderBottomColor:"divider",justifyContent:"space-between",children:[(0,y.jsxs)(g.Ug,{spacing:2,alignItems:"center",children:[(0,y.jsx)(v.Translation,{component:g.xv,translation:"dynamicActionFields.".concat(u),textStyle:"captionSmall",color:K}),"feeDiscount"===u&&(0,y.jsx)(c.nfF,{size:16,color:"orange"})]}),Q]}):null},Z=function(e){var t=(0,f.w)().selectors,l=t.selectAssetById,o=t.selectVaultById,a=e.assetId,d=e.action,m=(0,r.useMemo)((function(){return a&&l&&l(a)}),[a,l]),c=(0,r.useMemo)((function(){return a&&o&&o(a)}),[a,o]),v=(0,r.useMemo)((function(){return(null===c||void 0===c?void 0:c.type)&&s.A[c.type]}),[c]),x=(0,r.useMemo)((function(){return(0,p.d5)(null===m||void 0===m?void 0:m.limit).lt(u.jq)?(0,p.d5)(null===m||void 0===m?void 0:m.limit):(0,p.gA)(0)}),[m]),Z=(0,r.useMemo)((function(){return!!x.gt(0)&&(0,p.gA)(null===m||void 0===m?void 0:m.totalTvl).gte(x)}),[m,x]),k=(0,r.useMemo)((function(){var e,t;if(null===v||void 0===v||null===(e=v.dynamicActionFields)||void 0===e||!e[d])return null;var l=null===v||void 0===v?void 0:v.dynamicActionFields[d];return c&&"flags"in c&&(null===(t=c.flags)||void 0===t?void 0:t.showLimitCap)&&"deposit"===d&&x.gt(0)&&!Z&&(l=["depositLimit"].concat((0,i.Z)(l))),l}),[d,c,v,Z,x]);return k?(0,y.jsx)(g.gC,{spacing:2,width:"full",children:k.map((function(t){return(0,y.jsx)(A,(0,n.Z)((0,n.Z)({},e),{},{field:t}),"field_".concat(t))}))}):null}}}]);