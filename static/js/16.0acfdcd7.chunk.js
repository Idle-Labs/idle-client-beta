(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{1905:function(t,n,e){"use strict";e.r(n);var i=e(35),s=e(1),a=e.n(s),r=e(6),o=e(11),c=e(12),l=e(15),u=e(14),p=e(18),f=e(480),h=e.n(f),d=e(4),v=e(0),y=e.n(v),g=e(50),b=function(t){function n(){var t,e;Object(o.a)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(e=Object(l.a)(this,(t=Object(u.a)(n)).call.apply(t,[this].concat(s)))).state={earningsEnd:null,earningsStart:null},e.functionsUtil=null,e}return Object(p.a)(n,t),Object(c.a)(n,[{key:"loadUtils",value:function(){this.functionsUtil?this.functionsUtil.setProps(this.props):this.functionsUtil=new g.a(this.props)}},{key:"componentWillMount",value:function(){var t=Object(r.a)(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.loadUtils(),this.loadTotalEarnings();case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var t=Object(r.a)(a.a.mark(function t(n,e){var i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.loadUtils(),i=n.contractsInitialized!==this.props.contractsInitialized,(!n.availableStrategies&&JSON.stringify(n.availableStrategies)!==JSON.stringify(this.props.availableStrategies)||i)&&this.loadTotalEarnings();case 4:case"end":return t.stop()}},t,this)}));return function(n,e){return t.apply(this,arguments)}}()},{key:"loadTotalEarnings",value:function(){var t=Object(r.a)(a.a.mark(function t(){var n,e,s,o,c,l,u,p,f,h=this;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.props.availableStrategies&&this.props.contractsInitialized){t.next=2;break}return t.abrupt("return",!0);case 2:if(n="risk"===this.props.selectedStrategy,e=this.props.availableTokens||{},t.t0=this.props.portfolio,t.t0){t.next=9;break}return t.next=8,this.functionsUtil.getAccountPortfolio(e,this.props.account);case 8:t.t0=t.sent;case 9:return s=t.t0,o=Object.keys(s.tokensBalance).filter(function(t){return h.functionsUtil.BNify(s.tokensBalance[t].idleTokenBalance).gt(0)}),c=this.functionsUtil.BNify(0),l=this.functionsUtil.BNify(0),u=this.functionsUtil.BNify(0),t.next=16,this.functionsUtil.asyncForEach(o,function(){var t=Object(r.a)(a.a.mark(function t(r){var o,p,f,d,v,y,g,b,m;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=e[r],t.next=3,Promise.all([h.functionsUtil.getTokenAprs(o),h.functionsUtil.getAmountLent([r],h.props.account),h.functionsUtil.loadAssetField("earnings",r,o,h.props.account,!1)]);case 3:return p=t.sent,f=Object(i.a)(p,3),d=f[0],v=f[1],y=f[2],g=h.functionsUtil.BNify(d.avgApy),b=s.tokensBalance[r].tokenBalance.div(s.totalBalance),t.next=12,h.functionsUtil.convertTokenBalance(v[r],r,o,n);case 12:m=t.sent,y&&(l=l.plus(y)),g&&(c=c.plus(g.times(b))),m&&(u=u.plus(m));case 16:case"end":return t.stop()}},t,this)}));return function(n){return t.apply(this,arguments)}}());case 16:p=l,f=u.times(c.div(100)),this.setState({earningsEnd:f,earningsStart:p});case 19:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,n={lineHeight:1,color:this.props.theme.colors.copyColor,fontFamily:this.props.theme.fonts.counter,fontWeight:this.props.isMobile?600:700,fontSize:this.props.isMobile?"21px":"1.7em"};this.props.counterStyle&&Object.keys(this.props.counterStyle).length&&Object.keys(this.props.counterStyle).forEach(function(e){n[e]=t.props.counterStyle[e]});var e=this.props.decimals||8,i=this.props.maxPrecision||10,s=this.props.minPrecision||8;return this.state.earningsStart&&this.state.earningsEnd?y.a.createElement(d.b,{width:1},y.a.createElement(h.a,{delay:0,decimal:".",separator:"",useEasing:!1,decimals:e,duration:31536e3,end:parseFloat(this.state.earningsEnd),start:parseFloat(this.state.earningsStart),formattingFn:function(n){return"$ "+t.functionsUtil.abbreviateNumber(n,e,i,s)}},function(t){var e=t.countUpRef;t.start;return y.a.createElement("span",{ref:e,style:n})})):y.a.createElement(d.o,{size:"20px"})}}]),n}(v.Component);n.default=b}}]);
//# sourceMappingURL=16.0acfdcd7.chunk.js.map