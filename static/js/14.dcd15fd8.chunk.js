(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1904:function(t,e,n){"use strict";n.r(e);var a=n(1),i=n.n(a),r=n(6),o=n(11),s=n(12),c=n(15),l=n(14),u=n(18),p=n(129),f=n(779),h=n(0),m=n.n(h),d=n(50),b=n(500),k=n(4744),y=n(4745),v=function(t){function e(){var t,n;Object(o.a)(this,e);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(i)))).state={startDate:null,chartData:null,chartProps:null,chartwidth:null,chartHeight:null},n.functionsUtil=null,n}return Object(u.a)(e,t),Object(s.a)(e,[{key:"loadUtils",value:function(){this.functionsUtil?this.functionsUtil.setProps(this.props):this.functionsUtil=new d.a(this.props)}},{key:"componentDidMount",value:function(){var t=Object(r.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.loadUtils(),this.loadChartData();case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var t=Object(r.a)(i.a.mark(function t(e,n){var a,r=this;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.loadUtils(),a=e.quickDateSelection!==this.props.quickDateSelection,(JSON.stringify(e.enabledTokens)!==JSON.stringify(this.props.enabledTokens)||a)&&this.setState({chartData:null},function(){r.componentDidMount()}),e.isMobile!==this.props.isMobile&&this.loadChartData();case 6:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"loadChartData",value:function(){var t=Object(r.a)(i.a.mark(function t(){var e,n,a,o,s,c,l,u,f,h,d,b,v,g,x,w,O,j,U,S,D,M,T,E,P,C,F,N,B,I,Y,A,z=this;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=this.props.enabledTokens)&&e.length||(e=Object.keys(this.props.availableTokens)),t.next=4,this.functionsUtil.getEtherscanTxs(this.props.account,0,"latest",e);case 4:return n=t.sent,a=[],o={},s=null,t.next=10,this.functionsUtil.asyncForEach(e,function(){var t=Object(r.a)(i.a.mark(function t(e){var a,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o[e]=[],(a=Object.values(n).filter(function(t){return t.token===e}))&&a.length&&(r=z.functionsUtil.BNify(0),a.forEach(function(t,n){if(!t.hash||t.status&&"Pending"===t.status)return!1;s=s?Math.min(s,parseInt(t.timeStamp)):parseInt(t.timeStamp);var a=z.functionsUtil.BNify(t.tokenAmount);switch(t.action){case"Swap":case"Deposit":case"Receive":case"Migrate":case"CurveOut":r=r.plus(a);break;case"Send":case"Redeem":case"SwapOut":case"CurveIn":case"Withdraw":r=r.minus(a)}r.lt(0)&&(r=z.functionsUtil.BNify(0));var i=r,c=t.action,l=parseInt(t.timeStamp),u=z.functionsUtil.BNify(t.tokenPrice),p=z.functionsUtil.BNify(t.idleTokens);u.isNaN()||u.isNaN()||o[e].push({action:c,balance:i,timeStamp:l,tokenPrice:u,idleTokens:p,tokenAmount:a})}));case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}());case 10:c=null,l=this.functionsUtil.strToMoment(new Date),t.t0=this.props.quickDateSelection,t.next="week"===t.t0?15:"month"===t.t0?17:"month3"===t.t0?19:"month6"===t.t0?21:23;break;case 15:return c=l.clone().subtract(1,"week"),t.abrupt("break",25);case 17:return c=l.clone().subtract(1,"month"),t.abrupt("break",25);case 19:return c=l.clone().subtract(3,"month"),t.abrupt("break",25);case 21:return c=l.clone().subtract(6,"month"),t.abrupt("break",25);case 23:return c=null,t.abrupt("break",25);case 25:return u={},f={},h=null,d=null,b=null,v=null,g={},x={},w=parseInt((new Date).getTime()/1e3)+86400,O={},j="risk"===this.props.selectedStrategy,t.next=38,this.functionsUtil.asyncForEach(Object.keys(o),function(){var t=Object(r.a)(i.a.mark(function t(e){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.functionsUtil.getTokenApiData(z.props.availableTokens[e].address,j,s,null,!1,3600);case 2:O[e]=t.sent;case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}());case 38:for(U={},S=function(t){var e={},n={};t=Math.min(w,t),v=z.functionsUtil.BNify(0),Object.keys(o).forEach(function(a){var i=null,r=Object.values(O[a]).pop(),c=O[a].filter(function(e){return e.timestamp>=h&&e.timestamp<=t});c&&c.length&&(i=c.pop()),U[a]||(U[a]=z.functionsUtil.BNify(0));var l=z.props.availableTokens[a].decimals,u=o[a].filter(function(e){return e.timeStamp<=t&&(!h||e.timeStamp>h)});if(u.length)u.forEach(function(t){switch(t.action){case"Swap":case"Deposit":case"Migrate":case"Receive":case"CurveOut":U[a]=U[a].plus(t.idleTokens);break;default:U[a]=U[a].minus(t.idleTokens),U[a].lt(0)&&(U[a]=z.functionsUtil.BNify(0))}});else if(f&&f[a]){u=f[a];var p=Object.assign([],u).pop();if(parseFloat(p.balance)>0&&t>s&&i){var m=U[a],d=z.functionsUtil.fixTokenDecimals(i.idlePrice,l),b=m.times(d);p.balance=b,p.tokenPrice=d,u=[p]}}else u=[{balance:z.functionsUtil.BNify(0),tokenPrice:z.functionsUtil.BNify(0)}];var k=Object.assign([],u).pop(),y=U[a].times(k.tokenPrice);if(y.gt(0)){var g=null,x=z.functionsUtil.getGlobalConfig(["stats","tokens",a,"conversionRateField"]);if(!z.props.chartToken&&x){var w=i&&i[x]?i[x]:r&&r[x]?r[x]:null;w&&(g=z.functionsUtil.fixTokenDecimals(w,18)).gt(0)&&(y=y.times(g))}n[a]=y,v=v.plus(y)}e[a]=u});var a=z.functionsUtil.strToMoment(1e3*t);if(null===c||a.isSameOrAfter(c)){a.isAfter(new Date,"day")&&(a=z.functionsUtil.strToMoment(new Date));var i=a.format("YYYY/MM/DD 00:00");u[a.format("YYYY/MM/DD")]=1,v=parseFloat(parseFloat(v.toFixed(6))),g[i]=v,x[i]=n,d=null===d?v:Math.min(d,v),b=null===b?v:Math.max(b,v)}h=t,f=e,D=t},D=s;D<=w;D+=this.props.frequencySeconds)S(D);for(M=Object.keys(g).map(function(t){return{x:t,y:g[t],balances:x[t]}}),T=0,M.forEach(function(t,e){var n=Math.floor(T/M.length*100);M[e].itemPos=n,T++}),E=this.props.chartToken?this.props.chartToken.toUpperCase():"USD",a.push({id:E,color:"hsl("+this.functionsUtil.getGlobalConfig(["stats","tokens",E,"color","hsl"]).join(",")+")",data:M}),P=2,b-d<1&&(P=4),b===d&&(d=Math.max(0,b-1)),5,C=(b-d)/5,F=[],N=0;N<=5;N++)B=parseFloat(parseFloat(d+N*C).toFixed(6)),F.push(B);10,I=Object.values(u).length,Y=Math.max(1,Math.ceil(I/10)),A={xScale:{type:"time",format:"%Y/%m/%d %H:%M"},yScale:{type:"linear",stacked:!1,min:d,max:b},xFormat:"time:%b %d %Y",yFormat:function(t){return z.functionsUtil.formatMoney(t,P)},axisBottom:this.props.isMobile?null:{legend:"",tickSize:0,format:"%b %d",tickPadding:15,orient:"bottom",legendOffset:36,legendPosition:"middle",tickValues:"every "+Y+" days"},gridYValues:F,pointSize:0,useMesh:!0,axisLeft:this.props.isMobile?null:{legend:"",tickSize:0,orient:"left",tickPadding:10,tickRotation:0,legendOffset:-70,tickValues:F,legendPosition:"middle",format:function(t){return z.functionsUtil.abbreviateNumber(t,2)}},animate:!0,pointLabel:"y",areaOpacity:.1,enableArea:!0,enableSlices:"x",enableGridY:!0,curve:"monotoneX",enableGridX:!1,pointBorderWidth:1,colors:function(t){return t.color},pointLabelYOffset:-12,areaBaselineValue:d,pointColor:{from:"color",modifiers:[]},theme:{axis:{ticks:{text:{fontSize:12,fontWeight:600,fill:p.a.colors.legend,fontFamily:p.a.fonts.sansSerif}}},grid:{line:{stroke:"#dbdbdb",strokeDasharray:"8 4"}}},margin:this.props.isMobile?{top:20,right:25,bottom:25,left:20}:{top:30,right:50,bottom:45,left:60},sliceTooltip:function(t){var e=t.slice.points[0];return m.a.createElement(k.a,{point:e},m.a.createElement(y.a,{color:e.color,label:e.serieId,value:"$ ".concat(e.data.yFormatted)}),"object"===typeof e.data.balances&&Object.keys(e.data.balances).length&&Object.keys(e.data.balances).map(function(t){if(t===e.serieId)return null;var n=z.functionsUtil.getGlobalConfig(["stats","tokens",t,"color","hex"]),a=e.data.balances[t],i=z.functionsUtil.formatMoney(a,2);return parseFloat(a)>=.01?m.a.createElement(y.a,{label:t,color:n,key:"row_".concat(t),value:"$ ".concat(i)}):null}))}},this.setState({chartData:a,chartProps:A});case 58:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return m.a.createElement(b.a,Object.assign({type:f.a,showLoader:!0},this.state.chartProps,{data:this.state.chartData,parentId:this.props.parentId,height:this.props.chartHeight,parentIdHeight:this.props.parentIdHeight}))}}]),e}(h.Component);e.default=v},4744:function(t,e,n){"use strict";var a=n(1),i=n.n(a),r=n(6),o=n(11),s=n(12),c=n(15),l=n(14),u=n(18),p=n(4),f=n(0),h=n.n(f),m=n(32),d=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(s.a)(e,[{key:"componentWillMount",value:function(){var t=Object(r.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var t=Object(r.a)(i.a.mark(function t(e,n){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"render",value:function(){return h.a.createElement(m.default,{key:this.props.point.id,cardProps:{py:2,px:3,width:1,left:this.props.point.data.itemPos&&this.props.point.data.itemPos>50?"-110%":"0"}},h.a.createElement(p.h,{width:1,flexDirection:"column"},this.props.point.data.xFormatted&&h.a.createElement(p.u,{mb:2,fontSize:1,fontWeight:3,color:"cellText",textAlign:"left"},this.props.point.data.xFormatted),this.props.children))}}]),e}(f.Component);e.a=d},4745:function(t,e,n){"use strict";var a=n(1),i=n.n(a),r=n(6),o=n(11),s=n(12),c=n(15),l=n(14),u=n(18),p=n(0),f=n.n(p),h=n(4),m=function(t){function e(){return Object(o.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(s.a)(e,[{key:"componentWillMount",value:function(){var t=Object(r.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var t=Object(r.a)(i.a.mark(function t(e,n){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"render",value:function(){return f.a.createElement(h.h,{mb:2,width:1,alignItems:"center",flexDirection:"row"},f.a.createElement(h.h,{pr:2,style:{flexBasis:"0",flex:"1 1 0px"},alignItems:"center",justifyContent:"flex-start"},this.props.color&&f.a.createElement(h.b,{mr:2,width:"10px",height:"10px",borderRadius:"50%",backgroundColor:this.props.color}),f.a.createElement(h.u,{fontSize:1,fontWeight:2,textAlign:"left",color:"dark-gray",style:{textTransform:"capitalize"}},this.props.label)),f.a.createElement(h.h,{style:{flexBasis:"0",flex:"1 1 0px"},alignItems:"center",justifyContent:"flex-end"},f.a.createElement(h.u,{fontSize:1,fontWeight:3,color:"cellText",textAlign:"right",style:{whiteSpace:"nowrap"},dangerouslySetInnerHTML:{__html:this.props.value}})))}}]),e}(p.Component);e.a=m}}]);
//# sourceMappingURL=14.dcd15fd8.chunk.js.map