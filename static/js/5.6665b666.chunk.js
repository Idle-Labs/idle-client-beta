(window.webpackJsonp=window.webpackJsonp||[]).push([[5,36],{4742:function(t,e,n){"use strict";n.r(e);var a=n(11),i=n(12),o=n(15),s=n(14),r=n(18),c=n(0),l=n.n(c),u=n(4),h=n(32),p=function(t){function e(){return Object(a.a)(this,e),Object(o.a)(this,Object(s.a)(e).apply(this,arguments))}return Object(r.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){var t=Object.assign({py:1,width:"auto",px:["12px",3]},this.props.cardProps);return l.a.createElement(h.default,{cardProps:t,isInteractive:!0,isActive:this.props.isActive,handleClick:this.props.handleClick},l.a.createElement(u.h,{my:1,alignItems:"center",flexDirection:"row",justifyContent:"center"},this.props.useIconOnly?l.a.createElement(u.k,{align:"center",name:this.props.icon,size:this.props.isMobile?"1.2em":"1.4em",color:this.props.iconColor?this.props.iconColor:"redeem"}):l.a.createElement(u.h,{mr:2,p:["4px","7px"],borderRadius:"50%",alignItems:"center",justifyContent:"center",backgroundColor:this.props.iconBgColor?this.props.iconBgColor:this.props.theme.colors.transactions.actionBg.redeem},l.a.createElement(u.k,{align:"center",name:this.props.icon,size:this.props.isMobile?"1.2em":"1.4em",color:this.props.iconColor?this.props.iconColor:"redeem"})),l.a.createElement(u.u,Object.assign({fontWeight:3,fontSize:[1,3]},this.props.textProps),this.props.text)))}}]),e}(c.Component);e.default=p},4770:function(t,e,n){"use strict";n.r(e);var a=n(1),i=n.n(a),o=n(6),s=n(11),r=n(12),c=n(15),l=n(14),u=n(18),h=n(129),p=n(175),f=n(0),m=n.n(f),d=n(35),g=n(36),v=n(4828),b=n.n(v),w=n(69),x=n(50),k=n(1105),y=n(4),E=n(32),C=n(4830),O=n.n(C),U=n(4733),D=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(c.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(i)))).state={tabOpened:!1,notifications:[],mouseOverBell:!1,unreadNotifications:0,lastOpenTimestamp:null,mouseOverNotifications:!1},n.functionsUtil=null,n.governanceUtil=null,n}return Object(u.a)(e,t),Object(r.a)(e,[{key:"loadUtils",value:function(){this.governanceUtil?this.governanceUtil.setProps(this.props):this.governanceUtil=new U.a(this.props),this.functionsUtil=this.governanceUtil.functionsUtil}},{key:"componentWillMount",value:function(){var t=Object(o.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.loadUtils(),this.loadNotifications();case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var t=Object(o.a)(i.a.mark(function t(e,n){var a,o,s=this;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.loadUtils(),e.clickEvent!==this.props.clickEvent&&this.props.clickEvent&&!this.state.mouseOverNotifications&&!this.state.mouseOverBell&&this.state.tabOpened&&this.setState({tabOpened:!1}),n.tabOpened!==this.state.tabOpened&&this.state.tabOpened&&this.state.notifications.length>0&&(this.functionsUtil.sendGoogleAnalyticsEvent({eventCategory:"Notifications",eventAction:"open_tab",eventLabel:""}),this.updateLastOpenTimestamp()),a=JSON.stringify(n.notifications)!==JSON.stringify(this.state.notifications),(n.lastOpenTimestamp!==this.state.lastOpenTimestamp||a)&&(o=this.state.lastOpenTimestamp?this.state.notifications.filter(function(t){return t.timestamp>s.state.lastOpenTimestamp}).length:this.state.notifications.length,this.setState({unreadNotifications:o}));case 8:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"updateLastOpenTimestamp",value:function(){var t=Date.now(),e=this.functionsUtil.getStoredItem("notificationsParams",!0,{});e.lastOpenTimestamp=t,this.functionsUtil.setLocalStorage("notificationsParams",e,!0),this.setState({lastOpenTimestamp:t})}},{key:"loadNotifications",value:function(){var t=Object(o.a)(i.a.mark(function t(){var e,n,a,o,s,r,c,l,u,h,p,f,m,g=this;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.functionsUtil.getStoredItem("notificationsParams",!0,{}),n=e.lastOpenTimestamp||null,t.next=4,Promise.all([this.functionsUtil.getSnapshotProposals(!0),this.governanceUtil.getProposals(null,"Active"),this.functionsUtil.getBatchedDeposits(this.props.account,"executed")]);case 4:a=t.sent,o=Object(d.a)(a,3),s=o[0],r=o[1],c=o[2],l=Date.now(),u=this.functionsUtil.getGlobalConfig(["network","providers","snapshot","urls","proposals"]),h=this.functionsUtil.getGlobalConfig(["notifications"]).filter(function(t){return t.enabled&&t.start<=l&&t.end>l}),s.forEach(function(t){var e=t.msg.payload.body.replace(/^[#]*/,"");h.push({text:e,image:"/images/snapshot.png",title:"Snapshot Proposal",timestamp:1e3*t.msg.payload.start,link:u+t.authorIpfsHash,date:g.functionsUtil.strToMoment(1e3*t.msg.payload.start).utc().format("MMM DD, YYYY HH:mm UTC")})}),p=this.functionsUtil.getGlobalConfig(["governance","baseRoute"])+"/proposals/",r.forEach(function(t){h.push({text:t.title,iconProps:{color:"#00acff"},icon:"LightbulbOutline",timestamp:1e3*t.timestamp,title:"Governance Proposal",hash:p+t.id,date:g.functionsUtil.strToMoment(1e3*t.timestamp).utc().format("MMM DD, YYYY HH:mm UTC")})}),f=this.functionsUtil.getGlobalConfig(["tools","batchDeposit"]),m=this.functionsUtil.getGlobalConfig(["dashboard","baseRoute"])+"/tools/".concat(f.route,"/"),Object.keys(c).forEach(function(t){var e=c[t],n=1e3*e.lastExecution.timeStamp,a="You can claim ".concat(e.batchRedeems.toFixed(4)," ").concat(t);h.push({text:a,timestamp:n,icon:"DoneAll",title:"Batch Deposit Executed",hash:m+t,iconProps:{color:g.props.theme.colors.transactions.status.completed},date:g.functionsUtil.strToMoment(n).utc().format("MMM DD, YYYY HH:mm UTC")})}),h=h.sort(function(t,e){return t.timestamp<e.timestamp?1:-1}),this.setState({notifications:h,lastOpenTimestamp:n});case 20:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"setMouseOverBell",value:function(t){this.setState({mouseOverBell:t})}},{key:"setMouseOverNotifications",value:function(t){this.setState({mouseOverNotifications:t})}},{key:"toggleTab",value:function(){this.setState(function(t){return{tabOpened:!t.tabOpened}})}},{key:"openNotification",value:function(t){return this.functionsUtil.sendGoogleAnalyticsEvent({eventCategory:"Notifications",eventAction:"open_notification",eventLabel:t.link||t.hash}),t.link?this.functionsUtil.openWindow(t.link):!!t.hash&&(window.location.hash=t.hash)}},{key:"render",value:function(){var t=this,e=this.state.unreadNotifications>0,n=e?"#ffdc00":"cellText";return m.a.createElement(y.h,Object.assign({zIndex:999,position:"relative"},this.props.flexProps),m.a.createElement(y.b,{width:1,position:"relative",onMouseOut:function(e){return t.setMouseOverBell(!1)},onMouseOver:function(e){return t.setMouseOverBell(!0)}},m.a.createElement(y.k,{size:"2.4em",color:n,name:"Notifications",onClick:this.toggleTab.bind(this),className:[O.a.bell,e?O.a.ring:null,this.state.tabOpened||this.state.notifications.length>0?O.a.active:null]}),e&&m.a.createElement(y.b,{className:O.a.counter},this.state.notifications.length)),this.state.tabOpened&&m.a.createElement(E.default,{cardProps:{style:{right:0,maxHeight:"21em",overflow:"scroll",position:"absolute",top:this.props.isMobile?"2.8em":"3em"},minWidth:["91vw","20em"],onMouseOut:function(e){return t.setMouseOverNotifications(!1)},onMouseOver:function(e){return t.setMouseOverNotifications(!0)}}},m.a.createElement(y.h,{width:1,flexDirection:"column"},this.state.notifications.length>0?this.state.notifications.map(function(e,n){return m.a.createElement(p.a,{style:{textDecoration:"none"},key:"notification_".concat(n),onClick:function(n){return t.openNotification(e)}},m.a.createElement(y.h,{py:2,px:1,flexDirection:"row",className:O.a.notification,borderBottom:n<t.state.notifications.length-1?"1px solid ".concat(t.props.theme.colors.divider):null},m.a.createElement(y.h,{minWidth:"2em",alignItems:"center",justifyContent:"center"},e.icon?m.a.createElement(y.k,Object.assign({name:e.icon,size:"1.6em",color:"copyColor"},e.iconProps)):e.image&&m.a.createElement(y.l,{src:e.image,width:"1.6em",height:"1.6em"})),m.a.createElement(y.h,{ml:1,overflow:"hidden",flexDirection:"column"},m.a.createElement(y.u,{fontSize:1,color:"blue",lineHeight:1.3},e.title),m.a.createElement(y.u,{fontSize:1,lineHeight:1.3,color:"copyColor",style:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}},e.text),m.a.createElement(y.u,{fontSize:0,lineHeight:1.3,color:"cellText"},e.date))))}):m.a.createElement(y.u,{py:2,textAlign:"center"},"There are no notifications."))))}}]),e}(f.Component),j=n(4742),T=n(63),I=n(144),S=n(1106),M=n(4832),A=n.n(M),G=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,r=new Array(a),u=0;u<a;u++)r[u]=arguments[u];return(n=Object(c.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(r)))).state={logout:!1,balances:null},n.loadBalances=Object(o.a)(i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.props.availableStrategies&&n.props.contractsInitialized&&n.props.account&&null===n.state.balances){t.next=2;break}return t.abrupt("return",!1);case 2:e=[],Object.keys(n.props.availableStrategies.best).forEach(function(t){var a=[];a.push(t),Object.keys(n.props.availableStrategies).forEach(function(e){var i=n.props.availableStrategies[e][t];i&&a.push(i.idle.token)}),e.push(a)}),n.setState({balances:e});case 6:case"end":return t.stop()}},t,this)})),n.functionsUtil=null,n.setConnector=function(){var t=Object(o.a)(i.a.mark(function t(e){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.functionsUtil.sendGoogleAnalyticsEvent({eventCategory:"Connect",eventAction:"logout"}),"function"===typeof n.props.setConnector&&n.props.setConnector(e),t.next=4,n.props.context.setConnector(e);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),n}return Object(u.a)(e,t),Object(r.a)(e,[{key:"loadUtils",value:function(){this.functionsUtil?this.functionsUtil.setProps(this.props):this.functionsUtil=new x.a(this.props)}},{key:"componentWillMount",value:function(){this.loadUtils()}},{key:"componentDidMount",value:function(){this.loadUtils(),this.loadBalances()}},{key:"componentDidUpdate",value:function(t){this.loadUtils();var e=t.acccount!==this.props.account,n=!t.contractsInitialized&&this.props.contractsInitialized;(!t.availableStrategies&&this.props.availableStrategies||e||n)&&this.loadBalances()}},{key:"logout",value:function(){var t=Object(o.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.setState({logout:!0}),this.props.logout(),t.next=4,this.setConnector("Infura");case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"goToSection",value:function(t){this.props.goToSection(t),this.props.closeModal()}},{key:"render",value:function(){var t=this;if(this.props.account){var e=Object.keys(this.props.availableStrategies).length+1,n=this.state.balances&&this.state.balances.map(function(n,a){return m.a.createElement(y.h,{mt:2,width:1,boxShadow:0,key:"balance_"+a,alignItems:"center",flexDirection:"row"},n.map(function(n,a){return m.a.createElement(y.h,{width:1/e,flexDirection:"row",key:"balance_token_"+n,justifyContent:"flex-start"},m.a.createElement(I.a,{token:n,tokenConfig:{token:n},fieldInfo:{name:"icon",props:{mr:[1,2],ml:[1,4],width:["1.4em","2em"],height:["1.4em","2em"]}}}),m.a.createElement(I.a,Object.assign({},t.props,{token:n,tokenConfig:{token:n},fieldInfo:{name:"tokenBalance",props:{fontSize:[0,2],fontWeight:500,color:"cellText"}}})))}))});return m.a.createElement(y.p,{isOpen:this.props.isOpen},m.a.createElement(T.a,{closeFunc:this.props.closeModal},m.a.createElement(T.a.Header,{title:"Account overview"}),m.a.createElement(T.a.Body,null,m.a.createElement(y.h,{alignItems:"center",width:["auto","40em"],flexDirection:"column",justifyContent:"center"},m.a.createElement(y.h,{width:1,mb:[2,3],alignItems:"center",flexDirection:"column",maxWidth:["100%","30em"],justifyContent:"stretch"},m.a.createElement(y.f,{width:1,address:this.props.account})),m.a.createElement(y.h,{width:1,mb:[2,3],alignItems:"center",flexDirection:"column",maxWidth:["100%","30em"]},m.a.createElement(y.j.h4,{textAlign:"center"},"Balances:"),n),m.a.createElement(y.h,{width:1,mb:[2,3],alignItems:"center",flexDirection:"column",justifyContent:"center"},m.a.createElement(y.j.h4,{mb:2,textAlign:"center"},"Tools:"),m.a.createElement(y.h,{width:1,alignItems:"center",justifyContent:"center",flexDirection:["column","row"]},["addFunds","tokenSwap"].map(function(e){var n=t.functionsUtil.getGlobalConfig(["tools",e]);return m.a.createElement(j.default,Object.assign({},t.props,{key:"tool_".concat(e),cardProps:{mx:[0,2],my:[2,0],width:"auto",minWidth:["50%","auto"]},icon:n.icon,text:n.label,handleClick:function(e){return t.goToSection("tools/".concat(n.route))}}))}))))),m.a.createElement(T.a.Footer,null,(this.props.context.active||this.props.context.error&&this.props.context.connectorName)&&m.a.createElement(S.a,{buttonText:"Logout wallet",isLoading:this.state.logout,handleClick:Object(o.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.logout();case 2:case"end":return e.stop()}},e,this)})),buttonProps:{className:A.a.gradientButton,borderRadius:"2rem",mt:[4,8],minWidth:["95px","145px"],size:["auto","medium"]}}))))}return null}}]),e}(m.a.Component),W=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(c.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(i)))).state={isModalOpen:null,idleTokenBalance:null},n.idleGovToken=null,n.functionsUtil=null,n.toggleModal=function(t){n.setState(function(e){return Object(g.a)({},e,{isModalOpen:e.isModalOpen===t?null:t})})},n}return Object(u.a)(e,t),Object(r.a)(e,[{key:"loadUtils",value:function(){this.functionsUtil?this.functionsUtil.setProps(this.props):this.functionsUtil=new x.a(this.props),this.idleGovToken=this.functionsUtil.getIdleGovToken()}},{key:"componentWillMount",value:function(){var t=Object(o.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.loadUtils(),this.loadIdleTokenBalance();case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var t=Object(o.a)(i.a.mark(function t(e,n){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.loadUtils(),e.account!==this.props.account&&this.loadIdleTokenBalance();case 3:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"loadIdleTokenBalance",value:function(){var t=Object(o.a)(i.a.mark(function t(){var e,n,a,o,s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.functionsUtil.getGlobalConfig(["govTokens","IDLE","enabled"])){t.next=11;break}return e=this.functionsUtil.BNify(0),t.next=5,Promise.all([this.idleGovToken.getBalance(this.props.account),this.idleGovToken.getUnclaimedTokens(this.props.account)]);case 5:return n=t.sent,a=Object(d.a)(n,2),o=a[0],s=a[1],o&&s&&(e=this.functionsUtil.BNify(o).plus(s)),t.abrupt("return",this.setState({idleTokenBalance:e}));case 11:return t.abrupt("return",null);case 12:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e=this.functionsUtil.getStoredItem("walletProvider",!1,null),n=e?this.functionsUtil.getGlobalConfig(["connectors",e.toLowerCase()]):null,a=n&&n.icon?n.icon:e?"".concat(e.toLowerCase(),".svg"):null,i=this.functionsUtil.getGlobalConfig(["governance","baseRoute"]),o=this.functionsUtil.getGlobalConfig(["governance","enabled"]),s=this.functionsUtil.getGlobalConfig(["dashboard","baseRoute"])+"/"+Object.keys(this.props.availableStrategies)[0];return this.props.account?m.a.createElement(y.h,{width:1,flexDirection:["column","row"],alignItems:["flex-start","center"]},m.a.createElement(y.h,{mb:[2,0],flexDirection:"row",alignItems:"center",width:[1,"fit-content"],justifyContent:"space-between"},m.a.createElement(E.default,Object.assign({},this.props,{cardProps:{py:1,px:[1,2],mr:[2,0],display:"flex",width:[1,"auto"]},isActive:!0,isInteractive:!0,handleClick:function(e){return t.toggleModal("account")}}),m.a.createElement(y.h,{p:0,width:1,alignItems:"center",flexDirection:"row",justifyContent:["center","flex-start"]},n?m.a.createElement(y.l,{mr:[1,2],width:"2em",height:"2em",display:"inline-flex",src:"images/".concat(a),alt:e.toLowerCase()}):m.a.createElement(y.k,{mr:[1,2],size:"2em",color:"copyColor",name:"AccountCircle"}),m.a.createElement(k.a,{fontSize:2,fontWeight:3,color:"copyColor",hash:this.props.account}))),this.props.isMobile&&m.a.createElement(D,this.props)),m.a.createElement(y.h,{ml:[0,3],style:{flex:"1 1 auto"},width:[1,"auto"],alignItems:"center",flexDirection:"row",justifyContent:this.state.idleTokenBalance?"space-between":"flex-end"},this.state.idleTokenBalance&&m.a.createElement(y.n,{style:{textDecoration:"none"},px:2,className:b.a.balanceButton,onClick:function(e){return t.props.setGovModal(!0)}},m.a.createElement(y.h,{alignItems:"center",height:["38px","42px"],justifyContent:"center"},m.a.createElement(y.l,{mr:1,width:"1.7em",height:"1.7em",display:"inline-flex",src:"images/tokens/IDLE.png"}),m.a.createElement(y.u,{color:"white",fontSize:[1,2],fontWeight:500},this.state.idleTokenBalance.toFixed(2)," IDLE"))),m.a.createElement(y.h,{width:"auto",alignItems:"center",flexDirection:"row",justifyContent:"flex-end"},o&&this.props.isDashboard?m.a.createElement(w.default,{buttonProps:{mainColor:"redeem",style:{width:"auto",height:this.props.isMobile?"38px":"45px"},size:this.props.isMobile?"small":"medium"},handleClick:function(e){t.props.goToSection(i,!1)}},m.a.createElement(y.h,{alignItems:"center",flexDirection:"row"},m.a.createElement(y.k,{mr:[1,2],size:"1.6em",color:"white",name:"ExitToApp"}),m.a.createElement(y.u,{fontWeight:3,color:"white",fontSize:[2,3]},"Governance"))):this.props.isGovernance&&m.a.createElement(w.default,{buttonProps:{mainColor:"redeem",style:{width:"auto",height:this.props.isMobile?"38px":"45px"},size:this.props.isMobile?"small":"medium"},handleClick:function(e){t.props.goToSection(s,!1)}},m.a.createElement(y.h,{alignItems:"center",flexDirection:"row"},m.a.createElement(y.k,{mr:[1,2],size:"1.6em",color:"white",name:"ExitToApp"}),m.a.createElement(y.u,{fontWeight:3,color:"white",fontSize:[2,3]},"Dashboard"))),!this.props.isMobile&&m.a.createElement(D,Object.assign({},this.props,{flexProps:{ml:2}})))),m.a.createElement(G,Object.assign({},this.props,{isOpen:"account"===this.state.isModalOpen,closeModal:function(e){return t.toggleModal("account")}}))):m.a.createElement(y.h,{width:1,justifyContent:"flex-start"},m.a.createElement(j.default,Object.assign({icon:"Power"},this.props,{text:"Connect",handleClick:this.props.connectAndValidateAccount})))}}]),e}(f.Component),z=n(202),P=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,r=new Array(a),u=0;u<a;u++)r[u]=arguments[u];return(n=Object(c.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(r)))).state={total:null,balance:null,txStatus:null,unclaimed:null,processing:{txHash:null,loading:!1}},n.functionsUtil=null,n.idleGovToken=null,n.loadTokenInfo=Object(o.a)(i.a.mark(function t(){var e,a,o,s,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([n.idleGovToken.getBalance(n.props.account),n.idleGovToken.getUnclaimedTokens(n.props.account)]);case 2:e=t.sent,a=Object(d.a)(e,2),o=a[0],s=a[1],r=n.functionsUtil.BNify(0),o&&s&&(r=n.functionsUtil.BNify(o).plus(s)),n.setState({total:r,balance:o,unclaimed:s});case 9:case"end":return t.stop()}},t,this)})),n.claim=Object(o.a)(i.a.mark(function t(){var e,a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=function(t,e){var a={eventAction:"claim",eventCategory:"Governance",eventLabel:t.status?t.status:e};e&&(a.eventLabel=n.functionsUtil.getTransactionError(e)),(e||"error"!==a.status)&&n.functionsUtil.sendGoogleAnalyticsEvent(a);var i={processing:{txHash:null,loading:!1},txStatus:t.status?t.status:"error"};"success"===t.status&&(i.balance=n.state.unclaimed,i.unclaimed=n.BNify(0),"function"===typeof n.props.claimCallback&&n.props.claimCallback()),n.setState(i)},a=function(t){var e=t.transactionHash;n.setState(function(t){return{processing:Object(g.a)({},t.processing,{txHash:e})}})},n.idleGovToken.claimRewards(e,a),n.setState(function(t){return{processing:Object(g.a)({},t.processing,{loading:!0})}});case 4:case"end":return t.stop()}},t,this)})),n.closeModal=function(){var t=Object(o.a)(i.a.mark(function t(e){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n.props.closeModal();case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),n}return Object(u.a)(e,t),Object(r.a)(e,[{key:"loadUtils",value:function(){this.functionsUtil?this.functionsUtil.setProps(this.props):this.functionsUtil=new x.a(this.props),this.idleGovToken=this.functionsUtil.getIdleGovToken()}},{key:"componentWillMount",value:function(){this.loadUtils(),this.loadTokenInfo()}},{key:"componentDidMount",value:function(){this.loadUtils()}},{key:"componentDidUpdate",value:function(t,e){this.loadUtils()}},{key:"cancelTransaction",value:function(){var t=Object(o.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.setState({txStatus:null,processing:{txHash:null,loading:!1}});case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return m.a.createElement(y.p,{isOpen:this.props.isOpen},m.a.createElement(T.a,{bgLayer:!0,mainColor:"white",maxWidth:["auto","420px"],closeFunc:this.props.closeModal,background:"radial-gradient(76.02% 75.41% at 1.84% 0%, rgb(162, 196, 246) 0%, rgb(10, 79, 176) 100%)"},m.a.createElement(T.a.Header,{pt:3,titleProps:{color:"white"},title:"Your IDLE balance",borderBottom:"1px solid rgba(255,255,255,0.2)"}),m.a.createElement(T.a.Body,{px:3},m.a.createElement(y.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},m.a.createElement(y.l,{mt:2,width:"3em",height:"3em",src:"images/tokens/IDLE.png"}),m.a.createElement(y.u,{mt:2,fontSize:7,color:"white",fontWeight:500},this.state.total?this.state.total.toFixed(2):"-"),m.a.createElement(y.u,{mb:2,fontSize:3,color:"white",fontWeight:400,textAlign:"center"},this.state.unclaimed&&this.state.unclaimed.gt(0)?"You can now claim your IDLE tokens from the Early LPs Program!":"You don't have any IDLE to claim from the Early LPs Program"),m.a.createElement(y.h,{pb:2,mb:3,width:1,flexDirection:"column",borderBottom:"1px solid rgba(255,255,255,0.2)"},m.a.createElement(y.h,{mb:2,width:1,flexDirection:"row",justifyContent:"space-between"},m.a.createElement(y.u,{color:"white",fontWeight:500},"Balance:"),m.a.createElement(y.u,{color:"white",fontWeight:500},this.state.balance?this.state.balance.toFixed(4):"-")),m.a.createElement(y.h,{width:1,flexDirection:"row",justifyContent:"space-between"},m.a.createElement(y.u,{color:"white",fontWeight:500},"Unclaimed:"),m.a.createElement(y.u,{color:"white",fontWeight:500},this.state.unclaimed?this.state.unclaimed.toFixed(4):"-")),m.a.createElement(y.n,{href:"/#".concat(this.functionsUtil.getGlobalConfig(["governance","baseRoute"]))},m.a.createElement(y.h,{zIndex:10,position:"relative",alignItems:"center",flexDirection:"row",justifyContent:"center"},m.a.createElement(y.u,{fontSize:2,color:"white",fontWeight:400},"Go to governance"),m.a.createElement(y.k,{ml:1,size:"1em",color:"white",name:"OpenInNew"})))),m.a.createElement(y.h,{mb:3,width:1,zIndex:10,position:"relative",alignItems:"center",justifyContent:"center"},this.state.unclaimed&&this.state.unclaimed.gt(0)?this.state.processing&&this.state.processing.loading?m.a.createElement(z.a,{textColor:"white",web3:this.props.web3,cancelTextColor:"moon-gray",cancelTextHoverColor:"white",waitText:"Claim estimated in",hash:this.state.processing.txHash,endMessage:"Finalizing Claim request...",cancelTransaction:this.cancelTransaction.bind(this)}):m.a.createElement(w.default,{buttonProps:{color:"blue",width:[1,"45%"],mainColor:"white",contrastColor:"blue",disabled:!this.state.unclaimed||this.state.unclaimed.lte(0)},handleClick:this.claim.bind(this)},"Claim"):m.a.createElement(w.default,{buttonProps:{color:"blue",width:[1,"45%"],mainColor:"white",contrastColor:"blue"},handleClick:this.closeModal.bind(this)},"Close"))))))}}]),e}(m.a.Component),_=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(c.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(i)))).state={processing:{txHash:null,loading:!1},newDelegate:"",delegatee:null,vestingAmount:null,currentDelegate:null,delegateAddressValid:!1,delegateDifferentWallet:!1,vestingContractDelegated:!1},n.idleGovToken=null,n.functionsUtil=null,n.governanceUtil=null,n}return Object(u.a)(e,t),Object(r.a)(e,[{key:"loadUtils",value:function(){this.governanceUtil?this.governanceUtil.setProps(this.props):this.governanceUtil=new U.a(this.props),this.functionsUtil=this.governanceUtil.functionsUtil,this.idleGovToken=this.functionsUtil.getIdleGovToken()}},{key:"loadData",value:function(){var t=Object(o.a)(i.a.mark(function t(){var e,n,a,o,s,r,c,l,u;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.functionsUtil.getGlobalConfig(["govTokens","IDLE","enabled"])||!this.props.account){t.next=20;break}return t.next=4,Promise.all([this.governanceUtil.getDelegatesChanges(),this.governanceUtil.getCurrentDelegate(this.props.account),this.governanceUtil.getVestingContract(this.props.account)]);case 4:if(e=t.sent,n=Object(d.a)(e,3),a=n[0],o=n[1],s=n[2],r=null,c=null,l=!1,!s){t.next=19;break}return t.next=15,this.governanceUtil.getVestingAmount(this.props.account);case 15:c=t.sent,u=a.filter(function(t){return t.returnValues.delegator.toLowerCase()===s.toLowerCase()}).pop(),r=!!u&&u.returnValues.toDelegate,l=r&&"0x0000000000000000000000000000000000000000"!==r;case 19:return t.abrupt("return",this.setState({delegatee:r,vestingAmount:c,currentDelegate:o,vestingContractDelegated:l}));case 20:return t.abrupt("return",null);case 21:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"delegateVesting",value:function(){var t=Object(o.a)(i.a.mark(function t(){var e,n,a,o,s=this,r=arguments;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=r.length>0&&void 0!==r[0]&&r[0],n=this.state.delegateDifferentWallet?this.state.newDelegate:this.props.account,e&&(n="0x"+"0".repeat(40)),this.functionsUtil.checkAddress(n)){t.next=6;break}return t.abrupt("return",!1);case 6:a=function(t,a){var i={eventCategory:"Governance",eventAction:"delegateVesting"};a&&(i.eventLabel=s.functionsUtil.getTransactionError(a)),(a||"error"!==i.status)&&s.functionsUtil.sendGoogleAnalyticsEvent(i);var o={processing:{txHash:null,loading:!1}};"success"===t.status&&(o.delegatee=n,o.delegateDifferentWallet=!1,o.vestingContractDelegated=!e,s.loadData()),s.setState(o)},o=function(t){var e=t.transactionHash;s.setState(function(t){return{processing:Object(g.a)({},t.processing,{txHash:e})}})},this.governanceUtil.delegateVesting(this.props.account,n,a,o),this.setState(function(t){return{processing:Object(g.a)({},t.processing,{loading:!0})}});case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"changeDelegate",value:function(t){var e=t.target.value,n=this.functionsUtil.checkAddress(e);this.setState({newDelegate:e,delegateAddressValid:n})}},{key:"setDelegateDifferentWallet",value:function(t){this.setState({delegateDifferentWallet:t})}},{key:"cancelTransaction",value:function(){var t=Object(o.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.setState({processing:{txHash:null,loading:!1}});case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){var t=Object(o.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.loadUtils(),this.loadData();case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var t=Object(o.a)(i.a.mark(function t(e,n){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.loadUtils(),e.account!==this.props.account&&this.loadData();case 3:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return this.state.vestingAmount?m.a.createElement(y.h,{p:2,mt:3,width:1,borderRadius:1,alignItems:"center",flexDirection:"column",justifyContent:"center",backgroundColor:"#f3f6ff",boxShadow:"0px 0px 0px 1px rgba(0,54,255,0.3)"},m.a.createElement(y.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},m.a.createElement(y.u,{mb:1,fontSize:3,fontWeight:500,color:"#3f4e9a",textAlign:"center"},"You have ",this.state.vestingAmount.div(1e18).toFixed(5)," ",this.functionsUtil.getGlobalConfig(["governance","props","tokenName"])," in the Vesting Contract"),this.state.vestingContractDelegated&&this.state.delegatee&&!this.state.delegateDifferentWallet?m.a.createElement(y.u,{mb:1,fontWeight:500,color:"#3f4e9a",fontSize:"15px",textAlign:"center"},"Currently your votes are delegated to ",this.state.delegatee):m.a.createElement(y.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},m.a.createElement(y.u,{mb:1,fontWeight:500,color:"#3f4e9a",fontSize:"15px",textAlign:"center"},this.state.delegateDifferentWallet?"Follow the next steps to delegate your tokens:":"Press the button below to delegate the votes in the vesting contract to yourself:"),this.state.delegateDifferentWallet&&m.a.createElement(y.h,{mb:2,alignItems:"center",flexDirection:"column"},m.a.createElement(y.h,{width:1,alignItems:"center",flexDirection:"row"},m.a.createElement(y.k,{size:"1.5em",name:this.state.delegateAddressValid?"CheckBox":"LooksOne",color:this.state.delegateAddressValid?this.props.theme.colors.transactions.status.completed:"cellText"}),m.a.createElement(y.u,{ml:1,fontWeight:500,fontSize:"15px",color:"#3f4e9a",textAlign:"left"},"Insert delegate address")),m.a.createElement(y.h,{mt:2,width:1,alignItems:"center",flexDirection:"row"},m.a.createElement(y.k,{size:"1.5em",name:"LooksTwo",color:"cellText"}),m.a.createElement(y.u,{ml:1,fontWeight:500,fontSize:"15px",color:"#3f4e9a",textAlign:"left"},"Delegate Vesting"))))),this.state.delegateDifferentWallet&&m.a.createElement(y.m,{mb:2,min:0,type:"text",required:!0,borderRadius:2,fontWeight:500,textAlign:"center",width:["100%","30em"],boxShadow:"none !important",value:this.state.newDelegate,placeholder:"Insert delegate address",onChange:this.changeDelegate.bind(this),border:"1px solid ".concat(this.props.theme.colors.divider)}),this.state.processing&&this.state.processing.loading?m.a.createElement(y.h,{width:1,flexDirection:"column"},m.a.createElement(z.a,{web3:this.props.web3,waitText:"Delegate estimated in",hash:this.state.processing.txHash,endMessage:"Finalizing delegate request...",cancelTransaction:this.cancelTransaction.bind(this)})):this.state.vestingContractDelegated&&!this.state.delegateDifferentWallet?m.a.createElement(y.c,{size:"small",mainColor:"red",onClick:function(e){return t.delegateVesting(!0)}},"REVOKE DELEGATE"):(!this.state.vestingContractDelegated||this.state.delegateDifferentWallet)&&m.a.createElement(y.c,{size:"small",onClick:function(e){return t.delegateVesting(!1)},disabled:this.state.delegateDifferentWallet&&!this.state.delegateAddressValid},"DELEGATE VESTING"),m.a.createElement(y.e,{mt:1,required:!1,color:"#f3f6ff",label:"Delegate to different wallet",checked:this.state.delegateDifferentWallet,onChange:function(e){return t.setDelegateDifferentWallet(e.target.checked)}})):null}}]),e}(f.Component),B=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,r=new Array(a),u=0;u<a;u++)r[u]=arguments[u];return(n=Object(c.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(r)))).state={unclaimed:null,vestingAmount:null,govModalOpened:!1},n.idleGovToken=null,n.functionsUtil=null,n.governanceUtil=null,n.setConnector=function(){var t=Object(o.a)(i.a.mark(function t(e){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.functionsUtil.sendGoogleAnalyticsEvent({eventAction:"logout",eventCategory:"Connect"}),"function"===typeof n.props.setConnector&&n.props.setConnector(e),t.next=4,n.props.context.setConnector(e);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),n}return Object(u.a)(e,t),Object(r.a)(e,[{key:"loadUtils",value:function(){this.governanceUtil?this.governanceUtil.setProps(this.props):this.governanceUtil=new U.a(this.props),this.functionsUtil=this.governanceUtil.functionsUtil,this.idleGovToken=this.functionsUtil.getIdleGovToken()}},{key:"componentWillMount",value:function(){var t=Object(o.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.loadUtils(),this.loadData();case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var t=Object(o.a)(i.a.mark(function t(e,n){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.loadUtils();case 1:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"loadData",value:function(){var t=Object(o.a)(i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.functionsUtil.getGlobalConfig(["govTokens","IDLE","enabled"])||!this.props.account){t.next=6;break}return t.next=4,this.idleGovToken.getUnclaimedTokens(this.props.account);case 4:return e=t.sent,t.abrupt("return",this.setState({unclaimed:e}));case 6:return t.abrupt("return",null);case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"exit",value:function(){var t=Object(o.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.props.goToSection("/",!1);case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"setGovModal",value:function(t){this.setState({govModalOpened:t})}},{key:"render",value:function(){var t=this;return m.a.createElement(y.b,{mb:3},m.a.createElement(y.h,{pb:2,width:1,flexDirection:"row",justifyContent:"space-between",alignItems:["flex-end","center"],borderBottom:"1px solid ".concat(h.a.colors.divider)},m.a.createElement(W,Object.assign({},this.props,{setGovModal:this.setGovModal.bind(this)}))),this.state.unclaimed&&this.state.unclaimed.gt(0)?m.a.createElement(E.default,{cardProps:{p:2,mt:3,width:1},isActive:!0,isInteractive:!1},m.a.createElement(y.h,{alignItems:"center",justifyContent:"center",flexDirection:["column","row"]},m.a.createElement(y.u,{fontWeight:500,color:"#3f4e9a",fontSize:"15px",textAlign:"center"},"IDLE Governance Token is now available,",m.a.createElement(p.a,{ml:1,fontWeight:500,color:"primary",fontSize:"15px",hoverColor:"primary",href:"https://idlefinance.medium.com/idle-governance-is-live-9b55e8f407d7"},"discover more"),"! You have ",this.state.unclaimed.toFixed(4)," IDLE tokens to claim."),m.a.createElement(y.c,{ml:[0,2],mt:[2,0],size:"small",onClick:function(e){return t.setGovModal(!0)}},"CLAIM NOW"))):this.props.isDashboard&&m.a.createElement(E.default,{cardProps:{p:2,mt:3,width:1},isActive:!0,isInteractive:!1},m.a.createElement(y.h,{alignItems:"center",justifyContent:"center",flexDirection:["column","row"]},m.a.createElement(y.k,{mr:1,size:"1.2em",color:"#3f4e9a",name:"LightbulbOutline"}),m.a.createElement(y.u,{fontWeight:500,color:"#3f4e9a",fontSize:"15px",textAlign:"center"},"Do you have any idea to improve the Idle Protocol? Let's discuss it in our"),m.a.createElement(p.a,{ml:1,fontWeight:500,color:"primary",fontSize:"15px",hoverColor:"primary",href:this.functionsUtil.getGlobalConfig(["forumURL"])},m.a.createElement(y.h,{alignItems:"center",flexDirection:"row",justifyContent:"center"},"Governance Forum",m.a.createElement(y.k,{ml:1,size:"0.9em",color:"primary",name:"OpenInNew"}),".")))),this.props.isGovernance&&m.a.createElement(_,this.props),m.a.createElement(P,Object.assign({},this.props,{isOpen:this.state.govModalOpened,claimCallback:this.loadData.bind(this),closeModal:function(e){return t.setGovModal(!1)}})))}}]),e}(f.Component);e.default=B},4828:function(t,e,n){t.exports={balanceButton:"MenuAccount_balanceButton__3t7wZ"}},4830:function(t,e,n){t.exports={bell:"Notifications_bell__5m9tk",active:"Notifications_active__2Mwzv",ring:"Notifications_ring__1ir3w",counter:"Notifications_counter__3EbuS",list:"Notifications_list__2pkAk",notification:"Notifications_notification__TMlFX"}},4832:function(t,e,n){t.exports={newLink:"CryptoInput_newLink__35W_s",newPill:"CryptoInput_newPill__2Q8cA",mainInput:"CryptoInput_mainInput__1zffg",button:"CryptoInput_button__1N9EQ",gradientButton:"CryptoInput_gradientButton__2kh5r",newPillContainerAnim:"CryptoInput_newPillContainerAnim__RvOCw"}}}]);
//# sourceMappingURL=5.6665b666.chunk.js.map