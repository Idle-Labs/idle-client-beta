(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{4751:function(e,t,n){"use strict";var o=n(1),a=n.n(o),i=n(6),r=n(11),l=n(12),s=n(15),c=n(14),u=n(18),p=n(175),h=n(0),d=n.n(h),m=n(182),f=n(50),b=n(4),g=function(e){function t(){var e,n;Object(r.a)(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(a)))).state={buyModalOpened:!1},n.functionsUtil=null,n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"loadUtils",value:function(){this.functionsUtil?this.functionsUtil.setProps(this.props):this.functionsUtil=new f.a(this.props)}},{key:"setBuyModalOpened",value:function(e){this.setState({buyModalOpened:e})}},{key:"componentWillMount",value:function(){var e=Object(i.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(i.a)(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadUtils();case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(!this.props.menu.length)return null;var t=this.props.menu.filter(function(t){var n=void 0===t.mobile||t.mobile;return!e.props.isMobile||n});return t.length?d.a.createElement(b.h,{p:0,flexDirection:["row","column"]},!this.props.isMobile&&d.a.createElement(b.h,{p:3,mb:3,flexDirection:"row",alignItems:"center",justifyContent:"center"},d.a.createElement(m.b,{to:"/"},d.a.createElement(b.l,{position:"relative",height:["35px","38px"],src:"images/logo-gradient.svg"}))),t.map(function(n,o){var a=n.isExternalLink?p.a:m.b;return d.a.createElement(b.b,{my:[0,3],key:"menu-".concat(o),width:[1/t.length,"auto"]},d.a.createElement(a,{to:n.route,href:n.route,style:{textDecoration:"none"}},d.a.createElement(b.h,{p:[2,3],borderRadius:[0,2],flexDirection:"row",alignItems:"center",backgroundColor:n.selected?"#f3f6ff":"transparent",boxShadow:n.selected?"0px 0px 0px 1px rgba(0,54,255,0.3)":null},d.a.createElement(b.h,{width:1,alignItems:"center",flexDirection:["column","row"],justifyContent:["center","flex-start"]},n.image&&d.a.createElement(b.l,{mr:[0,3],ml:[0,2],mb:[1,0],align:"center",src:n.selected?n.image:n.imageInactive?n.imageInactive:n.image,height:["1.2em","1.6em"]}),n.icon&&d.a.createElement(b.k,{mr:[0,3],ml:[0,2],mb:[1,0],align:"center",name:n.icon,size:e.props.isMobile?"1.4em":"1.6em",color:n.selected?n.bgColor:"copyColor"}),d.a.createElement(b.u,{fontWeight:3,color:"copyColor",textAlign:"center",fontSize:["11px",2],style:{whiteSpace:"nowrap"}},n.label)))))})):null}}]),t}(h.Component);t.a=g},4947:function(e,t,n){"use strict";n.r(t);var o=n(35),a=n(1),i=n.n(a),r=n(6),l=n(11),s=n(12),c=n(15),u=n(14),p=n(18),h=n(163),d=n(4),m=n(0),f=n.n(m),b=n(4733),g=n(4751),v=f.a.lazy(function(){return Promise.all([n.e(1),n.e(24)]).then(n.bind(null,4834))}),w=f.a.lazy(function(){return n.e(25).then(n.bind(null,4837))}),y=f.a.lazy(function(){return Promise.all([n.e(1),n.e(26)]).then(n.bind(null,4862))}),x=f.a.lazy(function(){return Promise.all([n.e(1),n.e(27)]).then(n.bind(null,4865))}),k=f.a.lazy(function(){return Promise.resolve().then(n.bind(null,69))}),C=f.a.lazy(function(){return Promise.resolve().then(n.bind(null,32))}),U=f.a.lazy(function(){return n.e(3).then(n.bind(null,4765))}),E=f.a.lazy(function(){return n.e(5).then(n.bind(null,4770))}),O=function(e){function t(){var e,n;Object(l.a)(this,t);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={menu:[],votes:null,balance:null,baseRoute:null,modalTitle:null,activeModal:null,blockNumber:null,currentRoute:null,modalContent:null,pageComponent:null,timelockDelay:null,currentSection:null,selectedSection:null,currentDelegate:null,proposalThreshold:null,selectedSubsection:null,proposalMaxOperations:null},n.timeoutId=null,n.functionsUtil=null,n.governanceUtil=null,n.resetModal=function(){n.setState({activeModal:null})},n.openTooltipModal=function(e,t){n.functionsUtil.sendGoogleAnalyticsEvent({eventCategory:"UI",eventAction:e,eventLabel:"TooltipModal"}),n.setState({modalTitle:e,modalContent:t},function(){n.setActiveModal("tooltip")})},n.setActiveModal=function(e){n.setState({activeModal:e})},n.logout=Object(r.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.props.setConnector("Infura","Infura"),e.next=3,n.props.initWeb3("Infura");case 3:case"end":return e.stop()}},e,this)})),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"loadUtils",value:function(){this.governanceUtil?this.governanceUtil.setProps(this.props):this.governanceUtil=new b.a(this.props),window.governanceUtil=this.governanceUtil,window.functionsUtil=this.functionsUtil=this.governanceUtil.functionsUtil}},{key:"loadMenu",value:function(){var e=Object(r.a)(i.a.mark(function e(){var t,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=this.functionsUtil.getGlobalConfig(["governance","baseRoute"]),t.push({submenu:[],selected:!0,route:n,icon:"Dashboard",label:"Overview",color:"dark-gray",component:v,bgColor:this.props.theme.colors.primary}),t.push({submenu:[],selected:!1,label:"Proposals",bgColor:"#00acff",color:"dark-gray",icon:"LightbulbOutline",component:y,route:"".concat(n,"/proposals")}),t.push({submenu:[],selected:!1,bgColor:"#ff0000",color:"dark-gray",label:"Leaderboard",component:x,icon:"FormatListNumbered",route:"".concat(n,"/leaderboard")}),t.push({submenu:[],selected:!1,label:"Delegate",color:"dark-gray",bgColor:"#ff0000",component:w,icon:"CompareArrows",route:"".concat(n,"/delegate")}),t.push({submenu:[],icon:"Forum",mobile:!1,label:"Forum",selected:!1,component:null,color:"dark-gray",bgColor:"#ff0000",isExternalLink:!0,route:this.functionsUtil.getGlobalConfig(["forumURL"])}),e.next=9,this.setState({menu:t,baseRoute:n});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"loadParams",value:function(){var e=Object(r.a)(i.a.mark(function e(){var t,n,o,a,r,l,s,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.match.params,n=this.state.baseRoute,o=window.location.hash.substr(1),a=null,r=null,l=this.state.menu,s=null,c=null,l.forEach(function(e){e.selected=!1;var i=n+"/"+t.section;o.toLowerCase()===e.route.toLowerCase()||!e.submenu.length&&e.route.toLowerCase()===i.toLowerCase()?(e.selected=!0,null===a&&(a=e.component)):e.submenu.length&&e.submenu.forEach(function(t){t.selected=!1,(e.route+"/"+t.route).toLowerCase()===o.toLowerCase()&&(e.selected=!0,t.selected=!0,null===a&&(a=t.component?t.component:e.component)),t.selected&&(c=t)}),e.selected&&(s=e)}),a){e.next=11;break}return e.abrupt("return",this.goToSection("/",!1));case 11:return e.next=13,this.setState({menu:l,params:t,baseRoute:n,currentRoute:o,pageComponent:a,currentSection:r,selectedSection:s,selectedSubsection:c});case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.timeoutId&&window.clearTimeout(this.timeoutId)}},{key:"componentWillMount",value:function(){var e=Object(r.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadUtils(),e.next=3,this.loadMenu();case 3:this.loadParams();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(r.a)(i.a.mark(function e(){var t=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.timeoutId=window.setTimeout(function(){t.props.accountInizialized&&t.props.contractsInitialized||t.setState({showResetButton:!0})},2e4),this.loadUtils(),e.next=4,this.loadMenu();case 4:this.loadParams(),this.loadData();case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(r.a)(i.a.mark(function e(t,n){var o,a,r,l,s,c=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.loadUtils(),o=t.match.params,a=this.props.match.params,JSON.stringify(o)===JSON.stringify(a)){e.next=6;break}return e.next=6,this.setState({pageComponent:null},function(){c.loadParams()});case 6:r=t.account!==this.props.account,l=this.props.accountInizialized&&t.accountInizialized!==this.props.accountInizialized,s=this.props.contractsInitialized&&t.contractsInitialized!==this.props.contractsInitialized,(r||l||s)&&this.loadData();case 10:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"goToSection",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&(e=e.replace(this.state.baseRoute+"/",""));var n=(t?this.state.baseRoute+(e.length>0?"/"+e:""):e).replace(/[\/]+$/,"");window.location.hash=n,this.functionsUtil.sendGoogleAnalyticsEvent({eventCategory:"UI",eventLabel:n,eventAction:"goToSection"}),window.scrollTo(0,0)}},{key:"loadData",value:function(){var e=Object(r.a)(i.a.mark(function e(){var t,n,a,r,l,s,c,u,p,h;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.account){e.next=14;break}return e.next=3,Promise.all([this.functionsUtil.getBlockNumber(),this.governanceUtil.getTimelockDelay(),this.governanceUtil.getProposalParams(),this.governanceUtil.getCurrentVotes(this.props.account),this.governanceUtil.getTokensBalance(this.props.account),this.governanceUtil.getCurrentDelegate(this.props.account)]);case 3:t=e.sent,n=Object(o.a)(t,6),a=n[0],r=n[1],l=n[2],s=l.proposalThreshold,c=l.proposalMaxOperations,u=n[3],p=n[4],h=n[5],this.setState({votes:u,balance:p,blockNumber:a,timelockDelay:r,currentDelegate:h,proposalThreshold:s,proposalMaxOperations:c});case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=f.a.createElement(d.h,{width:1,minHeight:"100vh",alignItems:"center",flexDirection:"column",justifyContent:"center"},f.a.createElement(h.a,{textProps:{textSize:4,fontWeight:2},loaderProps:{mb:3,size:"40px"},flexProps:{my:3,flexDirection:"column"},text:"Loading Governance..."})),t=this.state.pageComponent?this.state.pageComponent:null;return f.a.createElement(d.h,{width:"100%",position:"fixed",flexDirection:"row",height:[window.innerHeight-61+"px","100vh"],backgroundColor:["dashboardBg","white"]},f.a.createElement(d.h,{bottom:0,zIndex:1,width:[1,1/6],flexDirection:"column",position:["fixed","relative"]},f.a.createElement(d.d,{p:[0,3],width:["100vw","auto"],height:["auto","100vh"]},f.a.createElement(g.a,Object.assign({},this.props,{menu:this.state.menu})))),f.a.createElement(d.h,{py:3,px:[3,5],mb:0,width:[1,5/6],style:{overflowY:"scroll",overflowX:"hidden"},flexDirection:"columns",backgroundColor:"dashboardBg"},f.a.createElement(m.Suspense,{fallback:e},this.props.accountInizialized&&this.props.contractsInitialized&&t?f.a.createElement(d.h,{width:1,flexDirection:"column"},f.a.createElement(E,Object.assign({goToSection:this.goToSection.bind(this)},this.props)),t&&f.a.createElement(t,Object.assign({},this.props,{votes:this.state.votes,balance:this.state.balance,urlParams:this.state.params,blockNumber:this.state.blockNumber,loadUserData:this.loadData.bind(this),timelockDelay:this.state.timelockDelay,goToSection:this.goToSection.bind(this),currentDelegate:this.state.currentDelegate,selectedSection:this.state.selectedSection,proposalThreshold:this.state.proposalThreshold,selectedSubsection:this.state.selectedSubsection,openTooltipModal:this.openTooltipModal.bind(this),proposalMaxOperations:this.state.proposalMaxOperations}))):f.a.createElement(d.h,{width:1,minHeight:"50vh",alignItems:"center",flexDirection:"column",justifyContent:"center"},this.state.showResetButton?f.a.createElement(C,{cardProps:{p:3,mt:3,width:[1,.35]}},f.a.createElement(d.h,{alignItems:"center",flexDirection:"column"},f.a.createElement(d.k,{size:"2.3em",name:"Warning",color:"cellText"}),f.a.createElement(d.u,{mt:2,fontSize:2,color:"cellText",textAlign:"center"},"Idle can't connect to your wallet!",f.a.createElement("br",null),"Make sure that your wallet is unlocked and try again."),f.a.createElement(k,{buttonProps:{mt:3,width:[1,.5]},handleClick:this.logout.bind(this)},"Logout"))):f.a.createElement(h.a,{textProps:{textSize:4,fontWeight:2},loaderProps:{mb:3,size:"40px"},flexProps:{my:3,flexDirection:"column"},text:this.props.accountInizialized?this.props.contractsInitialized?"Loading assets...":"Loading contracts...":"Loading account..."})))),f.a.createElement(m.Suspense,{fallback:null},f.a.createElement(U,{closeModal:this.resetModal,title:this.state.modalTitle,content:this.state.modalContent,isOpen:"tooltip"===this.state.activeModal})))}}]),t}(m.Component);t.default=O}}]);
//# sourceMappingURL=11.2c95dbf4.chunk.js.map