(window.webpackJsonp=window.webpackJsonp||[]).push([[26,6,30,36],{172:function(t,e,n){"use strict";n.r(e);var a=n(11),i=n(12),s=n(15),o=n(14),r=n(18),l=n(4),c=n(0),u=n.n(c),h=n(69),p=function(t){function e(){return Object(a.a)(this,e),Object(s.a)(this,Object(o.a)(e).apply(this,arguments))}return Object(r.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){var t=Object.assign({p:0,boxShadow:1,width:"40px",height:"40px",mainColor:"white",borderRadius:"50%",disabled:this.props.disabled},this.props.buttonProps);return t.minWidth=t.width,u.a.createElement(h.default,{buttonProps:t,handleClick:this.props.handleClick},u.a.createElement(l.k,{color:"copyColor",name:this.props.iconName,size:this.props.iconSize?this.props.iconSize:"1.3em"}))}}]),e}(c.Component);e.default=p},236:function(t,e,n){"use strict";n.r(e);var a=n(11),i=n(12),s=n(15),o=n(14),r=n(18),l=n(129),c=n(0),u=n.n(c),h=n(4),p=n(172),d=function(t){function e(){return Object(a.a)(this,e),Object(s.a)(this,Object(o.a)(e).apply(this,arguments))}return Object(r.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){var t=this,e=!!this.props.showPathMobile;return u.a.createElement(h.h,{width:1,id:"breadcrumb",alignItems:"center"},this.props.handleClick&&u.a.createElement(p.default,{buttonProps:{width:"35px",height:"35px"},iconSize:"1.2em",iconName:"ArrowBack",handleClick:this.props.handleClick}),this.props.text&&this.props.text.length>0&&u.a.createElement(h.n,{ml:[2,3],fontSize:[1,2],fontWeight:3,color:"cellText",hoverColor:"copyColor",onClick:this.props.handleClick},this.props.text),(!this.props.isMobile||e)&&this.props.path&&this.props.path.length>0&&this.props.path.map(function(e,n){var a=t.props.pathLink&&t.props.pathLink[n]||null,i=a?h.n:h.u;return u.a.createElement(i,{pl:[1,3],ml:[1,3],fontWeight:3,fontSize:[1,2],hoverColor:"copyColor",style:t.props.isMobile?null:{maxWidth:"30%",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",borderLeft:"1px solid ".concat(l.a.colors.divider)},key:"breadcrumb_path_".concat(n),color:a?"cellText":"statValue",onClick:a?function(e){return t.props.goToSection(a)}:null},e)}))}}]),e}(c.Component);e.default=d},4742:function(t,e,n){"use strict";n.r(e);var a=n(11),i=n(12),s=n(15),o=n(14),r=n(18),l=n(0),c=n.n(l),u=n(4),h=n(32),p=function(t){function e(){return Object(a.a)(this,e),Object(s.a)(this,Object(o.a)(e).apply(this,arguments))}return Object(r.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){var t=Object.assign({py:1,width:"auto",px:["12px",3]},this.props.cardProps);return c.a.createElement(h.default,{cardProps:t,isInteractive:!0,isActive:this.props.isActive,handleClick:this.props.handleClick},c.a.createElement(u.h,{my:1,alignItems:"center",flexDirection:"row",justifyContent:"center"},this.props.useIconOnly?c.a.createElement(u.k,{align:"center",name:this.props.icon,size:this.props.isMobile?"1.2em":"1.4em",color:this.props.iconColor?this.props.iconColor:"redeem"}):c.a.createElement(u.h,{mr:2,p:["4px","7px"],borderRadius:"50%",alignItems:"center",justifyContent:"center",backgroundColor:this.props.iconBgColor?this.props.iconBgColor:this.props.theme.colors.transactions.actionBg.redeem},c.a.createElement(u.k,{align:"center",name:this.props.icon,size:this.props.isMobile?"1.2em":"1.4em",color:this.props.iconColor?this.props.iconColor:"redeem"})),c.a.createElement(u.u,Object.assign({fontWeight:3,fontSize:[1,3]},this.props.textProps),this.props.text)))}}]),e}(l.Component);e.default=p},4746:function(t,e,n){"use strict";var a=n(1),i=n.n(a),s=n(6),o=n(11),r=n(12),l=n(15),c=n(14),u=n(18),h=n(0),p=n.n(h),d=n(4),f=n(69),m=n(50),g=n(32),v=function(t){function e(){var t,n;Object(o.a)(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(n=Object(l.a)(this,(t=Object(c.a)(e)).call.apply(t,[this].concat(i)))).functionsUtil=null,n}return Object(u.a)(e,t),Object(r.a)(e,[{key:"loadUtils",value:function(){this.functionsUtil?this.functionsUtil.setProps(this.props):this.functionsUtil=new m.a(this.props)}},{key:"componentWillMount",value:function(){var t=Object(s.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.loadUtils();case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var t=Object(s.a)(i.a.mark(function t(e,n){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.loadUtils();case 1:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"render",value:function(){return p.a.createElement(g.default,{cardProps:{p:3,mt:3}},p.a.createElement(d.h,{alignItems:"center",flexDirection:"column"},p.a.createElement(d.k,{size:"1.8em",name:"Input",color:"cellText"}),p.a.createElement(d.u,{mt:2,fontSize:2,color:"cellText",textAlign:"center"},"Please connect with your wallet interact with Idle."),p.a.createElement(f.default,{buttonProps:{mt:2,width:[1,.5]},handleClick:this.props.connectAndValidateAccount},"Connect")))}}]),e}(h.Component);e.a=v},4747:function(t,e,n){"use strict";var a=n(36),i=n(1),s=n.n(i),o=n(6),r=n(11),l=n(12),c=n(15),u=n(14),h=n(18),p=n(0),d=n.n(p),f=n(4746),m=n(163),g=n(69),v=n(4733),b=n(32),w=n(202),y=n(4),x=function(t){function e(){var t,n;Object(r.a)(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(n=Object(c.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(i)))).state={newDelegate:"",processing:{txHash:null,loading:!1}},n.functionsUtil=null,n.governanceUtil=null,n.checkNewDelegate=function(){return n.functionsUtil.checkAddress(n.state.newDelegate)&&n.state.newDelegate.toLowerCase()!==n.props.currentDelegate.toLowerCase()},n.changeDelegate=function(t){var e=t.target.value;n.setState({newDelegate:e})},n}return Object(h.a)(e,t),Object(l.a)(e,[{key:"loadUtils",value:function(){this.governanceUtil?this.governanceUtil.setProps(this.props):this.governanceUtil=new v.a(this.props),this.functionsUtil=this.governanceUtil.functionsUtil}},{key:"componentWillMount",value:function(){var t=Object(o.a)(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.loadUtils();case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var t=Object(o.a)(s.a.mark(function t(e,n){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.loadUtils();case 1:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"cancelTransaction",value:function(){var t=Object(o.a)(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.setState({processing:{txHash:null,loading:!1}});case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"setDelegate",value:function(t){var e=this;if(this.functionsUtil.checkAddress(t)){this.governanceUtil.setDelegate(t,function(n,a){var i={eventCategory:"Delegate",eventAction:t,eventLabel:n.status};a&&(i.eventLabel=e.functionsUtil.getTransactionError(a)),(a||"error"!==i.status)&&e.functionsUtil.sendGoogleAnalyticsEvent(i),"function"===typeof e.props.loadUserData&&"success"===n.status&&e.props.loadUserData(),e.setState({processing:{txHash:null,loading:!1}})},function(t){var n=t.transactionHash;e.setState(function(t){return{processing:Object(a.a)({},t.processing,{txHash:n})}})}),this.setState(function(t){return{processing:Object(a.a)({},t.processing,{loading:!0})}})}return null}},{key:"render",value:function(){var t=this,e=0===parseInt(this.props.currentDelegate);return d.a.createElement(y.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},this.props.account?this.props.currentDelegate?d.a.createElement(b.default,{cardProps:{mb:2,py:[2,3],px:[3,4],width:[1,.5],position:"relative"},isInteractive:!1},this.props.canClose&&d.a.createElement(y.b,{top:"0",zIndex:1,right:"0",position:"absolute"},d.a.createElement(y.c.Text,{icononly:!0,icon:"Close",size:"2.5em",mainColor:"statValue",onClick:this.props.closeFunc})),d.a.createElement(y.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},d.a.createElement(y.u,{mb:1,fontWeight:3,color:"statValue",textAlign:"center"},"Current Delegate:"),d.a.createElement(y.h,{mb:3,width:1,alignItems:"center",justifyContent:e?"center":"stretch"},e?d.a.createElement(y.u,{fontWeight:3,fontSize:[1,2],color:"dark-gray",textAlign:"center"},"Undelegated"):d.a.createElement(y.f,{width:1,address:this.props.currentDelegate})),this.state.processing&&this.state.processing.loading?d.a.createElement(y.h,{width:1,flexDirection:"column"},d.a.createElement(w.a,{web3:this.props.web3,waitText:"Delegate estimated in",hash:this.state.processing.txHash,endMessage:"Finalizing delegate request...",cancelTransaction:this.cancelTransaction.bind(this)})):d.a.createElement(y.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},d.a.createElement(y.u,{mb:1,fontWeight:3,color:"statValue",textAlign:"center"},"Set New Delegate:"),d.a.createElement(y.m,{min:0,type:"text",width:"100%",required:!0,height:"3.4em",borderRadius:2,fontWeight:500,textAlign:"center",boxShadow:"none !important",value:this.state.newDelegate,placeholder:"Insert delegate address",onChange:this.changeDelegate.bind(this),border:"1px solid ".concat(this.props.theme.colors.divider)}),d.a.createElement(y.h,{mt:3,width:1,alignItems:"center",flexDirection:"row",justifyContent:"center"},d.a.createElement(g.default,{buttonProps:{mx:1,fontSize:[1,2],width:["auto","10em"],disabled:!this.checkNewDelegate()},handleClick:function(e){return t.setDelegate(t.state.newDelegate)}},"Delegate"),d.a.createElement(g.default,{buttonProps:{mx:1,fontSize:[1,2],width:["auto","10em"],mainColor:this.props.theme.colors.redeem,disabled:this.props.currentDelegate.toLowerCase()===this.props.account.toLowerCase()},handleClick:function(e){return t.setDelegate(t.props.account)}},"Self-delegate"))))):d.a.createElement(m.a,{flexProps:{minHeight:"50vh",flexDirection:"row"},loaderProps:{size:"30px"},textProps:{ml:2},text:"Loading Delegate..."}):d.a.createElement(y.h,{width:[1,.36],alignItems:"stretch",flexDirection:"column",justifyContent:"center"},d.a.createElement(f.a,this.props)))}}]),e}(p.Component);e.a=x},4838:function(t,e,n){t.exports={input:"NewProposal_input__KvbCb"}},4862:function(t,e,n){"use strict";n.r(e);var a=n(1),i=n.n(a),s=n(6),o=n(11),r=n(12),l=n(15),c=n(14),u=n(18),h=n(282),p=n(4),d=n(0),f=n.n(d),m=n(236),g=n(36),v=n(99),b=n(4838),w=n.n(b),y=n(4747),x=n(69),E=n(4733),C=n(32),k=n(202),j=function(t){function e(){var t,n;Object(o.a)(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(n=Object(l.a)(this,(t=Object(c.a)(e)).call.apply(t,[this].concat(i)))).state={title:"",actions:[],txError:!1,actionValue:0,customABI:null,description:"",processing:{txHash:null,loading:!1},validated:!1,newAction:!1,editAction:null,actionInputs:null,actionValid:!1,customAddress:null,contractOptions:[],proposalCreated:!1,functionsOptions:null,selectedContract:null,selectedFunction:null,selectedSignature:null,availableFunctions:null,availableContracts:null},n.functionsUtil=null,n.governanceUtil=null,n}return Object(u.a)(e,t),Object(r.a)(e,[{key:"loadUtils",value:function(){this.governanceUtil?this.governanceUtil.setProps(this.props):this.governanceUtil=new E.a(this.props),this.functionsUtil=this.governanceUtil.functionsUtil}},{key:"componentWillMount",value:function(){var t=Object(s.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.loadUtils(),this.loadData();case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var t=Object(s.a)(i.a.mark(function t(e,n){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.loadUtils(),this.validateForm(),this.checkInputs(),n.customABI!==this.state.customABI&&"custom"===this.state.selectedContract&&this.loadFunctionsOptions();case 5:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"loadData",value:function(){var t=this.functionsUtil.getGlobalConfig(["governance","props","availableContracts"]),e=[{label:"Select a Contract",value:null}];Object.keys(t).forEach(function(t){e.push({label:t,value:t})}),e.push({label:"Custom",value:"custom"}),this.setState({contractOptions:e,availableContracts:t})}},{key:"handleInput",value:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n=e.target.value;this.setState(Object(v.a)({},t,n))}},{key:"validateForm",value:function(){var t=this.state.title.length>0&&this.state.description.length>0&&Object.values(this.state.actions).length>0;t!==this.state.validated&&this.setState({validated:t})}},{key:"getContractABI",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t=t||this.state.selectedContract;var e=null;try{e="custom"===t?JSON.parse(this.state.customABI):this.state.availableContracts[t]}catch(n){}return e}},{key:"loadFunctionsOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=null,n=null,a=this.getContractABI(t);a&&(e=(n=a.filter(function(t){return!t.constant&&"function"===t.type&&t.inputs.length>0&&["nonpayable","payable"].includes(t.stateMutability)})).map(function(t,e){return{label:t.name,value:e}})).unshift({label:"Select a Function",value:null}),this.setState({actionInputs:null,functionsOptions:e,selectedFunction:null,selectedSignature:null,availableFunctions:n})}},{key:"changeContract",value:function(t){var e=t.target.value;if(e!==this.state.selectedContract){var n={selectedContract:e,selectedFunction:null,selectedSignature:null};if(null!==e)this.getContractABI(e)?this.loadFunctionsOptions(e):n.functionsOptions=null;this.setState(n)}}},{key:"changeFunction",value:function(t){var e=null,n=t.target.value,a=this.state.availableFunctions.find(function(t,e){return e===parseInt(n)});a?e=new Array(a.inputs.length):a=null,this.setState({actionValue:0,actionInputs:e,selectedFunction:a,selectedSignature:n})}},{key:"validateField",value:function(t,e){if(null===t)return!1;var n=!0;if("json"===e)n=this.functionsUtil.isValidJSON(t);else{var a=this.getPatternByFieldType(e);a&&(n=null!==t.toString().match(a))}return n}},{key:"getPatternByFieldType",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=null;switch(t){case"address":n="^0x[a-fA-F0-9]{40}$";break;case"address[]":n="^((0x[a-fA-F0-9]{40})[,]?)+$";break;case"string":n="[\\w]+";break;case"bool":n="(0|1)";break;case"uint256":case"uint8":n="[\\d]+";break;default:n=null}return!e&&n&&(n=new RegExp(n)),n}},{key:"checkInputs",value:function(){var t=this;if(!this.state.actionInputs||!this.state.selectedFunction)return!1;var e=this.state.selectedFunction.inputs,n=Object.values(this.state.actionInputs).length===e.length;n&&Object.values(this.state.actionInputs).forEach(function(a,i){var s=e[i],o=t.getPatternByFieldType(s.type),r=!o||null!==a.match(o);n=n&&r}),n&&"custom"===this.state.selectedContract&&(n=n&&this.validateField(this.state.customABI,"json")&&this.validateField(this.state.customAddress,"address")),n!==this.state.actionValid&&this.setState({actionValid:n})}},{key:"valueChange",value:function(t,e){var n=t.target.value;this.setState({actionValue:n})}},{key:"inputChange",value:function(t,e){var n=t.target.value;this.setState(function(t){return{actionInputs:Object(g.a)({},t.actionInputs,Object(v.a)({},e,n))}})}},{key:"deleteAction",value:function(){if(null!==this.state.editAction){var t=this.state.actions;if(t[this.state.editAction]){delete t[this.state.editAction],t=Object.values(t);this.setState({actions:t,editAction:null,actionInputs:null,selectedContract:null,selectedFunction:null,selectedSignature:null})}}}},{key:"addAction",value:function(){var t=this,e=Object.values(this.state.actionInputs).filter(function(t){return t.length>0}).map(function(e,n){var a=t.state.selectedFunction.inputs[n];switch(a.type){case"address[]":e=e.split(",");break;case"uint256[]":e=e.split(",").map(function(e){return t.functionsUtil.toBN(e)});break;case"uint256":e=t.functionsUtil.toBN(e);break;default:"[]"===a.type.substr(-2)&&(e=e.split(","))}return e});if(e.length<this.state.selectedFunction.inputs.length)return!1;var n=null;if("custom"!==this.state.selectedContract){var a=this.functionsUtil.getContractByName(this.state.selectedContract);if(!a)return!1;n=a._address}else{if(!this.functionsUtil.isValidJSON(this.state.customABI))return!1;n=this.state.customAddress}var i=this.state.customABI,s=this.state.customAddress,o=this.state.selectedFunction.inputs.map(function(t){return t.type}),r=this.props.web3.eth.abi.encodeParameters(o,e),l=this.state.selectedFunction.name+"("+o.join(",")+")",c={params:{value:this.state.actionValue?this.functionsUtil.BNify(this.state.actionValue).toFixed(0):this.functionsUtil.BNify(0).toFixed(0),target:n,calldata:r,signature:l},customABI:i,customAddress:s,inputs:this.state.actionInputs,function:this.state.selectedFunction,contract:this.state.selectedContract,signature:this.state.selectedSignature},u=Object.values(this.state.actions);null===this.state.editAction?u.push(c):u[this.state.editAction]=c;this.setState({actions:u,newAction:!1,editAction:null})}},{key:"setEditAction",value:function(t){if(!this.state.actions[t])return!1;if(t===this.state.editAction)return!1;var e=this.state.actions[t],n=e.inputs,a=e.customABI,i=e.params.value,s=e.contract,o=e.function,r=e.customAddress,l=e.signature;this.setState({customABI:a,newAction:!1,editAction:t,actionValue:i,actionInputs:n,customAddress:r,selectedContract:s,selectedFunction:o,selectedSignature:l})}},{key:"setNewAction",value:function(t){if(t===this.state.newAction)return!1;this.setState({newAction:t,editAction:null,selectedContract:null,selectedFunction:null})}},{key:"cancelTransaction",value:function(){var t=Object(s.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.setState({processing:{txHash:null,loading:!1}});case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"handleSubmit",value:function(t){var e=this;t.preventDefault();var n=[],a=[],i=[],s=[],o="#"+this.state.title+"\n"+this.state.description;return Object.values(this.state.actions).forEach(function(t){a.push(t.params.value),n.push(t.params.target),s.push(t.params.calldata),i.push(t.params.signature)}),this.governanceUtil.propose(n,a,i,s,o,function(t,n){var a={eventLabel:t.status,eventAction:"propose",eventCategory:"Proposal"};n&&(a.eventLabel=e.functionsUtil.getTransactionError(n)),(n||"error"!==a.status)&&e.functionsUtil.sendGoogleAnalyticsEvent(a);var i={processing:{txHash:null,loading:!1}};"success"===t.status?(i.actionValue=0,i.customABI=null,i.newAction=null,i.editAction=null,i.actionInputs=null,i.customAddress=null,i.proposalCreated=!0,i.selectedContract=null,i.functionsOptions=null,i.selectedFunction=null,i.selectedSignature=null):i.txError=!0,e.setState(i)},function(t){var n=t.transactionHash;e.setState(function(t){return{processing:Object(g.a)({},t.processing,{txHash:n})}})}),this.setState(function(t){return{processing:Object(g.a)({},t.processing,{loading:!0})}}),!1}},{key:"formValidated",value:function(){}},{key:"render",value:function(){var t=this;return f.a.createElement(p.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},f.a.createElement(h.a,{mb:[3,4]},"Create Proposal"),this.state.proposalCreated?f.a.createElement(C.default,{cardProps:{py:3,px:4,width:[1,"auto"]}},f.a.createElement(p.h,{alignItems:"center",flexDirection:"column",justifyContent:"center"},f.a.createElement(p.k,{name:"Done",align:"center",size:this.props.isMobile?"1.4em":"2.2em",color:this.props.theme.colors.transactions.status.completed}),f.a.createElement(p.u,{mt:1,fontWeight:3,fontSize:[2,3],color:"dark-gray",textAlign:"center"},"The proposal has been successfully created"))):this.props.votes&&this.props.votes.gte(this.props.proposalThreshold)?f.a.createElement(p.i,{width:1,validated:this.state.validated,onSubmit:this.handleSubmit.bind(this)},f.a.createElement(p.h,{mb:2,width:1,flexDirection:["column","row"],justifyContent:["center","space-between"]},f.a.createElement(p.h,{width:[1,.48],flexDirection:"column"},f.a.createElement(p.h,{pb:2,width:1,mb:[2,3],borderColor:"divider",borderBottom:"1px solid transparent"},f.a.createElement(p.j.h4,{fontSize:[2,3],fontWeight:[2,3]},"Proposal Description")),f.a.createElement(p.h,{flexDirection:"column"},f.a.createElement(p.g,{width:1,label:"Title",validated:this.state.validated},f.a.createElement(p.m,{required:!0,width:1,type:"text",className:w.a.input,value:this.state.title,placeholder:"Title of your proposal",onChange:function(e){return t.handleInput("title",e)}}))),f.a.createElement(p.h,{flexDirection:"column"},f.a.createElement(p.g,{width:1,label:"Description",validated:this.state.validated},f.a.createElement(p.v,{required:!0,rows:8,width:1,className:w.a.input,value:this.state.description,placeholder:"Description of your proposal",onChange:function(e){return t.handleInput("description",e)}})))),f.a.createElement(p.h,{width:[1,.48],flexDirection:"column"},f.a.createElement(p.h,{pb:2,width:1,mb:[2,3],borderColor:"divider",borderBottom:"1px solid transparent"},f.a.createElement(p.j.h4,{fontSize:[2,3],fontWeight:[2,3]},"Actions")),f.a.createElement(p.h,{flexDirection:"column"},Object.values(this.state.actions).map(function(e,n){return f.a.createElement(C.default,{cardProps:{py:2,px:3,mb:3,width:1},titleParentProps:{ml:0,my:1,justifyContent:"center"},titleProps:{fontSize:2,fontWeight:3},isInteractive:!0,key:"action_".concat(n),handleClick:function(e){return t.setEditAction(n)},title:t.state.editAction===n?"Edit Action":null},t.state.editAction===n?f.a.createElement(p.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},f.a.createElement(p.g,{style:{width:"100%",display:"flex",alignItems:"stretch",flexDirection:"column"},label:"Select Contract"},f.a.createElement(p.t,{style:{width:"100%"},required:!0,value:t.state.selectedContract,options:t.state.contractOptions,onChange:t.changeContract.bind(t)})),t.state.selectedContract&&"custom"===t.state.selectedContract&&f.a.createElement(p.h,{width:1,flexDirection:"column"},f.a.createElement(p.g,{width:1,label:"Contract Address",validated:t.state.validated},f.a.createElement(p.m,{required:!0,width:1,type:"text",className:w.a.input,placeholder:"Custom contract address",pattern:t.getPatternByFieldType("address",!0),onChange:function(e){return t.handleInput("customAddress",e,"address")},value:t.state.customAddress?t.state.customAddress:""})),f.a.createElement(p.g,{width:1,label:"Custom ABI",validated:t.state.validated},f.a.createElement(p.v,{required:!0,rows:8,width:1,className:w.a.input,placeholder:"Insert the ABI of your contract",onChange:function(e){return t.handleInput("customABI",e,"json")},value:t.state.customABI?t.state.customABI:""}))),t.state.selectedContract&&t.state.functionsOptions&&f.a.createElement(p.g,{style:{width:"100%",display:"flex",alignItems:"stretch",flexDirection:"column"},label:"Select Function"},f.a.createElement(p.t,{style:{width:"100%"},required:!0,options:t.state.functionsOptions,onChange:t.changeFunction.bind(t),value:t.state.selectedSignature?t.state.selectedSignature:""})),t.state.selectedFunction&&t.state.selectedFunction.payable&&f.a.createElement(p.g,{label:"Value",style:{width:"100%",display:"flex",alignItems:"stretch",flexDirection:"column"}},f.a.createElement(p.m,{required:!0,width:1,type:"number",className:w.a.input,placeholder:"Enter ETH value",onChange:function(e){return t.valueChange(e)},value:t.state.actionValue?t.state.actionValue:0})),t.state.selectedFunction&&t.state.selectedFunction.inputs.map(function(e,n){var a=["uint256","bool"].includes(e.type)?"number":"text",i=t.getPatternByFieldType(e.type,!0);return f.a.createElement(p.g,{style:{width:"100%",display:"flex",alignItems:"stretch",flexDirection:"column"},key:"input_".concat(n),label:"".concat(e.name," (").concat(e.type,")")},f.a.createElement(p.m,{required:!0,width:1,type:a,pattern:i,className:w.a.input,placeholder:"".concat(e.name," (").concat(e.type,")"),onChange:function(e){return t.inputChange(e,n)},value:t.state.actionInputs[n]?t.state.actionInputs[n]:""}))}),t.state.selectedContract&&t.state.selectedFunction&&f.a.createElement(p.h,{mb:2,width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},f.a.createElement(x.default,{buttonProps:{px:[0,4],width:[1,"auto"],type:"button",disabled:!t.state.actionValid},handleClick:t.addAction.bind(t)},"Save Action"),f.a.createElement(p.n,{mt:2,color:"red",hoverColor:"red",onClick:t.deleteAction.bind(t)},"Delete Action"))):f.a.createElement(p.h,{width:1,alignItems:"center",flexDirection:"row",justifyContent:"space-between"},f.a.createElement(p.u,null,e.contract," - ",e.params.signature),f.a.createElement(p.h,{p:["4px","7px"],borderRadius:"50%",alignItems:"center",justifyContent:"center",backgroundColor:t.props.theme.colors.transactions.actionBg.redeem},f.a.createElement(p.k,{name:"Edit",align:"center",color:"redeem",size:t.props.isMobile?"1.2em":"1.4em"}))))}),(!this.state.actions||Object.values(this.state.actions).length<this.props.proposalMaxOperations)&&f.a.createElement(C.default,{cardProps:{py:2,px:3,mb:3,width:1},titleParentProps:{ml:0,my:1,justifyContent:"center"},titleProps:{fontSize:2,fontWeight:3},isInteractive:!0,handleClick:function(e){return t.setNewAction(!0)},title:this.state.newAction?"Add Action":null},this.state.newAction?f.a.createElement(p.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},f.a.createElement(p.g,{style:{width:"100%",display:"flex",alignItems:"stretch",flexDirection:"column"},label:"Select Contract"},f.a.createElement(p.t,{style:{width:"100%"},required:!0,options:this.state.contractOptions,onChange:this.changeContract.bind(this)})),this.state.selectedContract&&"custom"===this.state.selectedContract&&f.a.createElement(p.h,{width:1,flexDirection:"column"},f.a.createElement(p.g,{width:1,label:"Contract Address",validated:this.state.validated},f.a.createElement(p.m,{required:!0,width:1,type:"text",className:w.a.input,placeholder:"Custom contract address",pattern:this.getPatternByFieldType("address",!0),onChange:function(e){return t.handleInput("customAddress",e,"address")},value:this.state.customAddress?this.state.customAddress:""})),f.a.createElement(p.g,{width:1,label:"Custom ABI",validated:this.state.validated},f.a.createElement(p.v,{required:!0,rows:8,width:1,className:w.a.input,placeholder:"Insert the ABI of your contract",onChange:function(e){return t.handleInput("customABI",e,"json")},value:this.state.customABI?this.state.customABI:""}))),this.state.selectedContract&&this.state.functionsOptions&&f.a.createElement(p.g,{style:{width:"100%",display:"flex",alignItems:"stretch",flexDirection:"column"},label:"Select Function"},f.a.createElement(p.t,{style:{width:"100%"},required:!0,options:this.state.functionsOptions,onChange:this.changeFunction.bind(this),value:this.state.selectedSignature?this.state.selectedSignature:""})),this.state.selectedFunction&&this.state.selectedFunction.payable&&f.a.createElement(p.g,{label:"Value",style:{width:"100%",display:"flex",alignItems:"stretch",flexDirection:"column"}},f.a.createElement(p.m,{required:!0,width:1,type:"number",className:w.a.input,placeholder:"Enter ETH value",onChange:function(e){return t.valueChange(e)},value:this.state.actionValue?this.state.actionValue:0})),this.state.selectedFunction&&this.state.selectedFunction.inputs.map(function(e,n){var a=["uint256","bool"].includes(e.type)?"number":"text",i=t.getPatternByFieldType(e.type,!0);return f.a.createElement(p.g,{style:{width:"100%",display:"flex",alignItems:"stretch",flexDirection:"column"},key:"input_".concat(n),label:"".concat(e.name," (").concat(e.type,")")},f.a.createElement(p.m,{required:!0,width:1,type:a,pattern:i,className:w.a.input,placeholder:"".concat(e.name," (").concat(e.type,")"),onChange:function(e){return t.inputChange(e,n)},value:t.state.actionInputs[n]?t.state.actionInputs[n]:""}))}),this.state.selectedContract&&this.state.selectedFunction&&f.a.createElement(p.h,{width:1,alignItems:"center",justifyContent:"center"},f.a.createElement(x.default,{buttonProps:{px:[0,4],type:"button",width:[1,"auto"],disabled:!this.state.actionValid},handleClick:this.addAction.bind(this)},"Add Action"))):f.a.createElement(p.h,{width:1,alignItems:"center",flexDirection:"row",justifyContent:"space-between"},f.a.createElement(p.u,null,"Add Action"),f.a.createElement(p.h,{p:["4px","7px"],borderRadius:"50%",alignItems:"center",justifyContent:"center",backgroundColor:this.props.theme.colors.transactions.actionBg.redeem},f.a.createElement(p.k,{name:"Add",align:"center",color:"redeem",size:this.props.isMobile?"1.2em":"1.4em"}))))))),f.a.createElement(p.h,{mb:3,width:1,alignItems:"center",justifyContent:"center"},this.state.processing&&this.state.processing.loading?f.a.createElement(k.a,{web3:this.props.web3,hash:this.state.processing.txHash,waitText:"Proposal creation estimated in",endMessage:"Finalizing proposal creation request...",cancelTransaction:this.cancelTransaction.bind(this)}):f.a.createElement(x.default,{buttonProps:{type:"submit",width:[1,"15em"],disabled:!this.state.validated}},"Submit Proposal"))):this.props.balance&&this.props.balance.gte(this.props.proposalThreshold)?f.a.createElement(p.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},f.a.createElement(p.u,{mb:3,fontWeight:2,fontSize:[2,3],color:"dark-gray",textAlign:"center"},"Please delegate your votes to yourself to create a new proposal."),f.a.createElement(y.a,this.props)):f.a.createElement(p.u,{fontWeight:2,fontSize:[2,3],color:"dark-gray",textAlign:"center"},"You need at least ",this.functionsUtil.formatMoney(this.functionsUtil.fixTokenDecimals(this.props.proposalThreshold,18),0)," delegated votes to send a new proposal."))}}]),e}(d.Component),A=n(4756),I=n(4742),D=n(163),S=n(4755),O=function(t){function e(){var t,n;Object(o.a)(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(n=Object(l.a)(this,(t=Object(c.a)(e)).call.apply(t,[this].concat(i)))).state={vote:null,loaded:!1,userVote:null,processing:{txHash:null,loading:!1},voteSucceed:!1,showDelegateBox:!1},n.functionsUtil=null,n.governanceUtil=null,n.setVote=function(t){n.setState({vote:t})},n}return Object(u.a)(e,t),Object(r.a)(e,[{key:"loadUtils",value:function(){this.governanceUtil?this.governanceUtil.setProps(this.props):this.governanceUtil=new E.a(this.props),this.functionsUtil=this.governanceUtil.functionsUtil}},{key:"componentWillMount",value:function(){var t=Object(s.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.loadUtils(),this.loadData();case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var t=Object(s.a)(i.a.mark(function t(e,n){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.loadUtils(),e.account!==this.props.account&&this.loadData();case 3:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"loadData",value:function(){var t=Object(s.a)(i.a.mark(function t(){var e,n=this;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.props.account&&(e=this.props.proposal.votes.find(function(t){return t.voter.toLowerCase()===n.props.account.toLowerCase()}),this.setState({userVote:e,loaded:!0}));case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"cancelTransaction",value:function(){var t=Object(s.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.setState({processing:{txHash:null,loading:!1}});case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"toggleDelegateBox",value:function(t){this.setState({showDelegateBox:t})}},{key:"castVote",value:function(){var t=this;if(null===this.state.vote)return!1;var e="for"===this.state.vote,n=parseInt(this.props.proposal.id);this.governanceUtil.castVote(n,e,function(e,n){var a={eventCategory:"Proposal",eventAction:"CastVote",eventLabel:t.state.vote};n&&(a.eventLabel=t.functionsUtil.getTransactionError(n)),(n||"error"!==a.status)&&t.functionsUtil.sendGoogleAnalyticsEvent(a);var i=null;"success"===e.status&&(i={voter:t.props.account,votes:t.props.votes.toString(),support:"for"===t.state.vote,proposalId:t.props.proposal.id},"function"===typeof t.props.callback&&t.props.callback()),t.setState({userVote:i,processing:{txHash:null,loading:!1}})},function(e){var n=e.transactionHash;t.setState(function(t){return{processing:Object(g.a)({},t.processing,{txHash:n})}})}),this.setState(function(t){return{processing:Object(g.a)({},t.processing,{loading:!0})}})}},{key:"render",value:function(){var t=this;return this.state.userVote?f.a.createElement(p.h,{p:3,width:1,mb:[2,3],alignItems:"center",flexDirection:"column",justifyContent:"center"},f.a.createElement(p.u,{mb:2,fontWeight:4,fontSize:[2,3],color:"dark-gray",textAlign:"center"},"You have voted for the proposal #",this.props.proposal.id,":"),f.a.createElement(C.default,{cardProps:{mb:2,py:[2,3],px:[3,4],width:"auto"},isInteractive:!1},f.a.createElement(p.h,{my:1,alignItems:"center",flexDirection:"row",justifyContent:"center"},f.a.createElement(S.a,{fieldInfo:{name:"statusIcon",state:this.state.userVote.support?"Executed":"Canceled",props:{mr:2}}}),f.a.createElement(p.u,{fontWeight:3,fontSize:[2,3]},this.state.userVote.support?"For":"Against"))),f.a.createElement(p.u,{fontSize:1,fontWeight:500,color:"statValue",textAlign:"center"},"voted with ",this.functionsUtil.formatMoney(this.functionsUtil.fixTokenDecimals(this.state.userVote.votes,18).toFixed(0,1),0)," votes")):"Active"===this.props.proposal.state&&f.a.createElement(p.b,{p:3,width:1,mb:[2,3]},this.state.loaded?!this.props.votes||this.functionsUtil.BNify(this.props.votes).lte(0)||this.state.showDelegateBox?f.a.createElement(y.a,Object.assign({},this.props,{canClose:this.state.showDelegateBox,closeFunc:function(e){return t.toggleDelegateBox(!1)}})):f.a.createElement(p.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},f.a.createElement(p.u,{mb:1,fontWeight:4,fontSize:[2,3],color:"dark-gray",textAlign:"center"},"Cast your vote for the proposal #",this.props.proposal.id,":"),f.a.createElement(p.u,{mb:2,fontSize:1,color:"red",fontWeight:500,textAlign:"center"},"Make sure you have been delegated before this proposal has been submitted"),this.state.processing&&this.state.processing.loading?f.a.createElement(p.h,{width:1,flexDirection:"column"},f.a.createElement(k.a,{web3:this.props.web3,waitText:"Vote estimated in",hash:this.state.processing.txHash,endMessage:"Finalizing vote request...",cancelTransaction:this.cancelTransaction.bind(this)})):f.a.createElement(p.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},f.a.createElement(p.h,{mb:2,width:[1,.4],alignItems:"center",flexDirection:"row",justifyContent:"space-between"},f.a.createElement(C.default,{cardProps:{p:[2,3],width:.48,onMouseDown:function(){t.setVote("for")}},isInteractive:!0,isActive:"for"===this.state.vote},f.a.createElement(p.h,{my:1,alignItems:"center",flexDirection:"row",justifyContent:"center"},f.a.createElement(S.a,{fieldInfo:{name:"statusIcon",state:"Executed",props:{mr:2}}}),f.a.createElement(p.u,{fontWeight:3,fontSize:[2,3]},"For"))),f.a.createElement(C.default,{cardProps:{p:[2,3],width:.48,onMouseDown:function(){t.setVote("against")}},isInteractive:!0,isActive:"against"===this.state.vote},f.a.createElement(p.h,{my:1,alignItems:"center",flexDirection:"row",justifyContent:"center"},f.a.createElement(S.a,{fieldInfo:{name:"statusIcon",state:"Canceled",props:{mr:2}}}),f.a.createElement(p.u,{fontWeight:3,fontSize:[2,3]},"Against")))),f.a.createElement(p.u,{mb:0,fontSize:1,fontWeight:500,color:"statValue",textAlign:"center"},"You have ",this.functionsUtil.formatMoney(this.functionsUtil.fixTokenDecimals(this.props.votes,18).toFixed(0,1),0)," votes delegated"),this.props.balance&&this.functionsUtil.BNify(this.props.balance).gt(0)&&f.a.createElement(p.n,{mt:0,mainColor:"primary",hoverColor:"primary",onClick:function(e){return t.toggleDelegateBox(!0)}},"change delegate"),f.a.createElement(x.default,{buttonProps:{mt:2,width:[1,.2],disabled:null===this.state.vote},handleClick:this.castVote.bind(this)},"Vote"))):f.a.createElement(D.a,{flexProps:{flexDirection:"row"},loaderProps:{size:"30px"},textProps:{ml:2},text:"Loading data..."}))}}]),e}(d.Component),U=n(311),P=n(1105),z=function(t){function e(){var t,n;Object(o.a)(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(n=Object(l.a)(this,(t=Object(c.a)(e)).call.apply(t,[this].concat(i)))).state={showActionParams:null,processing:{action:null,txHash:null,loading:!1}},n.functionsUtil=null,n.governanceUtil=null,n}return Object(u.a)(e,t),Object(r.a)(e,[{key:"loadUtils",value:function(){this.governanceUtil?this.governanceUtil.setProps(this.props):this.governanceUtil=new E.a(this.props),this.functionsUtil=this.governanceUtil.functionsUtil}},{key:"toggleShowParams",value:function(t){this.state.showActionParams===t&&(t=null),this.setState({showActionParams:t})}},{key:"cancelTransaction",value:function(){var t=Object(s.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.setState({processing:{action:null,txHash:null,loading:!1}});case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"queueProposal",value:function(){var t=Object(s.a)(i.a.mark(function t(){var e,n,a=this;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=function(t,e){var n={eventAction:"queue",eventCategory:"Governance",eventLabel:a.props.proposal.id};(e||"error"!==n.status)&&a.functionsUtil.sendGoogleAnalyticsEvent(n),"function"===typeof a.props.loadData&&"success"===t.status&&a.props.loadData(),a.setState({processing:{action:null,txHash:null,loading:!1}})},n=function(t){var e=t.transactionHash;a.setState(function(t){return{processing:Object(g.a)({},t.processing,{txHash:e})}})},this.governanceUtil.queueProposal(this.props.proposal.id,e,n),this.setState(function(t){return{processing:Object(g.a)({},t.processing,{loading:!0,action:"Queue"})}});case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"executeProposal",value:function(){var t=Object(s.a)(i.a.mark(function t(){var e,n,a=this;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=function(t,e){var n={eventAction:"execute",eventCategory:"Governance",eventLabel:a.props.proposal.id};(e||"error"!==n.status)&&a.functionsUtil.sendGoogleAnalyticsEvent(n),"function"===typeof a.props.loadData&&"success"===t.status&&a.props.loadData(),a.setState({processing:{action:null,txHash:null,loading:!1}})},n=function(t){var e=t.transactionHash;a.setState(function(t){return{processing:Object(g.a)({},t.processing,{txHash:e})}})},this.governanceUtil.executeProposal(this.props.proposal.id,e,n),this.setState(function(t){return{processing:Object(g.a)({},t.processing,{loading:!0,action:"Execute"})}});case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){var t=Object(s.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.loadUtils(),window.loadData=this.props.loadData;case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var t=Object(s.a)(i.a.mark(function t(e,n){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.loadUtils();case 1:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e=this.props.proposal,n=Object.values(e.states).pop(),a=e.votes&&e.votes.length>0,i=this.functionsUtil.BNify(e.forVotes).div(1e18),s=this.functionsUtil.BNify(e.againstVotes).div(1e18),o=i.plus(s),r=i.div(o).times(100).toFixed(2),l=s.div(o).times(100).toFixed(2),c=e.votes.filter(function(t){return t.support}).sort(function(e,n){return t.functionsUtil.BNify(e.votes).lt(t.functionsUtil.BNify(n.votes))?1:-1}),u=e.votes.filter(function(t){return!t.support}).sort(function(e,n){return t.functionsUtil.BNify(e.votes).lt(t.functionsUtil.BNify(n.votes))?1:-1}),d="succeeded"===e.state.toLowerCase(),m="queued"===e.state.toLowerCase()&&parseInt((new Date).getTime()/1e3)-parseInt(e.states[e.states.length-1].start_time)>=parseInt(this.props.timelockDelay);return f.a.createElement(p.b,{width:1},f.a.createElement(h.a,{mb:[3,4]},e.title),f.a.createElement(p.h,{mb:3,width:1,alignItems:"center",justifyContent:"center",flexDirection:["column","row"]},f.a.createElement(p.h,{mb:[2,0],pr:[0,1],width:[1,.25],flexDirection:"column"},f.a.createElement(U.default,{labelTooltip:null,title:"Proposal ID",value:"#".concat(e.id),minHeight:["110px","143px"],titleMinHeight:["auto","50px"],label:"Created on ".concat(this.functionsUtil.strToMoment(1e3*e.states[0].start_time).format("DD MMM, YYYY"))})),f.a.createElement(p.h,{mb:[2,0],pl:[0,1],pr:[0,1],width:[1,.25],flexDirection:"column"},f.a.createElement(U.default,{titleMinHeight:["auto","50px"],minHeight:["110px","143px"],labelTooltip:null,title:"Proposer",label:null},f.a.createElement(p.h,{alignItems:"center",flexDirection:"row",justifyContent:"center"},f.a.createElement(p.a,{opts:{size:12,color:"#dfe",bgcolor:"#a71",spotcolor:"#000",seed:e.address}}),f.a.createElement(P.a,{ml:2,lineHeight:1,fontSize:[3,4],fontWeight:[3,4],color:"statValue",hash:e.proposer})))),f.a.createElement(p.h,{mb:[2,0],pl:[0,1],pr:[0,1],width:[1,.25],flexDirection:"column"},f.a.createElement(U.default,{title:"Status",labelTooltip:null,minHeight:["110px","143px"],titleMinHeight:["auto","50px"],label:"Updated on ".concat(this.functionsUtil.strToMoment(1e3*n.start_time).format("DD MMM, YYYY"))},f.a.createElement(p.h,{alignItems:"center",flexDirection:"row",justifyContent:"center"},f.a.createElement(S.a,Object.assign({},this.props,{proposal:e,fieldInfo:{name:"statusIcon",props:{size:this.props.isMobile?"1.7em":"2em"}}})),f.a.createElement(p.u,{ml:2,lineHeight:1,fontSize:[4,5],fontWeight:[3,4],color:"statValue"},e.state)))),f.a.createElement(p.h,{pl:[0,1],mb:[2,0],width:[1,.25],flexDirection:"column"},f.a.createElement(U.default,{label:null,title:"Total Votes",labelTooltip:null,minHeight:["110px","143px"],titleMinHeight:["auto","50px"],value:this.functionsUtil.formatMoney(o.toFixed(0,1),0)}))),this.props.account&&f.a.createElement(O,Object.assign({},this.props,{callback:this.props.loadData})),f.a.createElement(p.h,{width:1,mb:[2,3],id:"details-container",justifyContent:"space-between",flexDirection:["column","row"]},f.a.createElement(C.default,{cardProps:{p:3,mb:[2,0],mr:[0,1],width:[1,.5]},title:"Actions",titleParentProps:{mt:0,ml:0}},f.a.createElement(p.h,{pt:2,width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},e.actions.signatures.map(function(n,a){var i=e.actions.calldatas[a],s=null,o=n.match(/\(([a-z0-9,]+(\[\])?)\)/i);return(o=o?o[1].split(","):null)&&(s=t.props.web3.eth.abi.decodeParameters(o,i))&&(s=Object.values(s).splice(0,o.length)),f.a.createElement(p.h,{py:1,width:1,flexDirection:"column",alignItems:"flex-start",key:"action_".concat(a),justifyContent:"flex-start",borderBottom:"1px solid ".concat(t.props.theme.colors["near-white"])},f.a.createElement(p.h,{mb:1,width:1,flexDirection:["column","row"],alignItems:["flex-start","center"]},f.a.createElement(p.h,{flexDirection:"row"},f.a.createElement(p.u,{fontSize:1,fontWeight:3,color:"dark-gray"},parseInt(a)+1),f.a.createElement(p.u,{ml:2,fontSize:1,fontWeight:2,color:"dark-gray"},n)),s&&f.a.createElement(p.n,{mt:[1,0],ml:[0,1],fontSize:1,fontWeight:2,textAlign:"left",lineHeight:"initial",hoverColor:"primary",onClick:function(e){return t.toggleShowParams(a)}},t.state.showActionParams===a?"(hide params)":"(show params)")),s&&t.state.showActionParams===a&&f.a.createElement(p.h,{pl:[0,3],width:1,flexDirection:"column"},s.map(function(t,e){return f.a.createElement(p.u,{fontSize:0,color:"statValue",key:"param_".concat(e)},t)})))}))),f.a.createElement(C.default,{cardProps:{p:3,ml:[0,1],width:[1,.5]}},f.a.createElement(p.h,{mb:2,width:1,alignItems:"center",flexDirection:"row",justifyContent:"space-between"},f.a.createElement(p.u,{fontWeight:4,fontSize:[2,3],textAlign:"left",color:"dark-gray",lineHeight:"initial"},"Proposal History"),f.a.createElement(p.u,{fontWeight:4,fontSize:[2,3],textAlign:"left",color:"dark-gray",lineHeight:"initial"},"Date")),f.a.createElement(p.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},e.states.map(function(n,a){return f.a.createElement(p.h,{py:2,width:1,alignItems:"center",key:"state_".concat(a),justifyContent:"space-between",borderBottom:"1px solid ".concat(t.props.theme.colors["near-white"])},f.a.createElement(p.h,{alignItems:"center",flexDirection:"row"},f.a.createElement(S.a,Object.assign({},t.props,{proposal:e,fieldInfo:{name:"statusIcon",state:n.state,props:{size:t.props.isMobile?"1.3em":"1.5em"}}})),f.a.createElement(p.n,{ml:2,fontSize:1,fontWeight:2,target:"_blank",textAlign:"left",color:"dark-gray",lineHeight:"initial",hoverColor:"primary",rel:"nofollow noopener noreferrer",href:t.functionsUtil.getEtherscanTransactionUrl(n.trx_hash)},n.state)),f.a.createElement(p.u,{fontSize:1,fontWeight:2,textAlign:"left",color:"dark-gray",lineHeight:"initial"},t.functionsUtil.strToMoment(1e3*n.start_time).format("DD MMM, YYYY")))}),this.state.processing&&this.state.processing.loading?f.a.createElement(p.h,{mt:3,width:1,flexDirection:"column"},f.a.createElement(k.a,{web3:this.props.web3,hash:this.state.processing.txHash,cancelTransaction:this.cancelTransaction.bind(this),waitText:"".concat(this.state.processing.action," estimated in"),endMessage:"Finalizing ".concat(this.state.processing.action.toLowerCase()," request...")})):d?f.a.createElement(x.default,{buttonProps:{mt:3,width:[1,"auto"]},handleClick:this.queueProposal.bind(this)},"Queue Proposal"):m&&f.a.createElement(x.default,{buttonProps:{mt:3,width:[1,"auto"]},handleClick:this.executeProposal.bind(this)},"Execute Proposal")))),f.a.createElement(C.default,{cardProps:{p:3,mb:[2,3]},title:"Details",titleParentProps:{mt:0,ml:0}},f.a.createElement(p.u,{mt:2,fontSize:[1,2],style:{wordBreak:"break-word"},dangerouslySetInnerHTML:{__html:e.description.replace(/\n/g,"<br />")}})),a&&f.a.createElement(C.default,{cardProps:{p:3,mb:[2,3]}},f.a.createElement(p.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},f.a.createElement(p.h,{mb:2,width:1,alignItems:"center",flexDirection:"row",justifyContent:"space-between"},f.a.createElement(p.u,{fontWeight:4,fontSize:[2,3],textAlign:"left",color:"dark-gray",lineHeight:"initial"},"For (",r,"%)"),f.a.createElement(p.u,{fontWeight:4,fontSize:[2,3],textAlign:"left",color:"dark-gray",lineHeight:"initial"},"Against (",l,"%)")),f.a.createElement(p.h,{mb:2,width:1,height:"20px",alignItems:"center",flexDirection:"row",id:"votes-cursor-container"},f.a.createElement(p.h,{height:"100%",width:"".concat(r,"%"),style:{background:"rgba(0, 211, 149, 1)"},borderRadius:100===parseFloat(r)?"20px":"20px 0 0 20px"}),f.a.createElement(p.h,{height:"100%",width:"".concat(l,"%"),style:{background:"rgba(211, 0, 0, 1)"},borderRadius:100===parseFloat(l)?"20px":"0 20px 20px 0"})),f.a.createElement(p.h,{width:1,height:"20px",alignItems:"center",flexDirection:"row",id:"votes-number-container"},f.a.createElement(p.h,{width:.5,height:"100%",justifyContent:"flex-end"},f.a.createElement(p.h,{width:1,height:"100%",justifyContent:"flex-start"},f.a.createElement(p.u,{fontWeight:3,fontSize:[1,2],textAlign:"left",color:"statValue",lineHeight:"initial"},this.functionsUtil.formatMoney(i.toFixed(0,1),0)))),f.a.createElement(p.h,{width:.5,height:"100%",justifyContent:"flex-start"},f.a.createElement(p.h,{width:1,height:"100%",minWidth:"10%",justifyContent:"flex-end"},f.a.createElement(p.u,{fontWeight:3,fontSize:[1,2],textAlign:"right",color:"statValue",lineHeight:"initial"},this.functionsUtil.formatMoney(s.toFixed(0,1),0))))))),a&&f.a.createElement(p.h,{mb:4,width:1,id:"votes-addresses-container",justifyContent:"space-between",flexDirection:["column","row"]},f.a.createElement(C.default,{cardProps:{p:3,mb:[2,0],mr:[0,1],width:[1,.5]},id:"for-votes-addresses-container"},f.a.createElement(p.h,{width:1,alignItems:"center",flexDirection:"column",justifyContent:"center"},f.a.createElement(p.h,{mb:2,width:1,alignItems:"center",flexDirection:"row",justifyContent:"space-between"},f.a.createElement(p.u,{fontWeight:4,fontSize:[2,3],textAlign:"left",color:"dark-gray",lineHeight:"initial"},"For Addresses (",c.length,")"),f.a.createElement(p.u,{fontWeight:4,fontSize:[2,3],textAlign:"left",color:"dark-gray",lineHeight:"initial"},"Votes")),f.a.createElement(p.h,{width:1,style:{overflow:"scroll"},maxHeight:"400px",flexDirection:"column"},c.map(function(e,n){var a=t.functionsUtil.formatMoney(t.functionsUtil.BNify(e.votes).div(1e18).toFixed(4,1),4);return f.a.createElement(p.h,{py:2,width:1,alignItems:"center",flexDirection:"row",key:"vote_for_".concat(n),justifyContent:"space-between",borderBottom:"1px solid ".concat(t.props.theme.colors["near-white"])},f.a.createElement(p.h,{alignItems:"center",flexDirection:"row",justifyContent:"flex-start"},f.a.createElement(p.a,{opts:{size:7,color:"#dfe",bgcolor:"#a71",spotcolor:"#000",seed:e.voter}}),f.a.createElement(p.n,{ml:2,fontSize:1,fontWeight:2,target:"_blank",textAlign:"left",color:"statValue",lineHeight:"initial",hoverColor:"primary",rel:"nofollow noopener noreferrer",href:"/#/governance/leaderboard/".concat(e.voter)},t.props.isMobile?f.a.createElement(P.a,{fontSize:1,fontWeight:2,textAlign:"left",color:"statValue",hash:e.voter,lineHeight:"initial"}):e.voter)),f.a.createElement(p.u,{fontSize:1,fontWeight:2,textAlign:"left",color:"statValue",lineHeight:"initial"},a))})))),f.a.createElement(C.default,{cardProps:{p:3,ml:[0,1],width:[1,.5]},id:"against-votes-addresses-container"},f.a.createElement(p.h,{mb:2,width:1,alignItems:"center",flexDirection:"row",justifyContent:"space-between"},f.a.createElement(p.u,{fontWeight:4,fontSize:[2,3],textAlign:"left",color:"dark-gray",lineHeight:"initial"},"Against Addresses (",u.length,")"),f.a.createElement(p.u,{fontWeight:4,fontSize:[2,3],textAlign:"left",color:"dark-gray",lineHeight:"initial"},"Votes")),f.a.createElement(p.h,{width:1,style:{overflow:"scroll"},maxHeight:"400px",flexDirection:"column"},u.map(function(e,n){var a=t.functionsUtil.formatMoney(t.functionsUtil.BNify(e.votes).div(1e18).toFixed(4,1),4);return f.a.createElement(p.h,{py:2,width:1,alignItems:"center",flexDirection:"row",justifyContent:"space-between",key:"vote_against_".concat(n),borderBottom:"1px solid ".concat(t.props.theme.colors["near-white"])},f.a.createElement(p.h,{alignItems:"center",flexDirection:"row",justifyContent:"flex-start"},f.a.createElement(p.a,{opts:{size:7,color:"#dfe",bgcolor:"#a71",spotcolor:"#000",seed:e.voter}}),f.a.createElement(p.n,{ml:2,fontSize:1,fontWeight:2,target:"_blank",textAlign:"left",color:"statValue",lineHeight:"initial",hoverColor:"primary",rel:"nofollow noopener noreferrer",href:"/#/governance/leaderboard/".concat(e.voter)},e.voter)),f.a.createElement(p.u,{fontSize:1,fontWeight:2,textAlign:"left",color:"statValue",lineHeight:"initial"},a))})))))}}]),e}(d.Component),F=function(t){function e(){var t,n;Object(o.a)(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(n=Object(l.a)(this,(t=Object(c.a)(e)).call.apply(t,[this].concat(i)))).state={proposals:null,addProposal:!1,selectedProposal:null},n.governanceUtil=null,n}return Object(u.a)(e,t),Object(r.a)(e,[{key:"loadUtils",value:function(){this.governanceUtil?this.governanceUtil.setProps(this.props):this.governanceUtil=new E.a(this.props)}},{key:"componentWillMount",value:function(){var t=Object(s.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.loadUtils(),this.loadData();case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var t=Object(s.a)(i.a.mark(function t(e,n){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.loadUtils(),this.props.contractsInitialized&&e.contractsInitialized!==this.props.contractsInitialized&&this.loadData();case 3:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"loadData",value:function(){var t=Object(s.a)(i.a.mark(function t(){var e,n,a,s,o,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.props.contractsInitialized){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,this.governanceUtil.getProposals();case 4:e=t.sent,n=this.props.match.params,a=!1,s=null,n.item_id&&parseInt(n.item_id)?(o=parseInt(n.item_id),(r=e.find(function(t){return parseInt(t.id)===o}))&&(s=r)):n.item_id&&"new"===n.item_id.toLowerCase()&&(a=!0),this.setState({proposals:e,addProposal:a,selectedProposal:s});case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return f.a.createElement(p.b,{width:1},f.a.createElement(p.h,{mb:3,width:1,alignItems:"center",flexDirection:"row",justifyContent:this.state.selectedProposal||this.state.addProposal?"space-between":"flex-end"},this.state.selectedProposal?f.a.createElement(p.h,{alignItems:"center",width:.5},f.a.createElement(m.default,Object.assign({},this.props,{text:"Governance",pathLink:["proposals"],isMobile:this.props.isMobile,handleClick:function(e){return t.props.goToSection("/")},path:["Proposals",this.state.selectedProposal.title]}))):this.state.addProposal?f.a.createElement(p.h,{alignItems:"center",width:.5},f.a.createElement(m.default,Object.assign({},this.props,{text:"Governance",pathLink:["proposals"],isMobile:this.props.isMobile,path:["Proposals","Add proposal"],handleClick:function(e){return t.props.goToSection("/")}}))):f.a.createElement(p.h,{alignItems:"center",width:.5},f.a.createElement(m.default,Object.assign({},this.props,{text:"Governance",path:["Proposals"],isMobile:this.props.isMobile,handleClick:function(e){return t.props.goToSection("/")}}))),!this.state.addProposal&&f.a.createElement(p.h,{width:.5,alignItems:"center",justifyContent:"flex-end"},f.a.createElement(I.default,Object.assign({icon:"Add"},this.props,{text:"New Proposal",handleClick:function(e){return t.props.goToSection("proposals/new")}})))),this.state.selectedProposal?f.a.createElement(p.b,{width:1},f.a.createElement(z,Object.assign({},this.props,{loadData:this.loadData.bind(this),proposal:this.state.selectedProposal}))):this.state.addProposal?f.a.createElement(p.b,{width:1},f.a.createElement(j,this.props)):f.a.createElement(p.b,{width:1},f.a.createElement(h.a,{mb:[3,4]},"Governance Proposals"),f.a.createElement(p.h,{mb:3,width:1,id:"proposals",flexDirection:"column"},f.a.createElement(A.a,Object.assign({},this.props,{proposals:this.state.proposals,cols:[{title:"#",props:{width:[.1,.05]},fields:[{name:"id",props:{}}]},{title:"DATE",mobile:!1,props:{width:[.15,.12]},fields:[{name:"date"}]},{title:"TITLE",props:{width:[.75,.6]},fields:[{name:"title"}]},{mobile:!1,title:"VOTES",props:{width:[.11,.11]},fields:[{name:"votes"}]},{title:"STATUS",props:{width:[.15,.12],alignItems:["center","flex-start"],justifyContent:["center","flex-start"]},parentProps:{justifyContent:["center","flex-start"]},fields:[{name:"statusIcon",props:{mr:[0,2]}},{mobile:!1,name:"status"}]}]})))))}}]),e}(d.Component);e.default=F}}]);
//# sourceMappingURL=26.b17f5c3e.chunk.js.map