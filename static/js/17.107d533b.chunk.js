(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{4864:function(e,t,i){"use strict";i.r(t);var o=i(1),a=i.n(o),n=i(6),s=i(11),r=i(12),l=i(15),c=i(14),p=i(18),d=i(262),m=i.n(d),f=i(282),u=i(129),h=i(4761),b=i(779),g=i(0),y=i.n(g),k=i(4),x=i(34),v=i(50),M=i(500),S=i(32),D=function(e){function t(){var e,i;Object(s.a)(this,t);for(var o=arguments.length,r=new Array(o),p=0;p<o;p++)r[p]=arguments[p];return(i=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={chartProps:{},chartType:null,chartData:null,chartWidth:null},i.functionsUtil=null,i.parseAum=function(e){return(parseInt(e)>=1e3?parseFloat(e/1e3).toFixed(1)+"K":parseFloat(e))+" "+i.props.selectedToken},i.loadApiData=Object(n.a)(a.a.mark(function e(){var t,o,s,r,l,c,p,d,f,g,v,M,D,w,E,T,C,Y,O,j,U,P,I,F,R,V,z,A,L,H,B,W,N,_,G,X,q,J,K,Q,Z;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.props.tokenConfig&&i.props.selectedToken&&i.props.chartMode&&i.props.apiResults){e.next=2;break}return e.abrupt("return",!1);case 2:t=function(e){return y.a.createElement(k.h,{mb:2,width:1,alignItems:"center",flexDirection:"row"},y.a.createElement(k.h,{pr:2,style:{flexBasis:"0",flex:"1 1 0px"},alignItems:"center",justifyContent:"flex-start"},e.color&&y.a.createElement(k.b,{mr:2,width:"10px",height:"10px",borderRadius:"50%",backgroundColor:e.color}),y.a.createElement(k.u,{fontSize:1,fontWeight:2,textAlign:"left",color:"dark-gray",style:{textTransform:"capitalize"}},e.label)),y.a.createElement(k.h,{style:{flexBasis:"0",flex:"1 1 0px"},alignItems:"center",justifyContent:"flex-end"},y.a.createElement(k.u,{fontSize:1,fontWeight:3,color:"cellText",textAlign:"right",style:{whiteSpace:"nowrap"},dangerouslySetInnerHTML:{__html:e.value}})))},o=function(e){return y.a.createElement(S.default,{key:e.point.id,cardProps:{py:2,px:3,width:1,left:e.point.data.itemPos>50?"-110%":"0"}},y.a.createElement(k.h,{width:1,flexDirection:"column"},e.point.data.xFormatted&&y.a.createElement(k.u,{mb:2,fontSize:1,fontWeight:3,color:"cellText",textAlign:"left"},e.point.data.xFormatted),e.children))},s=4,r=i.props.apiResults,l=i.props.apiResults_unfiltered,c=r.length,p=Object.assign([],i.props.tokenConfig.protocols),d=x.a.stats.versions[i.props.idleVersion],f={},g={},v=0,M=0,D=[],w={},E=b.a,T=[],C=0,Y=0,O=null,j=null,e.t0=i.props.chartMode,e.next="VOL"===e.t0?25:"AUM"===e.t0?41:"ALL"===e.t0?50:"ALL_PERC"===e.t0?61:"APR"===e.t0?69:"SCORE"===e.t0?78:"PRICE_V4"===e.t0?88:"PRICE"===e.t0?105:118;break;case 25:for(U={},P=parseInt(l[0].timestamp),I=parseInt(m()()._d.getTime()/1e3),F=P;F<=I;F+=86400)R=m()(1e3*F).format("YYYY/MM/DD"),U[R]||(U[R]={date:R,timestamp:F,deposits:0,redeems:0});for(V=null,l.forEach(function(e){var t=m()(1e3*e.timestamp).format("YYYY/MM/DD"),o=i.functionsUtil.fixTokenDecimals(e.idleSupply,18);if(U[t]||(U[t]={date:t,timestamp:e.timestamp,deposits:0,redeems:0}),V){var a=i.functionsUtil.fixTokenDecimals(V.idleSupply,18);if(!o.eq(a)){var n=o.minus(a);n.gte(0)?(U[t].deposits+=parseFloat(n),C=Math.max(C,U[t].deposits)):(U[t].redeems+=parseFloat(n),C=Math.max(C,Math.abs(U[t].deposits)))}}else U[t].deposits+=parseFloat(o);V=e}),D=Object.values(U).filter(function(e){return(!i.props.startTimestamp||e.timestamp>=i.props.startTimestamp)&&(!i.props.endTimestamp||e.timestamp<=i.props.endTimestamp)}),z=0,D.forEach(function(e){z=Math.max(z,Math.abs(e.deposits),Math.abs(e.redeems))}),E=h.a,Y=0,v=parseFloat(C/s),T=[0],A=1;A<=5;A++)T.push(A*v);return w={indexBy:"date",enableLabel:!1,minValue:-z,maxValue:z,label:function(e){return Math.abs(e.value)},axisBottom:i.props.isMobile?null:{tickSize:0,legend:"",format:function(e){if(Y++%3===0)return m()(e,"YYYY/MM/DD HH:mm").format("MMM DD")},tickPadding:15,orient:"bottom",legendOffset:0,legendPosition:"middle",tickValues:"every 3 days"},axisLeft:null,axisRight:{legend:"",tickSize:0,orient:"left",tickPadding:10,tickRotation:0,legendOffset:-70,tickValues:8,legendPosition:"middle",format:function(e){return i.functionsUtil.abbreviateNumber(Math.abs(e),0)}},markers:[{axis:"y",value:0,lineStyle:{strokeOpacity:0},textStyle:{fill:u.a.colors.transactions.action.deposit},legend:"deposits",legendPosition:"top-left",legendOrientation:"vertical",legendOffsetX:-20},{axis:"y",value:0,lineStyle:{stroke:u.a.colors["dark-gray"],strokeDasharray:"5 3"},textStyle:{fill:u.a.colors.transactions.action.redeem},legend:"redeems",legendPosition:"bottom-left",legendOrientation:"vertical",legendOffsetX:-20}],keys:["deposits","redeems"],padding:.4,colors:[u.a.colors.transactions.action.deposit,u.a.colors.transactions.action.redeem],labelTextColor:"inherit:darker(1.4)",labelSkipWidth:16,labelSkipHeight:16,pointSize:0,useMesh:!0,animate:!1,pointLabel:"y",curve:"linear",enableArea:!1,enableSlices:"x",enableGridX:!1,enableGridY:!0,pointBorderWidth:1,pointLabelYOffset:-12,legends:[{dataFrom:"keys",itemWidth:i.props.isMobile?80:100,itemHeight:18,translateX:0,translateY:i.props.isMobile?40:65,symbolSize:10,itemsSpacing:0,direction:"row",anchor:"bottom-left",symbolShape:"circle",itemTextColor:u.a.colors.legend,effects:[{on:"hover",style:{itemTextColor:"#000"}}]}],theme:{axis:{ticks:{text:{fontSize:i.props.isMobile?12:14,fontWeight:600,fill:u.a.colors.legend,fontFamily:u.a.fonts.sansSerif}}},grid:{line:{stroke:u.a.colors.lineChartStroke,strokeDasharray:"10 6"}},legends:{text:{fontSize:i.props.isMobile?12:14,fontWeight:500,fontFamily:u.a.fonts.sansSerif}},tooltip:{container:{boxShadow:null,background:null}}},pointColor:{from:"color",modifiers:[]},margin:i.props.isMobile?{top:20,right:50,bottom:45,left:50}:{top:20,right:70,bottom:70,left:50},tooltip:function(e){var a=i.functionsUtil.strToMoment(e.indexValue).format("MMM DD"),n={id:e.id,data:{xFormatted:a}},s=i.functionsUtil.abbreviateNumber(e.data.deposits,2)+" "+i.props.selectedToken,r=i.functionsUtil.abbreviateNumber(e.data.redeems,2)+" "+i.props.selectedToken;return y.a.createElement(o,{point:n},y.a.createElement(t,{label:"Deposits",color:u.a.colors.deposit,value:s}),y.a.createElement(t,{label:"Redeem",color:u.a.colors.redeem,value:r}))}},e.abrupt("break",119);case 41:for(C=0,D.push({id:"AUM",color:"hsl("+x.a.stats.tokens[i.props.selectedToken].color.hsl.join(",")+")",data:r.map(function(e,t){var o=i.functionsUtil.fixTokenDecimals(e.idleSupply,18),a=i.functionsUtil.fixTokenDecimals(e.idlePrice,i.props.tokenConfig.decimals),n=o.times(a),s=m()(1e3*e.timestamp).format("YYYY/MM/DD HH:mm"),r=parseFloat(n.toString());return C=Math.max(C,r),{x:s,y:r}})}),i.props.tokenConfig.protocols.forEach(function(e,t){r.map(function(t,o){return t.protocolsData.filter(function(t,i){return t.protocolAddr.toLowerCase()===e.address.toLowerCase()}).map(function(o,a){if(!i.functionsUtil.BNify(o.rate).eq(0)){var n=m()(1e3*t.timestamp).format("YYYY/MM/DD HH:mm"),s=parseFloat(i.functionsUtil.fixTokenDecimals(o.allocation,i.props.tokenConfig.decimals));C=Math.max(C,s);var r=D[0].data.filter(function(e){return e.x===n});if(r){r=r[0];var l=D[0].data.indexOf(r);r.allocations||(r.allocations={}),r.allocations[e.name]=s,D[0].data[l]=r}}})[0]}).filter(function(e){return void 0!==e})}),E=b.a,v=parseFloat(C/s),T=[0],L=1;L<=5;L++)T.push(L*v);return w={xScale:{type:"time",format:"%Y/%m/%d %H:%M"},xFormat:"time:%b %d %H:%M",yFormat:function(e){return i.functionsUtil.formatMoney(e,e<1?3:0)},yScale:{type:"linear",stacked:!1},axisLeft:{legend:"",tickSize:0,orient:"left",tickPadding:10,tickRotation:0,legendOffset:-70,tickValues:T,legendPosition:"middle",format:function(e){return i.functionsUtil.abbreviateNumber(e,e<1?3:0)}},axisBottom:i.props.isMobile?null:{tickSize:0,format:"%b %d",tickPadding:15,tickValues:i.props.isMobile?"every 4 days":i.props.showAdvanced?"every 3 days":"every 2 days",orient:"bottom",legend:"",legendOffset:0,legendPosition:"middle"},gridYValues:T,pointSize:0,useMesh:!0,animate:!1,pointLabel:"y",curve:"linear",enableArea:!0,enableSlices:"x",enableGridX:!1,enableGridY:!0,pointBorderWidth:1,colors:function(e){return e.color},pointLabelYOffset:-12,legends:[{itemWidth:i.props.isMobile?70:80,itemHeight:18,translateX:i.props.isMobile?-35:0,translateY:i.props.isMobile?40:65,symbolSize:10,itemsSpacing:5,direction:"row",anchor:"bottom-left",symbolShape:"circle",itemTextColor:u.a.colors.legend,effects:[{on:"hover",style:{itemTextColor:"#000"}}]}],theme:{axis:{ticks:{text:{fontSize:i.props.isMobile?12:14,fontWeight:600,fill:u.a.colors.legend,fontFamily:u.a.fonts.sansSerif}}},grid:{line:{stroke:u.a.colors.lineChartStroke,strokeDasharray:"10 6"}},legends:{text:{fontSize:i.props.isMobile?12:14,fontWeight:500,fontFamily:u.a.fonts.sansSerif}}},pointColor:{from:"color",modifiers:[]},margin:i.props.isMobile?{top:20,right:20,bottom:40,left:65}:{top:20,right:40,bottom:70,left:70},sliceTooltip:function(e){var a=e.slice.points[0];return"object"===typeof a&&"object"===typeof a.data?y.a.createElement(o,{point:a},y.a.createElement(t,{label:a.serieId,color:a.serieColor,value:a.data.yFormatted}),a.data.allocations&&"object"===typeof a.data.allocations&&Object.keys(a.data.allocations).map(function(e){var o="hsl("+x.a.stats.protocols[e].color.hsl.join(",")+")",n=a.data.allocations[e],s=i.functionsUtil.formatMoney(n,n<1?3:0),r=i.functionsUtil.BNify(a.data.allocations[e]).div(i.functionsUtil.BNify(a.data.y)).times(100).toFixed(0)+"%";return y.a.createElement(t,{label:e,color:o,key:"".concat(a.id,"_").concat(e),value:"".concat(s," (").concat(r,")")})})):null}},e.abrupt("break",119);case 50:for(f={},g={},r.forEach(function(e,t){var o=m()(1e3*e.timestamp).format("YYYY/MM/DD"),a={date:o};e.protocolsData.forEach(function(e){var t=i.functionsUtil.BNify(e.rate).eq(0),o=i.props.tokenConfig.protocols.find(function(t){return t.address.toLowerCase()===e.protocolAddr.toLowerCase()});if(o){var n=i.functionsUtil.capitalize(o.name);if(t)a[n]=0;else{var s=parseFloat(i.functionsUtil.fixTokenDecimals(e.allocation,i.props.tokenConfig.decimals));f[n]=1,a[n]=s,a["".concat(n,"Color")]="hsl("+x.a.stats.protocols[n.toLowerCase()].color.hsl.join(",")+")",C=Math.max(C,s)}}}),g[o]=a}),D=Object.values(g),E=h.a,Y=0,v=parseFloat(C/s),T=[0],H=1;H<=5;H++)T.push(H*v);return w={padding:.2,animate:!1,indexBy:"date",enableLabel:!1,labelSkipWidth:16,labelSkipHeight:16,keys:Object.keys(f),labelTextColor:"inherit:darker(1.4)",colors:function(e){var t=e.id;return e.data["".concat(t,"Color")]},axisLeft:{format:function(e){return i.functionsUtil.abbreviateNumber(e,e<1?3:0)},orient:"left",tickSize:0,tickPadding:10,tickRotation:0,legend:"",legendOffset:-65,tickValues:T,legendPosition:"middle"},gridYValues:T,axisBottom:i.props.isMobile?null:{legend:"",format:function(e){if(Y++%3===0)return m()(e,"YYYY/MM/DD HH:mm").format("MMM DD")},tickSize:0,tickPadding:10,orient:"bottom-left",legendOffset:36,legendPosition:"middle",tickValues:"every 3 days"},legends:[{dataFrom:"keys",itemWidth:i.props.isMobile?70:80,itemHeight:18,translateX:i.props.isMobile?-35:0,translateY:i.props.isMobile?40:65,symbolSize:10,itemsSpacing:5,direction:"row",anchor:"bottom-left",symbolShape:"circle",itemTextColor:u.a.colors.legend,effects:[{on:"hover",style:{itemTextColor:"#000"}}]}],theme:{axis:{ticks:{text:{fontSize:i.props.isMobile?12:14,fontWeight:600,fill:u.a.colors.legend,fontFamily:u.a.fonts.sansSerif}}},grid:{line:{stroke:u.a.colors.lineChartStroke,strokeDasharray:"10 6"}},legends:{text:{fontSize:i.props.isMobile?12:14,fontWeight:500,fontFamily:u.a.fonts.sansSerif}}},pointColor:{from:"color",modifiers:[]},margin:i.props.isMobile?{top:20,right:20,bottom:40,left:65}:{top:20,right:40,bottom:70,left:60},tooltip:function(e){var t=e.id,o=e.value,a=e.color,n=i.functionsUtil.formatMoney(o,0);return y.a.createElement("table",{style:{width:"100%",borderCollapse:"collapse"}},y.a.createElement("tbody",null,y.a.createElement("tr",null,y.a.createElement("td",{style:{padding:"3px 5px"}},y.a.createElement("span",{style:{display:"block",width:"12px",height:"12px",background:a}})),y.a.createElement("td",{style:{padding:"3px 5px",textTransform:"capitalize"}},t),y.a.createElement("td",{style:{padding:"3px 5px"}},y.a.createElement("strong",null,n," ",i.props.selectedToken)))))}},e.abrupt("break",119);case 61:return f={},g={},r.forEach(function(e,t){var o=m()(1e3*e.timestamp).format("YYYY/MM/DD"),a={date:m()(1e3*e.timestamp).format("YYYY/MM/DD HH:mm")};g[o]&&(a=g[o]);var n=e.protocolsData.reduce(function(e,t){var o=i.functionsUtil.fixTokenDecimals(t.allocation,i.props.tokenConfig.decimals);return i.functionsUtil.BNify(e).plus(o)},0);e.protocolsData.forEach(function(e){var t=i.functionsUtil.BNify(e.rate).eq(0),o=i.props.tokenConfig.protocols.filter(function(t){return t.address.toLowerCase()===e.protocolAddr.toLowerCase()})[0].name;if(t)void 0!==typeof a[o]&&(a[o]=0);else{var s=i.functionsUtil.fixTokenDecimals(e.allocation,i.props.tokenConfig.decimals),r=parseFloat(s.div(n).times(100));f[o]=1,a[o]=r,a["".concat(o,"Color")]="hsl("+x.a.stats.protocols[o].color.hsl.join(",")+")"}}),g[o]=a}),D=Object.values(g),E=h.a,Y=0,w={padding:.2,animate:!1,indexBy:"date",data:D,enableLabel:!1,labelSkipWidth:16,labelSkipHeight:16,keys:Object.keys(f),labelTextColor:"inherit:darker(1.4)",margin:i.props.isMobile?{top:20,right:20,bottom:40,left:50}:{top:20,right:40,bottom:40,left:60},colors:function(e){var t=e.id;return e.data["".concat(t,"Color")]},axisLeft:{format:function(e){return parseInt(e)+"%"}},axisBottom:i.props.isMobile?null:{legend:"",format:function(e){if(Y++%3===0)return m()(e,"YYYY/MM/DD HH:mm").format("MMM DD")},orient:"bottom",legendOffset:36,legendPosition:"middle",tickValues:"every 3 days"},tooltip:function(e){var t=e.id,o=e.value,a=e.color,n=100===parseInt(o)?i.functionsUtil.formatMoney(o,0):i.functionsUtil.formatMoney(o,2);return y.a.createElement("table",{style:{width:"100%",borderCollapse:"collapse"}},y.a.createElement("tbody",null,y.a.createElement("tr",null,y.a.createElement("td",{style:{padding:"3px 5px"}},y.a.createElement("span",{style:{display:"block",width:"12px",height:"12px",background:a}})),y.a.createElement("td",{style:{padding:"3px 5px",textTransform:"capitalize"}},t),y.a.createElement("td",{style:{padding:"3px 5px"}},y.a.createElement("strong",null,n,"%")))))}},e.abrupt("break",119);case 69:for(C=0,i.props.tokenConfig.protocols.forEach(function(e,t){D.filter(function(t){return t.name===e.name}).length||D.push({id:e.name,color:"hsl("+x.a.stats.protocols[e.name].color.hsl.join(",")+")",data:r.map(function(t,o){return t.protocolsData.filter(function(t,i){return t.protocolAddr.toLowerCase()===e.address.toLowerCase()}).map(function(e,o){if(!i.functionsUtil.BNify(e.rate).eq(0)){var a=m()(1e3*t.timestamp).format("YYYY/MM/DD HH:mm"),n=parseFloat(i.functionsUtil.fixTokenDecimals(e.rate,18));return C=Math.max(C,n),{x:a,y:n}}})[0]}).filter(function(e){return void 0!==e})})}),D.push({id:"Idle",color:"hsl("+x.a.stats.protocols.idle.color.hsl.join(",")+")",data:r.map(function(e,t){var o=m()(1e3*e.timestamp).format("YYYY/MM/DD HH:mm"),a=parseFloat(i.functionsUtil.fixTokenDecimals(e.idleRate,18));return C=Math.max(C,a),{x:o,y:a}})}),E=b.a,v=parseFloat(C/s),T=[0],B=1;B<=5;B++)T.push(B*v);return w={xScale:{type:"time",format:"%Y/%m/%d %H:%M"},xFormat:"time:%b %d %H:%M",yFormat:function(e){return parseFloat(e).toFixed(2)+"%"},yScale:{type:"linear",stacked:!1},axisLeft:{legend:"",tickSize:0,orient:"left",tickPadding:10,tickRotation:0,legendOffset:-70,tickValues:T,legendPosition:"middle",format:function(e){return parseFloat(e).toFixed(1)+"%"}},axisBottom:i.props.isMobile?null:{tickSize:0,format:"%b %d",tickPadding:15,tickValues:i.props.isMobile?"every 4 days":i.props.showAdvanced?"every 3 days":"every 2 days",orient:"bottom",legend:"",legendOffset:0,legendPosition:"middle"},gridYValues:T,pointSize:0,useMesh:!0,animate:!1,pointLabel:"y",curve:"linear",enableArea:!1,enableSlices:"x",enableGridX:!1,enableGridY:!0,pointBorderWidth:1,colors:function(e){return e.color},pointLabelYOffset:-12,legends:[{itemWidth:i.props.isMobile?70:80,itemHeight:18,translateX:i.props.isMobile?-35:0,translateY:i.props.isMobile?40:65,symbolSize:10,itemsSpacing:0,direction:"row",anchor:"bottom-left",symbolShape:"circle",itemTextColor:u.a.colors.legend,effects:[{on:"hover",style:{itemTextColor:"#000"}}]}],theme:{axis:{ticks:{text:{fontSize:i.props.isMobile?12:14,fontWeight:600,fill:u.a.colors.legend,fontFamily:u.a.fonts.sansSerif}}},grid:{line:{stroke:u.a.colors.lineChartStroke,strokeDasharray:"10 6"}},legends:{text:{fontSize:i.props.isMobile?12:14,fontWeight:500,fontFamily:u.a.fonts.sansSerif}}},pointColor:{from:"color",modifiers:[]},margin:i.props.isMobile?{top:20,right:20,bottom:40,left:65}:{top:20,right:40,bottom:70,left:70},sliceTooltip:function(e){var i=e.slice,a=i.points[0];return y.a.createElement(o,{point:a},"object"===typeof i.points&&i.points.length&&i.points.map(function(e){var i=e.serieId,o=e.data.yFormatted;return y.a.createElement(t,{key:e.id,color:e.color,label:i,value:o})}))}},e.abrupt("break",119);case 78:for(W=0,C=0,i.props.tokenConfig.protocols.forEach(function(e,t){D.filter(function(t){return t.name===e.name}).length||D.push({id:e.name,color:"hsl("+x.a.stats.protocols[e.name].color.hsl.join(",")+")",data:r.map(function(t,i){return t.protocolsData.filter(function(t,i){return t.protocolAddr.toLowerCase()===e.address.toLowerCase()}).map(function(e,i){var o=m()(1e3*t.timestamp).format("YYYY/MM/DD HH:mm"),a=parseFloat(e.defiScore);return a=isNaN(a)||!a?W:a,W=a,C=Math.max(C,a),{x:o,y:a}})[0]}).filter(function(e){return void 0!==e})})}),D.push({id:"Idle",color:"hsl("+x.a.stats.protocols.idle.color.hsl.join(",")+")",data:r.map(function(e,t){var i=m()(1e3*e.timestamp).format("YYYY/MM/DD HH:mm"),o=parseFloat(e.idleScore);return o=isNaN(o)||!o?W:o,W=o,C=Math.max(C,o),{x:i,y:o}})}),E=b.a,v=parseFloat(C/s),T=[0],N=1;N<=5;N++)T.push(N*v);return w={xScale:{type:"time",format:"%Y/%m/%d %H:%M"},xFormat:"time:%b %d %H:%M",yFormat:function(e){return parseFloat(e).toFixed(1)},yScale:{type:"linear",stacked:!1},axisLeft:{legend:"",tickSize:0,orient:"left",tickPadding:10,tickRotation:0,legendOffset:-70,tickValues:T,legendPosition:"middle",format:function(e){return parseFloat(e).toFixed(1)}},axisBottom:i.props.isMobile?null:{tickSize:0,format:"%b %d",tickPadding:15,tickValues:i.props.isMobile?"every 4 days":i.props.showAdvanced?"every 3 days":"every 2 days",orient:"bottom",legend:"",legendOffset:0,legendPosition:"middle"},gridYValues:T,pointSize:0,useMesh:!0,animate:!1,pointLabel:"y",curve:"linear",enableArea:!1,enableSlices:"x",enableGridX:!1,enableGridY:!0,pointBorderWidth:1,colors:function(e){return e.color},pointLabelYOffset:-12,legends:[{itemWidth:i.props.isMobile?70:80,itemHeight:18,translateX:i.props.isMobile?-35:0,translateY:i.props.isMobile?40:65,symbolSize:10,itemsSpacing:0,direction:"row",anchor:"bottom-left",symbolShape:"circle",itemTextColor:u.a.colors.legend,effects:[{on:"hover",style:{itemTextColor:"#000"}}]}],theme:{axis:{ticks:{text:{fontSize:i.props.isMobile?12:14,fontWeight:600,fill:u.a.colors.legend,fontFamily:u.a.fonts.sansSerif}}},grid:{line:{stroke:u.a.colors.lineChartStroke,strokeDasharray:"10 6"}},legends:{text:{fontSize:i.props.isMobile?12:14,fontWeight:500,fontFamily:u.a.fonts.sansSerif}}},pointColor:{from:"color",modifiers:[]},margin:i.props.isMobile?{top:20,right:20,bottom:40,left:65}:{top:20,right:40,bottom:70,left:70},sliceTooltip:function(e){var i=e.slice,a=i.points[0];return y.a.createElement(o,{point:a},"object"===typeof i.points&&i.points.length&&i.points.map(function(e){var i=e.serieId,o=e.data.yFormatted;return y.a.createElement(t,{key:e.id,color:e.color,label:i,value:o})}))}},e.abrupt("break",119);case 88:for(M=0,C=0,_=null,G=null,X=i.functionsUtil.BNify(1),q=i.functionsUtil.BNify(1),J=i.functionsUtil.BNify(0),O=r.map(function(e,t){var o=0,a=0,n=m()(1e3*e.timestamp).format("YYYY/MM/DD HH:mm"),s=i.functionsUtil.fixTokenDecimals(e.idleRate,18).div(100);if(J=J.plus(s.times(100)),_){var r=(e.timestamp-G.timestamp)/86400,l=q.times(_.times(r).div(365)),p=(q=q.plus(l)).div(X).minus(1).times(100);o=parseFloat(p),a=J.div(t+1).toFixed(2)}G=e,_=s,null===j&&(j=parseInt(e.blocknumber)),C=Math.max(C,o);var d=Math.floor(M/c*100),f=e.blocknumber;return M++,{x:n,y:o,apy:a,blocknumber:f,itemPos:d}}),d.additionalProtocols&&d.additionalProtocols.length>0&&d.additionalProtocols.forEach(function(e){var t=i.props.tokenConfig.protocols.find(function(t){return t.name===e.protocol});t&&(e.enabled=!0,e.address=t.address,p.unshift(e))}),p.forEach(function(e){var t=x.a.stats.protocols[e.name],o=t.rateField?t.rateField:"rate",a={id:t.label,color:"hsl("+t.color.hsl.join(",")+")",data:[]};M=0,_=null,G=null;var n=0,s=null,l=null;J=i.functionsUtil.BNify(0),X=i.functionsUtil.BNify(1),q=i.functionsUtil.BNify(1),r.forEach(function(t,r){var p=t.protocolsData.find(function(t,i){return t.protocolAddr.toLowerCase()===e.address.toLowerCase()});if(p){s||(s=p);var d="object"===typeof o&&o.length?o.reduce(function(e,t){return p[t]?i.functionsUtil.BNify(e).plus(i.functionsUtil.BNify(p[t])):i.functionsUtil.BNify(e)},0):i.functionsUtil.BNify(p[o]);if(!d.eq(0)){if(null===l&&(l=parseInt(t.blocknumber))>j){var f=O.find(function(e){return e.blocknumber>=l});f&&(n=f.y)}var u,h=0,b=0,g=m()(1e3*t.timestamp).format("YYYY/MM/DD HH:mm"),y=i.functionsUtil.fixTokenDecimals(d,18).div(100);if(J=J.plus(y.times(100)),G){var k=(t.timestamp-G.timestamp)/86400,x=q.times(_.times(k).div(365)),v=(q=q.plus(x)).div(X).minus(1).times(100);h=parseFloat(v)+n,b=J.div(r+1).toFixed(2)}G=t,_=y,null===j&&(j=parseInt(t.blocknumber)),C=Math.max(C,h);var S=Math.floor(M/c*100);M++,u={x:g,y:h,apy:b,itemPos:S},M++,a.data.push(u)}}}),D.push(a)}),v=parseFloat(C/s),T=[0],K=1;K<=5;K++)T.push(K*v);return D.push({id:"Idle",color:"hsl("+x.a.stats.protocols.idle.color.hsl.join(",")+")",data:O}),E=b.a,w={xScale:{type:"time",format:"%Y/%m/%d %H:%M"},xFormat:"time:%b %d %H:%M",yFormat:function(e){return parseFloat(e).toFixed(3)+"%"},yScale:{type:"linear",stacked:!1},axisLeft:{legend:"",tickSize:0,orient:"left",tickPadding:10,tickRotation:0,legendOffset:-70,tickValues:T,legendPosition:"middle",format:function(e){return parseFloat(e).toFixed(2)+"%"}},axisBottom:i.props.isMobile?null:{legend:"",tickSize:0,format:"%b %d",tickPadding:10,legendOffset:0,orient:"bottom",legendPosition:"middle",tickValues:i.props.isMobile?"every 4 days":i.props.showAdvanced?"every 3 days":"every 2 days"},gridYValues:T,pointSize:0,useMesh:!0,animate:!1,pointLabel:"y",curve:"monotoneX",enableArea:!1,enableSlices:"x",enableGridX:!1,enableGridY:!0,pointBorderWidth:1,colors:function(e){return e.color},pointLabelYOffset:-12,legends:[{itemHeight:18,itemWidth:i.props.isMobile?70:100,translateX:i.props.isMobile?-35:0,translateY:i.props.isMobile?40:65,symbolSize:10,itemsSpacing:5,direction:"row",anchor:"bottom-left",symbolShape:"circle",itemTextColor:u.a.colors.legend,effects:[{on:"hover",style:{itemTextColor:"#000"}}]}],theme:{axis:{ticks:{text:{fontSize:i.props.isMobile?12:14,fontWeight:600,fill:u.a.colors.legend,fontFamily:u.a.fonts.sansSerif}}},grid:{line:{stroke:u.a.colors.lineChartStroke,strokeDasharray:"10 6"}},legends:{text:{fontSize:i.props.isMobile?12:14,fontWeight:500,fontFamily:u.a.fonts.sansSerif}}},pointColor:{from:"color",modifiers:[]},margin:i.props.isMobile?{top:20,right:20,bottom:40,left:65}:{top:20,right:40,bottom:80,left:80},sliceTooltip:function(e){var i=e.slice,a=i.points[0];return y.a.createElement(o,{point:a},"object"===typeof i.points&&i.points.length&&i.points.map(function(e){var i=e.serieId,o=e.data.yFormatted,a=e.data.apy;return y.a.createElement(t,{key:e.id,label:i,color:e.color,value:"".concat(o," <small>(").concat(a,"% APY)</small>")})}))}},e.abrupt("break",119);case 105:return C=0,Q=null,O=r.map(function(e,t){var o=0,a=0,n=0,s=m()(1e3*e.timestamp).format("YYYY/MM/DD HH:mm"),l=i.functionsUtil.fixTokenDecimals(e.idlePrice,i.props.tokenConfig.decimals);Q?(o=parseFloat(l.div(Q).minus(1).times(100)),n=(e.timestamp-r[0].timestamp)/86400,a=l.div(Q).minus(1).times(100).times(365).div(n).toFixed(2)):Q=l;null===j&&(j=parseInt(e.blocknumber)),C=Math.max(C,o);var p=Math.floor(M/c*100),d=e.blocknumber;return M++,{x:s,y:o,apy:a,blocknumber:d,itemPos:p}}),d.additionalProtocols&&d.additionalProtocols.length>0&&d.additionalProtocols.forEach(function(e){var t=i.props.tokenConfig.protocols.find(function(t){return t.name===e.protocol});t&&(e.enabled=!0,e.address=t.address,p.unshift(e))}),e.next=111,i.functionsUtil.asyncForEach(p,function(){var e=Object(n.a)(a.a.mark(function e(t){var o,s,l,p,d,f,u,h;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=x.a.stats.protocols[t.name],s=o.rateField?o.rateField:"rate",l={id:o.label,color:"hsl("+o.color.hsl.join(",")+")",data:[]},M=0,p=0,Q=null,d=null,f=null,u=null,h=null,e.next=12,i.functionsUtil.asyncForEach(r,function(){var e=Object(n.a)(a.a.mark(function e(n){var b,g,y,k,v,S,D,w,E,T,Y,U;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(b=n.protocolsData.find(function(e,i){return e.protocolAddr.toLowerCase()===t.address.toLowerCase()}))&&b[s]&&(u||(u=b),i.functionsUtil.BNify(b[s]).eq(0)||(null===h&&(h=parseInt(n.blocknumber))>j&&(g=O.find(function(e){return e.blocknumber>=h}))&&(p=g.y),{},k=b.price,v=i.functionsUtil.fixTokenDecimals(k,t.decimals),S=m()(1e3*n.timestamp).format("YYYY/MM/DD HH:mm"),o&&o.data&&o.data[t.address.toLowerCase()]&&o.data[t.address.toLowerCase()][n.blocknumber]&&(k=i.functionsUtil.BNify(x.a.stats.protocols[t.name].data[t.address.toLowerCase()][n.blocknumber]),v=i.functionsUtil.fixTokenDecimals(k,t.decimals)),D=p,w=0,Q?(v.lt(f)?(Q=v,E=l.data[l.data.length-1].y-l.data[l.data.length-2].y,D=d.y+E,p=D):D+=parseFloat(v.div(Q).minus(1).times(100)),T=(n.timestamp-r[0].timestamp)/86400,Y=v.div(Q).minus(1).times(100),w=Y.times(365).div(T).toFixed(2)):Q=v,D=Math.max(0,D),C=Math.max(C,D),U=Math.floor(M/c*100),M++,d=y={x:S,y:D,apy:w,itemPos:U},l.data.push(y),f=v));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 12:D.push(l);case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 111:for(v=parseFloat(C/s),T=[0],Z=1;Z<=5;Z++)T.push(Z*v);return D.push({id:"Idle",color:"hsl("+x.a.stats.protocols.idle.color.hsl.join(",")+")",data:O}),E=b.a,w={xScale:{type:"time",format:"%Y/%m/%d %H:%M"},xFormat:"time:%b %d %H:%M",yFormat:function(e){return parseFloat(e).toFixed(3)+"%"},yScale:{type:"linear",stacked:!1},axisLeft:{legend:"",tickSize:0,orient:"left",tickPadding:10,tickRotation:0,legendOffset:-70,tickValues:T,legendPosition:"middle",format:function(e){return parseFloat(e).toFixed(2)+"%"}},axisBottom:i.props.isMobile?null:{legend:"",tickSize:0,format:"%b %d",tickPadding:10,legendOffset:0,orient:"bottom",legendPosition:"middle",tickValues:i.props.isMobile?"every 4 days":i.props.showAdvanced?"every 3 days":"every 2 days"},gridYValues:T,pointSize:0,useMesh:!0,animate:!1,pointLabel:"y",curve:"monotoneX",enableArea:!1,enableSlices:"x",enableGridX:!1,enableGridY:!0,pointBorderWidth:1,colors:function(e){return e.color},pointLabelYOffset:-12,legends:[{itemHeight:18,itemWidth:i.props.isMobile?70:100,translateX:i.props.isMobile?-35:0,translateY:i.props.isMobile?40:65,symbolSize:10,itemsSpacing:5,direction:"row",anchor:"bottom-left",symbolShape:"circle",itemTextColor:u.a.colors.legend,effects:[{on:"hover",style:{itemTextColor:"#000"}}]}],theme:{axis:{ticks:{text:{fontSize:i.props.isMobile?12:14,fontWeight:600,fill:u.a.colors.legend,fontFamily:u.a.fonts.sansSerif}}},grid:{line:{stroke:u.a.colors.lineChartStroke,strokeDasharray:"10 6"}},legends:{text:{fontSize:i.props.isMobile?12:14,fontWeight:500,fontFamily:u.a.fonts.sansSerif}}},pointColor:{from:"color",modifiers:[]},margin:i.props.isMobile?{top:20,right:20,bottom:40,left:65}:{top:20,right:40,bottom:80,left:80},sliceTooltip:function(e){var i=e.slice,a=i.points[0];return y.a.createElement(o,{point:a},"object"===typeof i.points&&i.points.length&&i.points.map(function(e){var i=e.serieId,o=e.data.yFormatted,a=e.data.apy;return y.a.createElement(t,{key:e.id,label:i,color:e.color,value:"".concat(o," <small>(").concat(a,"% APY)</small>")})}))}},e.abrupt("break",119);case 118:return e.abrupt("break",119);case 119:i.setState({chartType:E,chartProps:w,chartData:D});case 120:case"end":return e.stop()}},e,this)})),i}return Object(p.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=Object(n.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({chartData:null,chartType:null,chartProps:null}),this.loadUtils(),this.loadApiData();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(n.a)(a.a.mark(function e(t){var i,o,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=t.showAdvanced!==this.props.showAdvanced,o=t.apiResults!==this.props.apiResults,n=t.selectedToken!==this.props.selectedToken||JSON.stringify(t.tokenConfig)!==JSON.stringify(this.props.tokenConfig),(o||i||n)&&this.componentDidMount();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"loadUtils",value:function(){this.functionsUtil?this.functionsUtil.setProps(this.props):this.functionsUtil=new v.a(this.props)}},{key:"render",value:function(){return y.a.createElement(M.a,Object.assign({showLoader:!0},this.state.chartProps,{height:this.props.height,type:this.state.chartType,data:this.state.chartData,width:this.state.chartWidth,isMobile:this.props.isMobile,parentId:this.props.parentId,parentIdHeight:this.props.parentIdHeight}))}}]),t}(g.Component),w=i(163),E=y.a.lazy(function(){return i.e(28).then(i.bind(null,4950))}),T=y.a.lazy(function(){return i.e(29).then(i.bind(null,311))}),C=y.a.lazy(function(){return i.e(0).then(i.bind(null,4792))}),Y=y.a.lazy(function(){return i.e(6).then(i.bind(null,236))}),O=y.a.lazy(function(){return Promise.resolve().then(i.bind(null,32))}),j=y.a.lazy(function(){return Promise.resolve().then(i.bind(null,261))}),U=y.a.lazy(function(){return Promise.resolve().then(i.bind(null,309))}),P=y.a.lazy(function(){return i.e(30).then(i.bind(null,172))}),I=y.a.lazy(function(){return Promise.resolve().then(i.bind(null,2431))}),F=y.a.lazy(function(){return Promise.resolve().then(i.bind(null,2432))}),R=y.a.lazy(function(){return Promise.all([i.e(39),i.e(31)]).then(i.bind(null,4951))}),V=y.a.lazy(function(){return i.e(32).then(i.bind(null,4952))}),z=y.a.lazy(function(){return i.e(33).then(i.bind(null,1903))}),A=function(e){function t(){var e,i;Object(s.a)(this,t);for(var o=arguments.length,r=new Array(o),p=0;p<o;p++)r[p]=arguments[p];return(i=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={aum:null,apr:null,days:"-",delta:null,earning:null,minDate:null,maxDate:null,carouselMax:1,rebalances:"-",buttonGroups:[],apiResults:null,carouselIndex:0,idleVersion:null,statsVersions:{},minStartTime:null,endTimestamp:null,showAdvanced:!0,govTokensPool:null,unlentBalance:null,quickSelection:null,startTimestamp:null,endTimestampObj:null,shouldRebalance:null,carouselOffsetLeft:0,startTimestampObj:null,showRefreshIdleSpeed:!1,apiResults_unfiltered:null,dateRangeModalOpened:!1},i.quickSelections={day:"Last day",week:"Last week",weeks:"Last 2 weeks",month:"Last month"},i.functionsUtil=null,i.componentUnmounted=null,i.setDateRange=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=m()(x.a.stats.tokens[i.props.selectedToken].startTimestamp),a=m()(e.startDate).isSameOrAfter(o)?m()(e.startDate):o,n=m()(e.endDate);a.isSame(n)&&n.add(1,"day"),n=m()(n.format("YYYY-MM-DD 23:59"),"YYYY-MM-DD HH:mm"),a.isBefore(i.state.minStartTime)&&(a=i.state.minStartTime),n.isAfter(i.state.maxEndDate)&&(n=i.state.maxEndDate);var s=parseInt(a._d.getTime()/1e3),r={minStartTime:o,endTimestamp:parseInt(n._d.getTime()/1e3),quickSelection:t,startTimestamp:s,endTimestampObj:n,startTimestampObj:a};return i.setStateSafe(r),r},i.toggleAdvancedCharts=function(e){e.preventDefault(),i.setStateSafe({showAdvanced:!i.state.showAdvanced})},i.setDateRangeModal=function(e){e!==i.state.dateRangeModalOpened&&i.setStateSafe({dateRangeModalOpened:e})},i.filterTokenData=function(e){return e.filter(function(e,t){return(!i.state.startTimestamp||e.timestamp>=i.state.startTimestamp)&&(!i.state.endTimestamp||e.timestamp<=i.state.endTimestamp)})},i.setIdleVersion=function(e){i.setStateSafe({idleVersion:e})},i.loadApiData=Object(n.a)(a.a.mark(function e(){var t,o,n,s,r,l,c,p,d,f,u,h,b,g,y,k,v,M,S,D,w,E,T,C,Y,O,j;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.props.selectedToken&&i.props.tokenConfig){e.next=2;break}return e.abrupt("return",!1);case 2:return t=i.state.minDate?parseInt(i.functionsUtil.strToMoment(i.functionsUtil.strToMoment(i.state.minDate).format("DD/MM/YYYY 00:00:00"),"DD/MM/YYYY HH:mm:ss")._d.getTime()/1e3):null,o=i.state.maxDate?parseInt(i.functionsUtil.strToMoment(i.functionsUtil.strToMoment(i.state.maxDate).format("DD/MM/YYYY 23:59:59"),"DD/MM/YYYY HH:mm:ss")._d.getTime()/1e3):null,n=["v3","v4"].includes(i.state.idleVersion)&&"risk"===i.props.selectedStrategy,e.next=7,i.functionsUtil.getTokenApiData(i.props.tokenConfig.address,n,t,o,!0,7200);case 7:if(s=e.sent,(r=i.filterTokenData(s))&&s&&r.length&&s.length){e.next=11;break}return e.abrupt("return",!1);case 11:return l=r[0],c=Object.values(r).pop(),window.moment=m.a,0===(p=(c.timestamp-l.timestamp)/86400)&&(p=1),d=null,f="N/A",u=i.functionsUtil.fixTokenDecimals(c.idleSupply,18),h=i.functionsUtil.fixTokenDecimals(l.idlePrice,i.props.tokenConfig.decimals),b=i.functionsUtil.fixTokenDecimals(c.idlePrice,i.props.tokenConfig.decimals),g=u.times(b),e.next=24,i.functionsUtil.convertTokenBalance(g,i.props.selectedToken,i.props.tokenConfig,n);case 24:return g=e.sent,y=i.props.tokenConfig.protocols.filter(function(e){return"compound"===e.name})[0],k=y?l.protocolsData.filter(function(e){return e.protocolAddr.toLowerCase()===y.address.toLowerCase()})[0]:null,v=y?c.protocolsData.filter(function(e){return e.protocolAddr.toLowerCase()===y.address.toLowerCase()})[0]:null,"v4"===i.state.idleVersion?(d=(d=r.reduce(function(e,t){var o=i.functionsUtil.fixTokenDecimals(t.idleRate,18);return i.functionsUtil.BNify(e).plus(o)},0)).div(r.length),y&&(M=x.a.stats.protocols.compoundWithCOMP,S=M.rateField?M.rateField:"rate",D=(D=r.reduce(function(e,t){var o=t.protocolsData.find(function(e,t){return e.protocolAddr.toLowerCase()===y.address.toLowerCase()}),a="object"===typeof S&&S.length?S.reduce(function(e,t){return o[t]?i.functionsUtil.BNify(e).plus(i.functionsUtil.BNify(o[t])):i.functionsUtil.BNify(e)},0):i.functionsUtil.BNify(o[S]);return a=i.functionsUtil.fixTokenDecimals(a,18),i.functionsUtil.BNify(e).plus(a)},0)).div(r.length),f=d.minus(D),parseFloat(f)<0&&(f=0),f=f.toFixed(2)),d=d.toFixed(2)):(w=b.div(h).minus(1).times(100),d=w.times(365).div(p).toFixed(2),k&&v&&(E=i.functionsUtil.fixTokenDecimals(k.price,i.props.tokenConfig.decimals),T=i.functionsUtil.fixTokenDecimals(v.price,i.props.tokenConfig.decimals),C=T.div(E).minus(1).times(100),f=w.minus(C).times(365).div(p),parseFloat(f)<0&&(f=0),f=f.toFixed(2))),Y=0,r.forEach(function(e,t){if(t){var o=r[t-1],a=e.protocolsData.reduce(function(e,t){var o=i.functionsUtil.fixTokenDecimals(t.allocation,i.props.tokenConfig.decimals);return i.functionsUtil.BNify(e).plus(o)},0),n=o.protocolsData.reduce(function(e,t){var o=i.functionsUtil.fixTokenDecimals(t.allocation,i.props.tokenConfig.decimals);return i.functionsUtil.BNify(e).plus(o)},0),s=!1;e.protocolsData.forEach(function(e){if(!s){var t=o.protocolsData.find(function(t){return t.protocolAddr.toLowerCase()===e.protocolAddr.toLowerCase()}),r=i.functionsUtil.fixTokenDecimals(e.allocation,i.props.tokenConfig.decimals),l=i.functionsUtil.fixTokenDecimals(t.allocation,i.props.tokenConfig.decimals);parseInt(parseFloat(r.div(a).times(100)))!==parseInt(parseFloat(l.div(n).times(100)))&&(Y++,s=!0)}})}}),e.next=33,i.functionsUtil.getGovTokenPool(null,null,"DAI");case 33:return(O=e.sent)&&(g=g.plus(O)),g=i.functionsUtil.formatMoney(parseFloat(g)),e.next=38,i.functionsUtil.getUnlentBalance(i.props.tokenConfig);case 38:(j=e.sent)&&(j=i.functionsUtil.formatMoney(parseFloat(j))),i.setStateSafe({aum:g,apr:d,days:p,delta:f,apiResults:r,rebalances:Y,govTokensPool:O,unlentBalance:j,apiResults_unfiltered:s});case 41:case"end":return e.stop()}},e,this)})),i.selectToken=function(){var e=Object(n.a)(a.a.mark(function e(t,o){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.props.setStrategyToken(t,o);case 2:i.props.changeToken(o);case 3:case"end":return e.stop()}},e,this)}));return function(t,i){return e.apply(this,arguments)}}(),i.handleCarousel=function(e){var t=i.state.carouselIndex;"next"===e&&t<i.state.carouselMax?t++:"back"===e&&t>0&&t--;var o=window.jQuery("#carousel-cursor > div:eq(".concat(t,")")),a=-parseFloat(o.position().left)+"px";i.setStateSafe({carouselIndex:t,carouselOffsetLeft:a})},i}return Object(p.a)(t,e),Object(r.a)(t,[{key:"loadUtils",value:function(){this.functionsUtil?this.functionsUtil.setProps(this.props):this.functionsUtil=new v.a(this.props)}},{key:"componentWillMount",value:function(){var e=Object(n.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadUtils(),e.next=3,this.loadParams();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.componentUnmounted=!0}},{key:"setStateSafe",value:function(){var e=Object(n.a)(a.a.mark(function e(t){var i,o=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=o.length>1&&void 0!==o[1]?o[1]:null,this.componentUnmounted){e.next=3;break}return e.abrupt("return",this.setState(t,i));case 3:return e.abrupt("return",null);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"showRefreshIdleSpeed",value:function(){this.setState({showRefreshIdleSpeed:!0})}},{key:"getLatestAvailableVersion",value:function(){var e=this,t=x.a.stats.versions,i=null;return Object.keys(t).forEach(function(o){t[o].enabledStrategies.includes(e.props.selectedStrategy)&&(i=o)}),i}},{key:"getVersionInfo",value:function(e){if(e||(e=this.state.idleVersion),!x.a.stats.versions[e])return null;var t=Object.assign({},x.a.stats.versions[e]);if(t.strategiesParams&&t.strategiesParams[this.props.selectedStrategy]){var i=t.strategiesParams[this.props.selectedStrategy];Object.keys(i).forEach(function(e){t[e]=i[e]})}return t}},{key:"loadParams",value:function(){var e=Object(n.a)(a.a.mark(function e(){var t,i,o,n,s,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.selectedToken&&this.props.tokenConfig){e.next=2;break}return e.abrupt("return",!1);case 2:if(t={},i=this.props.match.params,o=Object.keys(this.props.availableTokens),i.customToken&&-1!==o.indexOf(i.customToken.toUpperCase())?t.selectedToken=i.customToken.toUpperCase():t.selectedToken=this.props.selectedToken.toUpperCase(),t.tokenConfig=this.props.availableTokens[t.selectedToken],t.minStartTime=m()(x.a.stats.tokens[this.props.selectedToken].startTimestamp,"YYYY-MM-DD"),t.maxEndDate=m()(),t.endTimestampObj=m()(m()().format("YYYY-MM-DD 23:59"),"YYYY-MM-DD HH:mm"),t.latestVersion=this.getLatestAvailableVersion(),t.idleVersion=null===this.state.idleVersion?t.latestVersion:this.state.idleVersion,n=this.getVersionInfo(t.idleVersion),t.idleVersion&&n.endTimestamp&&(s=m()(m()(1e3*n.endTimestamp).format("YYYY-MM-DD HH:mm"),"YYYY-MM-DD HH:mm"),t.endTimestampObj.isAfter(s)&&(t.endTimestampObj=s,t.endTimestamp=parseInt(t.endTimestampObj._d.getTime()/1e3)),t.maxEndDate&&!t.maxEndDate.isAfter(s)||(t.maxEndDate=s)),t.endTimestamp=parseInt(t.endTimestampObj._d.getTime()/1e3),t.startTimestampObj=t.endTimestampObj.clone().subtract(1,"month"),t.startTimestamp=parseInt(t.startTimestampObj._d.getTime()/1e3),t.idleVersion&&n.startTimestamp&&(r=m()(m()(1e3*n.startTimestamp).format("YYYY-MM-DD HH:mm"),"YYYY-MM-DD HH:mm"),t.startTimestampObj.isBefore(r)&&(t.startTimestampObj=r,t.startTimestamp=parseInt(t.startTimestampObj._d.getTime()/1e3)),t.minStartTime.isBefore(r)&&(t.minStartTime=r)),t.minDate=t.minStartTime._d,t.maxDate=t.maxEndDate._d,t===this.state){e.next=23;break}return e.next=23,this.setStateSafe(t);case 23:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(n.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.web3){e.next=3;break}return this.props.initWeb3(),e.abrupt("return",!1);case 3:return(t=document.createElement("style")).id="crisp-custom-style",t.type="text/css",t.innerHTML="\n    .crisp-client{\n      display:none !important;\n    }",document.body.appendChild(t),this.loadUtils(),e.next=11,this.loadParams();case 11:this.loadApiData(),this.loadCarousel();case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"loadCarousel",value:function(){var e=this.props.isMobile?3:2;this.setStateSafe({carouselMax:e})}},{key:"componentDidUpdate",value:function(){var e=Object(n.a)(a.a.mark(function e(t,i){var o,n,s,r,l;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.contractsInitialized!==this.props.contractsInitialized,n=t.selectedStrategy!==this.props.selectedStrategy,s=t.selectedToken!==this.props.selectedToken||JSON.stringify(t.tokenConfig)!==JSON.stringify(this.props.tokenConfig),r=i.startTimestamp!==this.state.startTimestamp||i.endTimestamp!==this.state.endTimestamp,l=i.idleVersion!==this.state.idleVersion,t.isMobile!==this.props.isMobile&&this.loadCarousel(),!(o||s||n||l)){e.next=12;break}return e.next=10,this.componentDidMount();case 10:e.next=13;break;case 12:r&&this.loadApiData();case 13:case"end":return e.stop()}},e,this)}));return function(t,i){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=y.a.createElement(w.a,{textProps:{textSize:4,fontWeight:2},loaderProps:{mb:3,size:"40px"},flexProps:{minHeight:"70vh",aligItems:"center",flexDirection:"column"},text:"Loading Stats..."}),i=this.functionsUtil.getGlobalConfig(["govTokens","IDLE","enabled"]),o=this.functionsUtil.getGlobalConfig(["messages","apyLong"]);if(!this.props.availableStrategies)return t;if(this.props.selectedToken){var a=Object.keys(x.a.stats.versions).filter(function(t){var i=e.getVersionInfo(t);return i.enabledTokens.includes(e.props.selectedToken)&&i.enabledStrategies.includes(e.props.selectedStrategy)}).map(function(t){return{value:t,label:e.getVersionInfo(t).label}}),n=this.getVersionInfo(this.state.idleVersion),s=null;if(this.state.idleVersion&&n)s=this.functionsUtil.getGlobalConfig(["stats","versions",this.state.idleVersion,"showPerformanceTooltip"])?this.functionsUtil.getGlobalConfig(["stats","tokens",this.props.selectedToken,"performanceTooltip"]):null;var r=a.find(function(t){return t.value===e.state.idleVersion});return y.a.createElement(k.h,{p:0,width:1,flexDirection:"column"},y.a.createElement(g.Suspense,{fallback:t},y.a.createElement(k.b,{mb:[3,4]},y.a.createElement(k.h,{flexDirection:["column","row"]},y.a.createElement(k.h,{width:[1,.4]},y.a.createElement(Y,{showPathMobile:!0,text:"ASSETS OVERVIEW",isMobile:this.props.isMobile,handleClick:function(t){return e.props.goToSection("stats")},path:[this.functionsUtil.getGlobalConfig(["strategies",this.props.selectedStrategy,"title"])]})),y.a.createElement(k.h,{mt:[3,0],width:[1,.6],flexDirection:["column","row"],justifyContent:["center","space-between"]},y.a.createElement(k.h,{width:[1,.26],flexDirection:"column"},y.a.createElement(U,{innerProps:{p:1,height:["100%","46px"]},name:"idle-version",options:a,defaultValue:r,onChange:function(t){return e.setIdleVersion(t)}})),y.a.createElement(k.h,{mt:[3,0],width:[1,.3],flexDirection:"column"},y.a.createElement(j,Object.assign({innerProps:{p:1}},this.props))),y.a.createElement(k.h,{mt:[3,0],width:[1,.39],flexDirection:"column"},y.a.createElement(O,{cardProps:{p:1,display:"flex",alignItems:"center",height:["46px","100%"],justifyContent:"center"},isInteractive:!0,handleClick:function(t){return e.setDateRangeModal(!0)}},y.a.createElement(k.u,{fontWeight:3,color:"copyColor"},this.state.quickSelection?this.quickSelections[this.state.quickSelection]:this.state.startTimestampObj&&this.state.endTimestampObj&&"".concat(this.state.startTimestampObj.format("DD/MM/YY")," - ").concat(this.state.endTimestampObj.format("DD/MM/YY")))))))),this.state.idleVersion&&n.startTimestamp>parseInt((new Date).getTime()/1e3)?y.a.createElement(k.h,{width:1,alignItems:"center",flexDirection:"row",justifyContent:"center"},y.a.createElement(O,{cardProps:{p:3,width:[1,.5]}},y.a.createElement(k.h,{alignItems:"center",flexDirection:"column"},y.a.createElement(k.k,{size:"2.3em",color:"cellText",name:"AccessTime"}),y.a.createElement(k.u,{mt:2,fontSize:2,color:"cellText",textAlign:"center"},"Idle Stats ",this.state.idleVersion," will be available shortly!")))):y.a.createElement(k.b,{width:1},y.a.createElement(k.b,{mt:[3,0],mb:[3,4]},y.a.createElement(k.h,{width:1,alignItems:"center",justifyContent:"center",flexDirection:["column","row"]},y.a.createElement(k.h,{mb:[2,0],pr:[0,2],width:[1,.25],flexDirection:"column"},y.a.createElement(T,{value:this.state.aum,title:"Asset Under Management",label:this.state.unlentBalance?"Unlent funds: ".concat(this.state.unlentBalance," ").concat(this.props.selectedToken):this.props.selectedToken,labelTooltip:this.state.unlentBalance?this.functionsUtil.getGlobalConfig(["messages","cheapRedeem"]):null})),y.a.createElement(k.h,{mb:[2,0],pr:[0,2],width:[1,.25],flexDirection:"column"},y.a.createElement(T,{title:"Avg APY",label:"Annualized"},y.a.createElement(k.h,{width:1,alignItems:"center",flexDirection:["column","row"]},y.a.createElement(I,{direction:"up",iconPos:"right",iconSize:"1.8em",justifyContent:"flex-start",width:1},y.a.createElement(k.u,{lineHeight:1,fontWeight:[3,4],color:"statValue",fontSize:[4,5]},this.state.apr,y.a.createElement(k.u.span,{color:"statValue",fontWeight:3,fontSize:["90%","70%"]},"%")))))),y.a.createElement(k.h,{mb:[2,0],pr:[0,2],width:[1,.25],flexDirection:"column"},y.a.createElement(T,{title:"Overperformance on Compound",label:"Annualized"},this.state.delta&&!isNaN(this.state.delta)?y.a.createElement(I,{direction:"up",iconPos:"right",iconSize:"1.8em",justifyContent:"flex-start"},y.a.createElement(k.u,{lineHeight:1,fontSize:[4,5],fontWeight:[3,4],color:"statValue"},this.state.delta,y.a.createElement(k.u.span,{color:"statValue",fontWeight:3,fontSize:["90%","70%"]},"%"))):y.a.createElement(k.u,{lineHeight:1,fontSize:[4,5],fontWeight:[3,4],color:"statValue"},this.state.delta))),y.a.createElement(k.h,{mb:[2,0],pr:[0,2],width:[1,.25],flexDirection:"column"},y.a.createElement(T,{label:" ",title:"Rebalances",value:this.state.rebalances.toString()})))),y.a.createElement(O,{title:"Historical Performance",description:s,cardProps:{mb:[3,4]}},y.a.createElement(k.h,{id:"chart-PRICE",width:1,mb:3},y.a.createElement(D,Object.assign({height:350},this.state,{parentId:"chart-PRICE",isMobile:this.props.isMobile,contracts:this.props.contracts,apiResults:this.state.apiResults,idleVersion:this.state.idleVersion,apiResults_unfiltered:this.state.apiResults_unfiltered,chartMode:this.state.idleVersion===this.state.latestVersion?"PRICE_V4":"PRICE"})))),y.a.createElement(O,{cardProps:{pb:3,mb:[3,4]}},y.a.createElement(k.h,{flexDirection:["column","row"],justifyContent:"space-between"},this.state.idleVersion===this.state.latestVersion&&y.a.createElement(k.h,{pt:2,width:[1,1/3],id:"allocation-chart",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start"},y.a.createElement(F,Object.assign({height:310},this.props,{parentId:"allocation-chart"})),y.a.createElement(E,this.props)),y.a.createElement(k.h,{mb:[0,3],id:"chart-ALL",pl:[0,this.state.idleVersion===this.state.latestVersion?0:3],width:[1,this.state.idleVersion===this.state.latestVersion?2/3:1]},y.a.createElement(k.h,{alignItems:"flex-start",justifyContent:"flex-start",flexDirection:"column",width:1},y.a.createElement(k.j.h4,{mb:2,ml:3,mt:[3,4],fontWeight:4,fontSize:[2,3],textAlign:"left",color:"dark-gray",lineHeight:"initial"},"Allocations over time"),y.a.createElement(D,Object.assign({height:350},this.state,{chartMode:"ALL",parentId:"chart-ALL",isMobile:this.props.isMobile,contracts:this.props.contracts,apiResults:this.state.apiResults,idleVersion:this.state.idleVersion,apiResults_unfiltered:this.state.apiResults_unfiltered})))))),y.a.createElement(k.h,{position:"relative"},y.a.createElement(k.h,{width:1,id:"carousel-container",justifyContent:"flex-end"},y.a.createElement(P,{buttonProps:{mr:3},iconName:"ArrowBack",disabled:0===this.state.carouselIndex,handleClick:function(t){return e.handleCarousel("back")}}),y.a.createElement(P,{iconName:"ArrowForward",handleClick:function(t){return e.handleCarousel("next")},disabled:this.state.carouselIndex===this.state.carouselMax})),y.a.createElement(k.h,{mt:5,height:"400px",position:"absolute",id:"carousel-cursor",width:["444%","200%"],justifyContent:"flex-start",left:this.state.carouselOffsetLeft,style:{transition:"left 0.3s ease-in-out"}},y.a.createElement(O,{cardProps:{mr:4,height:"fit-content",style:this.props.isMobile?{width:"100%"}:{width:"32vw"}}},y.a.createElement(k.h,{width:1,id:"chart-AUM"},y.a.createElement(k.h,{mb:3,width:1,flexDirection:"column",alignItems:"flex-start",justifyContent:"center"},y.a.createElement(k.j.h4,{ml:3,mt:3,mb:2,fontWeight:4,fontSize:[2,3],textAlign:"left",color:"dark-gray",lineHeight:"initial"},"Asset Under Management"),y.a.createElement(D,Object.assign({height:300},this.state,{chartMode:"AUM",parentId:"chart-AUM",isMobile:this.props.isMobile,contracts:this.props.contracts,apiResults:this.state.apiResults,idleVersion:this.state.idleVersion,apiResults_unfiltered:this.state.apiResults_unfiltered}))))),y.a.createElement(O,{cardProps:{mr:4,height:"fit-content",style:this.props.isMobile?{width:"100%"}:{width:"32vw"}}},y.a.createElement(k.h,{id:"chart-APR",width:1},y.a.createElement(k.h,{mb:3,width:1,flexDirection:"column",alignItems:"flex-start",justifyContent:"center"},y.a.createElement(k.j.h4,{mb:2,ml:3,mt:3,fontWeight:4,fontSize:[2,3],textAlign:"left",color:"dark-gray",lineHeight:"initial"},"APRs"),y.a.createElement(D,Object.assign({height:300},this.state,{chartMode:"APR",parentId:"chart-APR",isMobile:this.props.isMobile,contracts:this.props.contracts,apiResults:this.state.apiResults,idleVersion:this.state.idleVersion,apiResults_unfiltered:this.state.apiResults_unfiltered}))))),y.a.createElement(O,{cardProps:{mr:4,height:"fit-content",style:this.props.isMobile?{width:"100%"}:{width:"32vw"}},title:"Risk Score",description:"Idle Risk Score is a weighted average of the underlying protocols risks assessed by DeFi Score",titleParentProps:{ml:16,mt:16}},y.a.createElement(k.h,{id:"chart-SCORE",width:1},y.a.createElement(k.h,{mb:3,width:1,flexDirection:"column",alignItems:"flex-start",justifyContent:"center"},y.a.createElement(D,Object.assign({height:300},this.state,{chartMode:"SCORE",parentId:"chart-SCORE",isMobile:this.props.isMobile,contracts:this.props.contracts,apiResults:this.state.apiResults,idleVersion:this.state.idleVersion,apiResults_unfiltered:this.state.apiResults_unfiltered}))))),y.a.createElement(O,{cardProps:{mr:4,height:"fit-content",style:this.props.isMobile?{width:"100%"}:{width:"32vw"}}},y.a.createElement(k.h,{id:"chart-VOL",width:1},y.a.createElement(k.h,{mb:3,width:1,flexDirection:"column",alignItems:"flex-start",justifyContent:"center"},y.a.createElement(k.j.h4,{mb:2,ml:3,mt:3,fontWeight:4,fontSize:[2,3],textAlign:"left",color:"dark-gray",lineHeight:"initial"},"Volume"),y.a.createElement(D,Object.assign({height:300},this.state,{chartMode:"VOL",parentId:"chart-VOL",isMobile:this.props.isMobile,contracts:this.props.contracts,apiResults:this.state.apiResults,idleVersion:this.state.idleVersion,apiResults_unfiltered:this.state.apiResults_unfiltered})))))))),y.a.createElement(R,{minDate:this.state.minDate,maxDate:this.state.maxDate,handleSelect:this.setDateRange,isOpen:this.state.dateRangeModalOpened,closeModal:function(t){return e.setDateRangeModal(!1)},startDate:this.state.startTimestampObj?this.state.startTimestampObj._d:null,endDate:this.state.endTimestampObj?this.state.endTimestampObj._d:null})))}var l=this.functionsUtil.getGlobalConfig(["strategies"]),c=[],p=this.functionsUtil.getGlobalConfig(["stats","tokens"]),d=this.functionsUtil.getGlobalConfig(["stats","protocols"]);return Object.keys(p).forEach(function(e){p[e].enabled&&c.push(e)}),y.a.createElement(k.h,{mb:3,width:1,flexDirection:"column"},y.a.createElement(g.Suspense,{fallback:t},y.a.createElement(z,this.props),Object.keys(l).map(function(t){var i=l[t],a=e.props.availableStrategies[t];return!!a&&y.a.createElement(k.b,{mb:2,width:1,flexDirection:"column",justifyContent:"center",key:"strategy-container-".concat(t)},y.a.createElement(f.a,{mt:3,mb:[3,4]},y.a.createElement(k.h,{flexDirection:"row",alignItems:"baseline",justifyContent:"center"},i.title,i.titlePostfix&&y.a.createElement(k.u,{ml:2,fontWeight:3,fontSize:[2,4],color:"dark-gray"},i.titlePostfix))),y.a.createElement(C,Object.assign({enabledTokens:c,handleClick:function(i){return e.selectToken(t,i.token)},cols:[{title:"CURRENCY",props:{width:[.26,.15]},fields:[{name:"icon",props:{mr:2,height:["1.4em","2.3em"]}},{name:"tokenName"}]},{title:"POOL",props:{width:[.22,.14]},fields:[{name:"allocationChart",mobile:!1,parentProps:{width:.3},style:{overflow:"visible"},showLoader:!1},{name:"pool",props:{ml:1},parentProps:{width:[1,.7]}}]},{title:"APY",desc:o,props:{width:[.29,.14]},parentProps:{flexDirection:"column",alignItems:"flex-start"},fields:[{name:"apy",showTooltip:!0},{name:"idleDistribution",showLoader:!1,props:{decimals:e.props.isMobile?1:2,fontSize:e.props.isMobile?"9px":0}}]},{title:"RISK SCORE",desc:e.functionsUtil.getGlobalConfig(["messages","riskScore"]),mobile:!1,props:{width:[.27,.16]},fields:[{name:"score"}]},{title:"APR LAST WEEK",mobile:!1,props:{width:.25},parentProps:{width:1,pr:[2,4]},fields:[{name:"aprChart"}]},{title:"",props:{width:[.23,.16]},parentProps:{width:1},fields:[{name:"button",label:e.props.isMobile?"View":"View stats",props:{width:1,fontSize:3,fontWeight:3,height:"45px",borderRadius:4,boxShadow:null,mainColor:"redeem",size:e.props.isMobile?"small":"medium",handleClick:function(i){return e.selectToken(t,i.token)}}}]}]},e.props,{selectedStrategy:t,availableTokens:a})),!e.props.isMobile&&y.a.createElement(k.h,{mt:2,alignItems:"center",flexDirection:"row",justifyContent:"flex-end"},Object.values(d).filter(function(e){return e.legend}).map(function(e,t){return y.a.createElement(k.h,{mr:3,alignItems:"center",flexDirection:"row",key:"legend_".concat(t)},y.a.createElement(k.b,{mr:1,width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"rgb(".concat(e.color.rgb.join(","),")")}),y.a.createElement(k.u.span,{fontSize:1,color:"cellText"},e.label))})))}),i&&!this.state.showRefreshIdleSpeed?y.a.createElement(k.h,{width:1,my:[2,3],alignItems:"center",flexDirection:"row",justifyContent:"center"},y.a.createElement(k.n,{hoverColor:"primary",onClick:this.showRefreshIdleSpeed.bind(this)},"Refresh Idle Speed")):i&&this.state.showRefreshIdleSpeed&&y.a.createElement(k.h,{p:2,width:1,my:[2,3],borderRadius:1,alignItems:"center",flexDirection:"column",justifyContent:"center",backgroundColor:"#f3f6ff",boxShadow:"0px 0px 0px 1px rgba(0,54,255,0.3)"},y.a.createElement(k.u,{fontWeight:500,color:"#3f4e9a",textAlign:"center",fontSize:[1,"15px"]},"By executing this transaction you can adjust the IDLE distribution speed among the pools."),y.a.createElement(V,Object.assign({action:"Refresh",Component:k.c,parentProps:{mt:1},componentProps:{size:"small",value:"REFRESH IDLE SPEED"},params:[],contractName:"IdleController",methodName:"refreshIdleSpeeds"},this.props),y.a.createElement(k.h,{flexDirection:"row",alignItems:"center",justifyContent:"center"},y.a.createElement(k.k,{mr:1,name:"Done",size:"1.4em",color:this.props.theme.colors.transactions.status.completed}),y.a.createElement(k.u,{fontWeight:500,fontSize:"15px",color:"copyColor",textAlign:"center"},"Idle Speed Refreshed"))))))}}]),t}(g.Component);t.default=A}}]);
//# sourceMappingURL=17.107d533b.chunk.js.map