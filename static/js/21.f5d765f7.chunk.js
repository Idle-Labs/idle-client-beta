(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{4825:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),o=n(6),l=n(11),r=n(12),c=n(15),s=n(14),m=n(18),d=n(9),u=n(0),h=n.n(u),f=n(4),g=n(577),p=n.n(g),b=n(102),y=n(63),E=n(302),v=n.n(E),w=n(1106),S=n(34),k=n(50),U=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(s.a)(t).call(this,e))).state={email:null,error:!1,subscribed:!1,sendingForm:!1},n.functionsUtil=null,n.componentDidUpdate=Object(o.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.functionsUtil.setProps(n.props);case 1:case"end":return e.stop()}},e,this)})),n.sendUserInfo=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=n.functionsUtil.getWalletProvider(),a={address:n.props.account,provider:t};e&&null!==n.state.email&&(a.email=n.state.email),n.functionsUtil.simpleIDPassUserInfo(a)},n.closeModal=Object(o.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=function(){n.props.closeModal()};try{n.sendUserInfo(!1),S.a.analytics.google.events.enabled?(n.functionsUtil.sendGoogleAnalyticsEvent({eventCategory:"UI",eventAction:"continue_without_email",eventLabel:"WelcomeModal"},t),setTimeout(t,1e3)):t()}catch(a){t()}case 2:case"end":return e.stop()}},e,this)})),n.functionsUtil=new k.a(e),n.handleSubmit=n.handleSubmit.bind(Object(d.a)(Object(d.a)(n))),n.handleValidation=n.handleValidation.bind(Object(d.a)(Object(d.a)(n))),n}return Object(m.a)(t,e),Object(r.a)(t,[{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),!this.state.email)return!1;var n=function(){t.setState({sendingForm:!1,subscribed:!0}),window.setTimeout(t.props.closeModal,2500)};if(this.sendUserInfo(),this.functionsUtil.sendGoogleAnalyticsEvent({eventCategory:"UI",eventAction:"send_email",eventLabel:"WelcomeModal"}),p.a.post(S.a.newsletterSubscription.endpoint,{email:this.state.email}).then(function(e){n()}).catch(function(e){n()}),localStorage){var a=this.props.account.toLowerCase(),i=localStorage.getItem("lastLogin")?JSON.parse(localStorage.getItem("lastLogin")):null;i&&i[a]&&!i[a].signedUp&&(i[a].signedUp=!0,this.functionsUtil.setLocalStorage("lastLogin",JSON.stringify(i)))}this.setState({sendingForm:!0})}},{key:"handleValidation",value:function(e){e&&e.target&&(this.setState({email:e.target.value}),e.target.parentNode.classList.add("was-validated"))}},{key:"render",value:function(){return h.a.createElement(f.p,{isOpen:this.props.isOpen},this.state.subscribed?h.a.createElement(y.a,{closeFunc:this.closeModal},h.a.createElement(y.a.Header,{title:"All done",icon:"images/done.svg"}),h.a.createElement(y.a.Body,null,h.a.createElement(f.h,{width:1,flexDirection:"column",mb:3},h.a.createElement(f.u,{color:"dark-gray",textAlign:"center",fontSize:3,my:0},"Thanks for subscribing!"),h.a.createElement(f.c,{my:3,width:"100%",borderRadius:4,onClick:this.closeModal},"CLOSE")))):h.a.createElement(y.a,{closeFunc:this.closeModal},h.a.createElement(y.a.Header,{title:"Stay up-to-date!",icon:"images/notification.svg"}),h.a.createElement(y.a.Body,null,h.a.createElement(f.i,{onSubmit:this.handleSubmit},h.a.createElement(f.h,{width:1,flexDirection:"column",mb:3},h.a.createElement(f.u,{color:"mid-gray",textAlign:"left",fontSize:3,my:0},"Add your e-mail to receive updates about:")),h.a.createElement(f.h,{width:1,flexDirection:"column",mt:2},h.a.createElement(f.h,{my:2,flexDirection:"row",alignItems:"center"},h.a.createElement(f.k,{name:"CheckCircle",color:b.b.green,size:"32"}),h.a.createElement(f.u,{color:"dark-gray",textAlign:"left",fontSize:3,fontWeight:2,my:0,ml:2},"Performance reports")),h.a.createElement(f.h,{my:2,flexDirection:"row"},h.a.createElement(f.k,{name:"CheckCircle",color:b.b.green,size:"32"}),h.a.createElement(f.u,{color:"dark-gray",textAlign:"left",fontSize:3,fontWeight:2,my:0,ml:2},"New Protocols & Tokens")),h.a.createElement(f.h,{my:2,flexDirection:"row"},h.a.createElement(f.k,{name:"CheckCircle",color:b.b.green,size:"32"}),h.a.createElement(f.u,{color:"dark-gray",textAlign:"left",fontSize:3,fontWeight:2,my:0,ml:2},"Latest updates")),h.a.createElement(f.i.Field,{width:1,label:""},h.a.createElement(f.i.Input,{type:"email",name:"EMAIL",width:1,outline:"none",border:0,px:3,py:4,fontSize:3,textAlign:["center","left"],placeholder:"Enter your e-mail",onChange:this.handleValidation,required:!0})),h.a.createElement(f.h,{mb:3,flexDirection:"column",alignItems:"center",justifyContent:"center"},h.a.createElement(w.a,{buttonText:"SUBMIT",isLoading:this.state.sendingForm,buttonProps:{className:v.a.gradientButton,width:"100%",type:"submit"}}),h.a.createElement(f.n,{mt:2,onClick:this.closeModal,hoverColor:"blue"},"continue without e-mail")))))))}}]),t}(h.a.Component);t.default=U}}]);
//# sourceMappingURL=21.f5d765f7.chunk.js.map